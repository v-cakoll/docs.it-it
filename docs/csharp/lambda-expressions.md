---
title: Espressioni lambda
description: Informazioni sull'uso delle espressioni lambda, vale a dire blocchi di codice eseguibile che possono essere passati come argomenti.
keywords: .NET, .NET Core, espressioni lambda, lambda, delegati
ms-author: ronpet
author: rpetrusha
ms.date: 11/22/2016
ms.topic: article
ms.prod: .net
ms.technology: devlang-csharp
ms.devlang: csharp
ms.assetid: b6a0539a-8ce5-4da7-adcf-44be345a2714
ms.openlocfilehash: 6395d873c4a04501d25a2edbb1acc0a163dd3e5c
ms.sourcegitcommit: 83dd5ec003e788ccb3e33f3412a7af39ae347646
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 03/15/2018
---
# <a name="lambda-expressions"></a><span data-ttu-id="cd56c-104">Espressioni lambda</span><span class="sxs-lookup"><span data-stu-id="cd56c-104">Lambda expressions</span></span> #

<span data-ttu-id="cd56c-105">Un'*espressione lambda* è un blocco di codice costituito da espressioni o da istruzioni che viene trattato come oggetto.</span><span class="sxs-lookup"><span data-stu-id="cd56c-105">A *lambda expression* is a block of code (an expression or a statement block) that is treated as an object.</span></span> <span data-ttu-id="cd56c-106">Tale blocco può essere passato come argomento ai metodi e può anche essere restituito dalle chiamate al metodo.</span><span class="sxs-lookup"><span data-stu-id="cd56c-106">It can be passed as an argument to methods, and it can also be returned by method calls.</span></span> <span data-ttu-id="cd56c-107">Le espressioni lambda sono spesso usate per eseguire le attività seguenti:</span><span class="sxs-lookup"><span data-stu-id="cd56c-107">Lambda expressions are used extensively for:</span></span>

- <span data-ttu-id="cd56c-108">Passaggio del codice da eseguire a metodi asincroni, ad esempio <xref:System.Threading.Tasks.Task.Run(System.Action)>.</span><span class="sxs-lookup"><span data-stu-id="cd56c-108">Passing the code that is to be executed to asynchronous methods, such as <xref:System.Threading.Tasks.Task.Run(System.Action)>.</span></span>

- <span data-ttu-id="cd56c-109">Scrittura di [espressioni di query LINQ](linq/index.md).</span><span class="sxs-lookup"><span data-stu-id="cd56c-109">Writing [LINQ query expressions](linq/index.md).</span></span>

- <span data-ttu-id="cd56c-110">Creazione di [alberi delle espressioni](expression-trees-building.md).</span><span class="sxs-lookup"><span data-stu-id="cd56c-110">Creating [expression trees](expression-trees-building.md).</span></span>

<span data-ttu-id="cd56c-111">Le espressioni lambda sono codice che può essere rappresentato come delegato o come albero delle espressioni che viene compilato in un delegato.</span><span class="sxs-lookup"><span data-stu-id="cd56c-111">Lambda expressions are code that can be represented either as a delegate, or as an expression tree that compiles to a delegate.</span></span> <span data-ttu-id="cd56c-112">Il tipo di delegato specifico di un'espressione lambda dipende dai parametri dell'espressione e dal valore restituito.</span><span class="sxs-lookup"><span data-stu-id="cd56c-112">The specific delegate type of a lambda expression depends on its parameters and return value.</span></span> <span data-ttu-id="cd56c-113">Le espressioni lambda che non restituiscono un valore corrispondano a un delegato `Action` specifico, che dipende dal relativo numero di parametri.</span><span class="sxs-lookup"><span data-stu-id="cd56c-113">Lambda expressions that don't return a value correspond to a specific `Action` delegate, depending on its number of parameters.</span></span> <span data-ttu-id="cd56c-114">Le espressioni lambda che restituiscono un valore corrispondano a un delegato `Func` specifico, che dipende dal relativo numero di parametri.</span><span class="sxs-lookup"><span data-stu-id="cd56c-114">Lambda expressions that return a value correspond to a specific `Func` delegate, depending on its number of parameters.</span></span> <span data-ttu-id="cd56c-115">Se ad esempio un'espressione lambda con due parametri non restituisce un valore, corrisponde a un delegato <xref:System.Action%602>.</span><span class="sxs-lookup"><span data-stu-id="cd56c-115">For example, a lambda expression that has two parameters but returns no value corresponds to an <xref:System.Action%602> delegate.</span></span> <span data-ttu-id="cd56c-116">Se un'espressione lambda ha un parametro e restituisce un valore, corrisponde a un delegato <xref:System.Func%602>.</span><span class="sxs-lookup"><span data-stu-id="cd56c-116">A lambda expression that has one parameter and returns a value corresponds to <xref:System.Func%602> delegate.</span></span>

<span data-ttu-id="cd56c-117">Un'espressione lambda usa `=>`, vale a dire l'[operatore di dichiarazione lambda](language-reference/operators/lambda-operator.md), per separare l'elenco di parametri dell'espressione lambda dal codice eseguibile.</span><span class="sxs-lookup"><span data-stu-id="cd56c-117">A lambda expression uses `=>`, the [lambda declaration operator](language-reference/operators/lambda-operator.md), to separate the lambda's parameter list from its executable code.</span></span> <span data-ttu-id="cd56c-118">Per creare un'espressione lambda, specificare gli eventuali parametri di input a sinistra dell'operatore lambda e inserire il blocco di espressioni o di istruzioni dall'altra parte.</span><span class="sxs-lookup"><span data-stu-id="cd56c-118">To create a lambda expression, you specify input parameters (if any) on the left side of the lambda operator, and you put the expression or statement block on the other side.</span></span> <span data-ttu-id="cd56c-119">Ad esempio, l'espressione lambda `x => x * x` a riga singola specifica un parametro denominato `x` e restituisce il valore di `x` al quadrato.</span><span class="sxs-lookup"><span data-stu-id="cd56c-119">For example, the single-line lambda expression `x => x * x` specifies a parameter that’s named `x` and returns the value of `x` squared.</span></span> <span data-ttu-id="cd56c-120">È possibile assegnare questa espressione a un tipo di delegato, come illustrato nell'esempio riportato di seguito:</span><span class="sxs-lookup"><span data-stu-id="cd56c-120">You can assign this expression to a delegate type, as the following example shows:</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/lambda1.cs#1)]

<span data-ttu-id="cd56c-121">Oppure è possibile passarla direttamente come argomento del metodo:</span><span class="sxs-lookup"><span data-stu-id="cd56c-121">Or you can pass it directly as a method argument:</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/lambda2.cs#2)]

## <a name="expression-lambdas"></a><span data-ttu-id="cd56c-122">Espressioni lambda</span><span class="sxs-lookup"><span data-stu-id="cd56c-122">Expression lambdas</span></span> ##

 <span data-ttu-id="cd56c-123">Un'espressione lambda con un'espressione a destra dell'operatore => è denominata *espressione lambda*.</span><span class="sxs-lookup"><span data-stu-id="cd56c-123">A lambda expression with an expression on the right side of the => operator is called an *expression lambda*.</span></span> <span data-ttu-id="cd56c-124">Queste espressioni vengono usate spesso nella costruzione di [alberi delle espressioni](expression-trees.md).</span><span class="sxs-lookup"><span data-stu-id="cd56c-124">Expression lambdas are used extensively in the construction of [expression trees](expression-trees.md).</span></span> <span data-ttu-id="cd56c-125">Un'espressione lambda dell'espressione restituisce il risultato dell'espressione e ha il formato di base seguente:</span><span class="sxs-lookup"><span data-stu-id="cd56c-125">An expression lambda returns the result of the expression and takes the following basic form:</span></span>

```csharp
(input parameters) => expression
```

<span data-ttu-id="cd56c-126">Le parentesi sono facoltative solo se l'espressione lambda ha un parametro di input; in caso contrario sono obbligatorie.</span><span class="sxs-lookup"><span data-stu-id="cd56c-126">The parentheses are optional only if the lambda has one input parameter; otherwise they are required.</span></span> <span data-ttu-id="cd56c-127">Specificare zero parametri di input con parentesi vuote:</span><span class="sxs-lookup"><span data-stu-id="cd56c-127">Specify zero input parameters with empty parentheses:</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/expression3.cs#1)]

<span data-ttu-id="cd56c-128">Due o più parametri di input vengono separati da virgole e racchiusi tra parentesi:</span><span class="sxs-lookup"><span data-stu-id="cd56c-128">Two or more input parameters are separated by commas enclosed in parentheses:</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/expression3.cs#2)]

<span data-ttu-id="cd56c-129">Il compilatore usa solitamente l'inferenza del tipo per determinare i tipi di parametro.</span><span class="sxs-lookup"><span data-stu-id="cd56c-129">Ordinarily, the compiler uses type inference in determining parameter types.</span></span> <span data-ttu-id="cd56c-130">Talvolta è tuttavia difficile o impossibile per il compilatore dedurre i tipi di input.</span><span class="sxs-lookup"><span data-stu-id="cd56c-130">However, sometimes it is difficult or impossible for the compiler to infer the input types.</span></span> <span data-ttu-id="cd56c-131">In tal caso, è possibile specificare i tipi in modo esplicito come illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="cd56c-131">When this occurs, you can specify the types explicitly, as in the following example:</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/expression3.cs#3)]

<span data-ttu-id="cd56c-132">Si noti che nell'esempio precedente il corpo di un'espressione lambda dell'espressione può essere costituito da una chiamata al metodo.</span><span class="sxs-lookup"><span data-stu-id="cd56c-132">Note in the previous example that the body of an expression lambda can consist of a method call.</span></span> <span data-ttu-id="cd56c-133">Se tuttavia si creano alberi delle espressioni valutati al di fuori di .NET Framework, ad esempio in SQL Server o in Entity Framework, non è consigliabile usare chiamate al metodo nelle espressioni lambda. I metodi non avranno infatti alcun significato fuori dal contesto dell'implementazione .NET.</span><span class="sxs-lookup"><span data-stu-id="cd56c-133">However, if you are creating expression trees that are evaluated outside of the .NET Framework, such as in SQL Server or Entity Framework (EF), you should refrain from using method calls in lambda expressions, since the methods may have no meaning outside the context of the .NET implementation.</span></span> <span data-ttu-id="cd56c-134">Se si sceglie comunque di usare le chiamate al metodo, testarle attentamente per assicurarsi che possano essere risolte correttamente.</span><span class="sxs-lookup"><span data-stu-id="cd56c-134">If you do choose to use method calls in this case, be sure to test them thoroughly to ensure that the method calls can be successfuly resolved.</span></span>

## <a name="statement-lambdas"></a><span data-ttu-id="cd56c-135">Espressioni lambda dell'istruzione</span><span class="sxs-lookup"><span data-stu-id="cd56c-135">Statement lambdas</span></span> ##

<span data-ttu-id="cd56c-136">Un'espressione lambda dell'istruzione è simile a un'espressione lambda dell'espressione con la differenza che l'istruzione o le istruzioni sono racchiuse tra parentesi graffe:</span><span class="sxs-lookup"><span data-stu-id="cd56c-136">A statement lambda resembles an expression lambda except that the statement(s) is enclosed in braces:</span></span>

```csharp
(input parameters) => { statement; }
```

<span data-ttu-id="cd56c-137">Il corpo di un'espressione lambda dell'istruzione può essere costituito da un numero qualsiasi di istruzioni, sebbene in pratica generalmente non ce ne siano più di due o tre.</span><span class="sxs-lookup"><span data-stu-id="cd56c-137">The body of a statement lambda can consist of any number of statements; however, in practice there are typically no more than two or three.</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/statement1.cs#1)]

<span data-ttu-id="cd56c-138">Le espressioni lambda dell'istruzione, come i metodi anonimi, non possono essere utilizzate per creare alberi delle espressioni.</span><span class="sxs-lookup"><span data-stu-id="cd56c-138">Statement lambdas, like anonymous methods, cannot be used to create expression trees.</span></span>

## <a name="async-lambdas"></a><span data-ttu-id="cd56c-139">Espressioni lambda asincrone</span><span class="sxs-lookup"><span data-stu-id="cd56c-139">Async lambdas</span></span> ##

<span data-ttu-id="cd56c-140">Usando le parole chiave [async](language-reference/keywords/async.md) e [await](language-reference/keywords/await.md) è facile creare istruzioni ed espressioni lambda che includono l'elaborazione asincrona.</span><span class="sxs-lookup"><span data-stu-id="cd56c-140">You can easily create lambda expressions and statements that incorporate asynchronous processing by using the [async](language-reference/keywords/async.md) and [await](language-reference/keywords/await.md) keywords.</span></span> <span data-ttu-id="cd56c-141">Nell'esempio viene chiamato un metodo `ShowSquares` eseguito in modo asincrono.</span><span class="sxs-lookup"><span data-stu-id="cd56c-141">For example, the example calls a `ShowSquares` method that executes asynchronously.</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/async1.cs#1)]

<span data-ttu-id="cd56c-142">Per altre informazioni su come creare e usare i metodi asincroni, vedere [Programmazione asincrona con async e await (C#)](programming-guide/concepts/async/index.md).</span><span class="sxs-lookup"><span data-stu-id="cd56c-142">For more information about how to create and use async methods, see [Asynchronous programming with async and await](programming-guide/concepts/async/index.md).</span></span>

## <a name="lambda-expressions-and-tuples"></a><span data-ttu-id="cd56c-143">Espressioni lambda e tuple</span><span class="sxs-lookup"><span data-stu-id="cd56c-143">Lambda expressions and tuples</span></span> ##

<span data-ttu-id="cd56c-144">A partire da C# 7.0, il linguaggio C# offre supporto predefinito delle tuple.</span><span class="sxs-lookup"><span data-stu-id="cd56c-144">Starting with C# 7.0, the C# language provides built-in support for tuples.</span></span> <span data-ttu-id="cd56c-145">È possibile specificare una tupla come argomento di un'espressione lambda e l'espressione lambda può restituire una tupla.</span><span class="sxs-lookup"><span data-stu-id="cd56c-145">You can provide a tuple as an argument to a lambda expression, and your lambda expression can also return a tuple.</span></span> <span data-ttu-id="cd56c-146">In alcuni casi, il compilatore C# usa l'inferenza del tipo per determinare i tipi di componenti della tupla.</span><span class="sxs-lookup"><span data-stu-id="cd56c-146">In some cases, the C# compiler uses type inference to determine the types of tuple components.</span></span> 

<span data-ttu-id="cd56c-147">Per definire una tupla, è necessario racchiudere tra parentesi un elenco di componenti delimitato da virgole.</span><span class="sxs-lookup"><span data-stu-id="cd56c-147">You define a tuple by enclosing a comma-delimited list of its components in parentheses.</span></span> <span data-ttu-id="cd56c-148">L'esempio riportato sotto usa una tupla con 5 componenti per passare una sequenza di numeri a un'espressione lambda, la quale raddoppia ogni valore e restituisce una tupla con 5 componenti che contiene il risultato delle moltiplicazioni.</span><span class="sxs-lookup"><span data-stu-id="cd56c-148">The following example uses tuple with 5 components to pass a sequence of numbers to a lambda expression, which doubles each value and returns a tuple with 5 components that contains the result of the multiplications.</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/tuples1.cs#1)]

<span data-ttu-id="cd56c-149">In genere, i campi di una tupla sono denominati `Item1`, `Item2` e così via. È possibile tuttavia definire una tupla usando i componenti denominati, come illustra l'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="cd56c-149">Ordinarily, the fields of a tuple are named `Item1`, `Item2`, etc. You can, however, define a tuple with named components, as the following example does.</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/tuples2.cs#1)]

<span data-ttu-id="cd56c-150">Per altre informazioni sul supporto delle tuple in C#, vedere [C# Tuple types](tuples.md) (Tipi di tupla in C#).</span><span class="sxs-lookup"><span data-stu-id="cd56c-150">For more information on support for tuples in C#, see [C# Tuple types](tuples.md).</span></span>

## <a name="lambdas-with-the-standard-query-operators"></a><span data-ttu-id="cd56c-151">Espressioni lambda con operatori query standard</span><span class="sxs-lookup"><span data-stu-id="cd56c-151">Lambdas with the standard query operators</span></span> ##

<span data-ttu-id="cd56c-152">LINQ to Objects, tra altre implementazioni, ha un parametro di input il cui tipo appartiene alla famiglia <xref:System.Func%601> di delegati generici.</span><span class="sxs-lookup"><span data-stu-id="cd56c-152">LINQ to Objects, among other implementations, have an input parameter whose type is one of the <xref:System.Func%601> family of generic delegates.</span></span> <span data-ttu-id="cd56c-153">Questi delegati usano parametri di tipo per definire il numero e il tipo di parametri di input e il tipo restituito del delegato.</span><span class="sxs-lookup"><span data-stu-id="cd56c-153">These delegates use type parameters to define the number and type of input parameters, and the return type of the delegate.</span></span> <span data-ttu-id="cd56c-154">I delegati `Func` sono molto utili per incapsulare le espressioni definite dall'utente applicate a ogni elemento in un set di dati di origine.</span><span class="sxs-lookup"><span data-stu-id="cd56c-154">`Func` delegates are very useful for encapsulating user-defined expressions that are applied to each element in a set of source data.</span></span> <span data-ttu-id="cd56c-155">Considerare ad esempio il delegato <xref:System.Func%601>, la cui sintassi è la seguente:</span><span class="sxs-lookup"><span data-stu-id="cd56c-155">For example, consider the <xref:System.Func%601> delegate, whose syntax is:</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/query1.cs#1)]

<span data-ttu-id="cd56c-156">È possibile creare un'istanza del delegato come un codice simile al seguente</span><span class="sxs-lookup"><span data-stu-id="cd56c-156">The delegate can be instantiated with code like the following</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/query1.cs#2)]

<span data-ttu-id="cd56c-157">dove `int` è un parametro di input e `bool` è il valore restituito.</span><span class="sxs-lookup"><span data-stu-id="cd56c-157">where `int` is an input parameter, and `bool` is the return value.</span></span> <span data-ttu-id="cd56c-158">Il valore restituito è sempre specificato nell'ultimo parametro di tipo.</span><span class="sxs-lookup"><span data-stu-id="cd56c-158">The return value is always specified in the last type parameter.</span></span> <span data-ttu-id="cd56c-159">Quando viene richiamato, il delegato `Func` seguente restituisce true o false per indicare se il parametro di input è uguale a 5:</span><span class="sxs-lookup"><span data-stu-id="cd56c-159">When the following `Func` delegate is invoked, it returns true or false to indicate whether the input parameter is equal to 5:</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/query1.cs#3)]

<span data-ttu-id="cd56c-160">È anche possibile specificare un'espressione lambda quando il tipo di argomento è <xref:System.Linq.Expressions.Expression%601>, ad esempio negli operatori query standard definiti nel tipo <xref:System.Linq.Queryable>.</span><span class="sxs-lookup"><span data-stu-id="cd56c-160">You can also supply a lambda expression when the argument type is an <xref:System.Linq.Expressions.Expression%601>, for example in the standard query operators that are defined in the <xref:System.Linq.Queryable> type.</span></span> <span data-ttu-id="cd56c-161">Quando si specifica un argomento <xref:System.Linq.Expressions.Expression%601>, l'espressione lambda viene compilata per un albero delle espressioni.</span><span class="sxs-lookup"><span data-stu-id="cd56c-161">When you specify an <xref:System.Linq.Expressions.Expression%601> argument, the lambda is compiled to an expression tree.</span></span> <span data-ttu-id="cd56c-162">Nell'esempio seguente viene usato l'operatore di query standard [System.Linq.Enumerable.Count](xref:System.Linq.Enumerable.Count%60%601(System.Collections.Generic.IEnumerable{%60%600})).</span><span class="sxs-lookup"><span data-stu-id="cd56c-162">The following example uses the [System.Linq.Enumerable.Count](xref:System.Linq.Enumerable.Count%60%601(System.Collections.Generic.IEnumerable{%60%600})) standard query operator.</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/query1.cs#4)]

<span data-ttu-id="cd56c-163">Il compilatore è in grado di dedurre il tipo del parametro di input oppure è possibile specificarlo in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="cd56c-163">The compiler can infer the type of the input parameter, or you can also specify it explicitly.</span></span> <span data-ttu-id="cd56c-164">Questa espressione lambda particolare conta i numeri interi (`n`) che divisi per due danno un resto di 1.</span><span class="sxs-lookup"><span data-stu-id="cd56c-164">This particular lambda expression counts those integers (`n`) that, when divided by two, have a remainder of 1.</span></span>

<span data-ttu-id="cd56c-165">L'esempio seguente crea una sequenza contenente tutti gli elementi presenti nella matrice `numbers` che si trovano a sinistra di 9, vale a dire il primo numero della sequenza che non soddisfa la condizione.</span><span class="sxs-lookup"><span data-stu-id="cd56c-165">The following example produces a sequence that contains all elements in the `numbers` array that precede the 9, because that's the first number in the sequence that doesn't meet the condition.</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/query1.cs#5)]

<span data-ttu-id="cd56c-166">In questo esempio viene illustrato come specificare più parametri di input racchiudendoli tra parentesi.</span><span class="sxs-lookup"><span data-stu-id="cd56c-166">The following example specifies multiple input parameters by enclosing them in parentheses.</span></span> <span data-ttu-id="cd56c-167">Il metodo restituisce tutti gli elementi presenti nella matrice di numeri finché non viene rilevato un numero il cui valore è inferiore alla relativa posizione all'interno della matrice.</span><span class="sxs-lookup"><span data-stu-id="cd56c-167">The method returns all the elements in the numbers array until it encounters a number whose value is less than its ordinal position in the array.</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/query1.cs#6)]

## <a name="type-inference-in-lambda-expressions"></a><span data-ttu-id="cd56c-168">Inferenza del tipo nelle espressioni lambda</span><span class="sxs-lookup"><span data-stu-id="cd56c-168">Type inference in lambda expressions</span></span> ##

<span data-ttu-id="cd56c-169">Quando si scrivono espressioni lambda, spesso non occorre specificare un tipo per i parametri di input, in quanto il compilatore può dedurlo in base al corpo dell'espressione lambda, ai tipi di parametro e ad altri fattori, come descritto nelle specifiche del linguaggio C#.</span><span class="sxs-lookup"><span data-stu-id="cd56c-169">When writing lambdas, you often do not have to specify a type for the input parameters because the compiler can infer the type based on the lambda body, the parameter types, and other factors, as described in the C# Language Specification.</span></span> <span data-ttu-id="cd56c-170">Per la maggior parte degli operatori di query standard, il primo input è il tipo degli elementi nella sequenza di origine.</span><span class="sxs-lookup"><span data-stu-id="cd56c-170">For most of the standard query operators, the first input is the type of the elements in the source sequence.</span></span> <span data-ttu-id="cd56c-171">Pertanto, se si esegue una query su un oggetto `IEnumerable<Customer>`, si deduce che la variabile di input sia un oggetto `Customer`, ovvero che si dispone dell'accesso ai relativi metodi e proprietà:</span><span class="sxs-lookup"><span data-stu-id="cd56c-171">If you are querying an `IEnumerable<Customer>`, then the input variable is inferred to be a `Customer` object, which means you have access to its methods and properties:</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/infer1.cs#1)]

<span data-ttu-id="cd56c-172">Di seguito sono riportate le regole generali per l'inferenza del tipo nelle espressioni lambda:</span><span class="sxs-lookup"><span data-stu-id="cd56c-172">The general rules for type inference for lambdas are:</span></span>

- <span data-ttu-id="cd56c-173">L'espressione lambda deve contenere lo stesso numero di parametri del tipo delegato.</span><span class="sxs-lookup"><span data-stu-id="cd56c-173">The lambda must contain the same number of parameters as the delegate type.</span></span>

- <span data-ttu-id="cd56c-174">Ogni argomento di input nell'espressione lambda deve essere convertibile in modo implicito nel parametro del delegato corrispondente.</span><span class="sxs-lookup"><span data-stu-id="cd56c-174">Each input argument in the lambda must be implicitly convertible to its corresponding delegate parameter.</span></span>

- <span data-ttu-id="cd56c-175">Il valore restituito dell'espressione lambda, se presente, deve essere convertibile in modo implicito nel tipo restituito del delegato.</span><span class="sxs-lookup"><span data-stu-id="cd56c-175">The return value of the lambda (if any) must be implicitly convertible to the delegate's return type.</span></span>

<span data-ttu-id="cd56c-176">Si noti che le espressioni lambda non hanno un tipo poiché Common Type System non ha alcun concetto intrinseco di "espressione lambda".</span><span class="sxs-lookup"><span data-stu-id="cd56c-176">Note that lambda expressions in themselves do not have a type because the common type system has no intrinsic concept of "lambda expression."</span></span> <span data-ttu-id="cd56c-177">In alcuni casi, tuttavia, può essere utile fare riferimento in modo informale al "tipo" di un'espressione lambda.</span><span class="sxs-lookup"><span data-stu-id="cd56c-177">However, it is sometimes convenient to speak informally of the "type" of a lambda expression.</span></span> <span data-ttu-id="cd56c-178">In questi casi, per tipo si intende il tipo delegato o il tipo <xref:System.Linq.Expressions.Expression> in cui viene convertita l'espressione lambda.</span><span class="sxs-lookup"><span data-stu-id="cd56c-178">In these cases the type refers to the delegate type or <xref:System.Linq.Expressions.Expression> type to which the lambda expression is converted.</span></span>

## <a name="variable-scope-in-lambda-expressions"></a><span data-ttu-id="cd56c-179">Ambito delle variabili nelle espressioni lambda</span><span class="sxs-lookup"><span data-stu-id="cd56c-179">Variable Scope in Lambda Expressions</span></span> ##

<span data-ttu-id="cd56c-180">Le espressioni lambda possono fare riferimento alle *variabili esterne* (vedere [Metodi anonimi](programming-guide/statements-expressions-operators/anonymous-methods.md)) presenti nell'ambito del metodo che definisce la funzione lambda oppure nell'ambito del tipo che contiene l'espressione lambda.</span><span class="sxs-lookup"><span data-stu-id="cd56c-180">Lambdas can refer to *outer variables* (see [Anonymous methods](programming-guide/statements-expressions-operators/anonymous-methods.md)) that are in scope in the method that defines the lambda function, or in scope in the type that contains the lambda expression.</span></span> <span data-ttu-id="cd56c-181">Le variabili acquisite in questo modo vengono archiviate per poter essere utilizzate nell'espressione lambda anche se le variabili diventano esterne all'ambito e vengono sottoposte a Garbage Collection.</span><span class="sxs-lookup"><span data-stu-id="cd56c-181">Variables that are captured in this manner are stored for use in the lambda expression even if the variables would otherwise go out of scope and be garbage collected.</span></span> <span data-ttu-id="cd56c-182">Una variabile esterna deve essere assegnata prima di poter essere utilizzata in un'espressione lambda.</span><span class="sxs-lookup"><span data-stu-id="cd56c-182">An outer variable must be definitely assigned before it can be consumed in a lambda expression.</span></span> <span data-ttu-id="cd56c-183">Nell'esempio seguente vengono illustrate queste regole.</span><span class="sxs-lookup"><span data-stu-id="cd56c-183">The following example demonstrates these rules.</span></span>

[!code-csharp[csSnippets.Lambdas](../../samples/snippets/csharp/concepts/lambda-expressions/scope.cs#1)]

 <span data-ttu-id="cd56c-184">Le regole seguenti si applicano all'ambito delle variabili nelle espressioni lambda:</span><span class="sxs-lookup"><span data-stu-id="cd56c-184">The following rules apply to variable scope in lambda expressions:</span></span>

- <span data-ttu-id="cd56c-185">Una variabile acquisita non sarà sottoposta a Garbage Collection finché il delegato a cui fa riferimento non diventa idoneo per il Garbage Collection.</span><span class="sxs-lookup"><span data-stu-id="cd56c-185">A variable that is captured will not be garbage-collected until the delegate that references it becomes eligible for garbage collection.</span></span>

- <span data-ttu-id="cd56c-186">Le variabili introdotte all'interno di un'espressione lambda non sono visibili nel metodo esterno.</span><span class="sxs-lookup"><span data-stu-id="cd56c-186">Variables introduced within a lambda expression are not visible in the outer method.</span></span>

- <span data-ttu-id="cd56c-187">Un'espressione lambda non può acquisire direttamente un parametro `in`, `ref` o `out` da un metodo contenitore.</span><span class="sxs-lookup"><span data-stu-id="cd56c-187">A lambda expression cannot directly capture an `in`, `ref`, or `out` parameter from an enclosing method.</span></span>

- <span data-ttu-id="cd56c-188">Un'istruzione return in un'espressione lambda non causa la restituzione del metodo contenitore.</span><span class="sxs-lookup"><span data-stu-id="cd56c-188">A return statement in a lambda expression does not cause the enclosing method to return.</span></span>

- <span data-ttu-id="cd56c-189">Un'espressione lambda non può contenere un'istruzione `goto` , `break` o `continue` , inclusa nella funzione lambda se la destinazione dell'istruzione jump è esterna al blocco.</span><span class="sxs-lookup"><span data-stu-id="cd56c-189">A lambda expression cannot contain a `goto` statement, `break` statement, or `continue` statement that is inside the lambda function if the jump statement’s target is outside the block.</span></span> <span data-ttu-id="cd56c-190">È altresì errato inserire all'esterno del blocco della funzione lambda un'istruzione jump se la destinazione è interna al blocco.</span><span class="sxs-lookup"><span data-stu-id="cd56c-190">It is also an error to have a jump statement outside the lambda function block if the target is inside the block.</span></span>

## <a name="see-also"></a><span data-ttu-id="cd56c-191">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="cd56c-191">See also</span></span> ##

<span data-ttu-id="cd56c-192">[LINQ (Language Integrated Query)](../standard/using-linq.md) </span><span class="sxs-lookup"><span data-stu-id="cd56c-192">[LINQ (Language-Integrated Query)](../standard/using-linq.md) </span></span>  
<span data-ttu-id="cd56c-193">[Metodi anonimi](programming-guide/statements-expressions-operators/anonymous-methods.md) </span><span class="sxs-lookup"><span data-stu-id="cd56c-193">[Anonymous methods](programming-guide/statements-expressions-operators/anonymous-methods.md) </span></span>  
[<span data-ttu-id="cd56c-194">Alberi delle espressioni</span><span class="sxs-lookup"><span data-stu-id="cd56c-194">Expression trees</span></span>](expression-trees.md)
