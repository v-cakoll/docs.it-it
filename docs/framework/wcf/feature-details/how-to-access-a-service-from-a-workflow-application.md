---
title: "Procedura: accesso a un servizio da un'applicazione flusso di lavoro"
ms.date: 03/30/2017
ms.assetid: 925ef8ea-5550-4c9d-bb7b-209e20c280ad
ms.openlocfilehash: 5bc18b446d4bf818c874839a421793a997ddc543
ms.sourcegitcommit: 76a304c79a32aa13889ebcf4b9789a4542b48e3e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/13/2018
ms.locfileid: "45513896"
---
# <a name="how-to-access-a-service-from-a-workflow-application"></a><span data-ttu-id="f418c-102">Procedura: accesso a un servizio da un'applicazione flusso di lavoro</span><span class="sxs-lookup"><span data-stu-id="f418c-102">How To: Access a Service From a Workflow Application</span></span>
<span data-ttu-id="f418c-103">In questo argomento viene descritto come chiamare un servizio flusso di lavoro da un'applicazione console del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="f418c-103">This topic describes how to call a workflow service from a workflow console application.</span></span> <span data-ttu-id="f418c-104">Dipende dal completamento dei [procedura: creare un servizio del flusso di lavoro con attività di messaggistica](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md) argomento.</span><span class="sxs-lookup"><span data-stu-id="f418c-104">It depends on completion of the [How to: Create a Workflow Service with Messaging Activities](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md) topic.</span></span> <span data-ttu-id="f418c-105">Sebbene in questo argomento viene descritto come chiamare un servizio del flusso di lavoro da un'applicazione flusso di lavoro, gli stessi metodi sono utilizzabile per chiamare qualsiasi servizio Windows Communication Foundation (WCF) da un'applicazione flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="f418c-105">Although this topic describes how to call a workflow service from a workflow application, the same methods can be used to call any Windows Communication Foundation (WCF) service from a workflow application.</span></span>

### <a name="create-a-workflow-console-application-project"></a><span data-ttu-id="f418c-106">Creare un progetto di applicazione console del flusso di lavoro</span><span class="sxs-lookup"><span data-stu-id="f418c-106">Create a Workflow Console Application Project</span></span>

1.  <span data-ttu-id="f418c-107">Avviare [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f418c-107">Start [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)].</span></span>

2.  <span data-ttu-id="f418c-108">Caricare il progetto MyWFService creato nel [procedura: creare un servizio del flusso di lavoro con attività di messaggistica](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md) argomento.</span><span class="sxs-lookup"><span data-stu-id="f418c-108">Load the MyWFService project you created in the [How to: Create a Workflow Service with Messaging Activities](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md) topic.</span></span>

3.  <span data-ttu-id="f418c-109">Fare clic il **MyWFService** soluzione nel **Esplora soluzioni** e selezionare **Add**, **nuovo progetto**.</span><span class="sxs-lookup"><span data-stu-id="f418c-109">Right click the **MyWFService** solution in the **Solution Explorer** and select **Add**, **New Project**.</span></span> <span data-ttu-id="f418c-110">Selezionare **flusso di lavoro** nel **modelli installati** e **applicazione Console flusso di lavoro** dall'elenco dei tipi di progetto.</span><span class="sxs-lookup"><span data-stu-id="f418c-110">Select **Workflow** in the **Installed Templates** and **Workflow Console Application** from the list of project types.</span></span> <span data-ttu-id="f418c-111">Assegnare al progetto il nome MyWFClient e utilizzare il percorso predefinito, come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="f418c-111">Name the project MyWFClient and use the default location as shown in the following illustration.</span></span>

     <span data-ttu-id="f418c-112">![Aggiungi finestra di dialogo Nuovo progetto](../../../../docs/framework/wcf/feature-details/media/addnewprojectdlg.JPG "AddNewProjectDlg")</span><span class="sxs-lookup"><span data-stu-id="f418c-112">![Add New Project Dialog](../../../../docs/framework/wcf/feature-details/media/addnewprojectdlg.JPG "AddNewProjectDlg")</span></span>

     <span data-ttu-id="f418c-113">Scegliere il **OK** per chiudere la **finestra Aggiungi nuovo progetto**.</span><span class="sxs-lookup"><span data-stu-id="f418c-113">Click the **OK** button to dismiss the **Add New Project Dialog**.</span></span>

4.  <span data-ttu-id="f418c-114">Una volta creato il progetto, nella finestra di progettazione verrà aperto il file Workflow1.xaml.</span><span class="sxs-lookup"><span data-stu-id="f418c-114">After the project is created, the Workflow1.xaml file is opened in the designer.</span></span> <span data-ttu-id="f418c-115">Scegliere il **casella degli strumenti** pressione di tab per aprire la casella degli strumenti se non è già aprire e fare clic sulla puntina da disegno per mantenere aperta la finestra Casella degli strumenti.</span><span class="sxs-lookup"><span data-stu-id="f418c-115">Click the **Toolbox** tab to open the toolbox if it is not already open and click the pushpin to keep the toolbox window open.</span></span>

5.  <span data-ttu-id="f418c-116">Premere **Ctrl**+**F5** per compilare e avviare il servizio.</span><span class="sxs-lookup"><span data-stu-id="f418c-116">Press **Ctrl**+**F5** to build and launch the service.</span></span> <span data-ttu-id="f418c-117">Come in precedenza, viene avviato il server di sviluppo ASP.NET e in Internet Explorer viene visualizzata la pagina della Guida relativa a WCF.</span><span class="sxs-lookup"><span data-stu-id="f418c-117">As before, the ASP.NET Development Server is launched and Internet Explorer displays the WCF Help Page.</span></span> <span data-ttu-id="f418c-118">Tenere presente l'URI di questa pagina, in quanto sarà necessario utilizzarlo nel passaggio successivo.</span><span class="sxs-lookup"><span data-stu-id="f418c-118">Notice the URI for this page as you must use it in the next step.</span></span>

     <span data-ttu-id="f418c-119">![Ad esempio la visualizzazione di pagina della Guida WCF e URI](../../../../docs/framework/wcf/feature-details/media/iewcfhelppagewuri.JPG "IEWCFHelpPageWURI")</span><span class="sxs-lookup"><span data-stu-id="f418c-119">![IE displaying WCF Help Page and URI](../../../../docs/framework/wcf/feature-details/media/iewcfhelppagewuri.JPG "IEWCFHelpPageWURI")</span></span>

6.  <span data-ttu-id="f418c-120">Fare clic il **MyWFClient** del progetto nel **Esplora soluzioni** e selezionare **Add** > **riferimento al servizio**.</span><span class="sxs-lookup"><span data-stu-id="f418c-120">Right click the **MyWFClient** project in the **Solution Explorer** and select **Add** > **Service Reference**.</span></span> <span data-ttu-id="f418c-121">Scegliere il **Discover** pulsante per la soluzione corrente per tutti i servizi di ricerca.</span><span class="sxs-lookup"><span data-stu-id="f418c-121">Click the **Discover** button to search the current solution for any services.</span></span> <span data-ttu-id="f418c-122">Fare clic sul triangolo accanto a Service1.xamlx nell'elenco dei servizi.</span><span class="sxs-lookup"><span data-stu-id="f418c-122">Click the triangle next to Service1.xamlx in the Services list.</span></span> <span data-ttu-id="f418c-123">Fare clic sul triangolo accanto a Service1 per elencare i contratti implementati dal servizio Service1.</span><span class="sxs-lookup"><span data-stu-id="f418c-123">Click the triangle next to Service1 to list the contracts implemented by the Service1 service.</span></span> <span data-ttu-id="f418c-124">Espandere la **Service1** nodo il **Services** elenco.</span><span class="sxs-lookup"><span data-stu-id="f418c-124">Expand the **Service1** node in the **Services** list.</span></span> <span data-ttu-id="f418c-125">L'operazione Echo viene visualizzato nei **operazioni** elenco come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="f418c-125">The Echo operation is displayed in the **Operations** list as shown in the following illustration.</span></span>

     <span data-ttu-id="f418c-126">![Aggiungi finestra di dialogo riferimento al servizio](../../../../docs/framework/wcf/feature-details/media/addservicereference.JPG "AddServiceReference")</span><span class="sxs-lookup"><span data-stu-id="f418c-126">![Add Service Reference Dialog](../../../../docs/framework/wcf/feature-details/media/addservicereference.JPG "AddServiceReference")</span></span>

     <span data-ttu-id="f418c-127">Mantenere lo spazio dei nomi predefinito e fare clic su **OK** per chiudere la **Aggiungi riferimento al servizio** finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="f418c-127">Keep the default namespace and click **OK** to dismiss the **Add Service Reference** dialog.</span></span> <span data-ttu-id="f418c-128">Verrà visualizzata la finestra di dialogo indicata di seguito.</span><span class="sxs-lookup"><span data-stu-id="f418c-128">The following dialog is displayed.</span></span>

     <span data-ttu-id="f418c-129">![La finestra di notifica Aggiungi riferimento servizio](../../../../docs/framework/wcf/feature-details/media/asrdlg.JPG "ASRDlg")</span><span class="sxs-lookup"><span data-stu-id="f418c-129">![The add service reference notification dialog](../../../../docs/framework/wcf/feature-details/media/asrdlg.JPG "ASRDlg")</span></span>

     <span data-ttu-id="f418c-130">Fare clic su **OK** per chiudere la finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="f418c-130">Click **OK** to dismiss the dialog.</span></span> <span data-ttu-id="f418c-131">Premere quindi CTRL+MAIUSC+B per compilare la soluzione.</span><span class="sxs-lookup"><span data-stu-id="f418c-131">Next, press CTRL+SHIFT+B to build the solution.</span></span> <span data-ttu-id="f418c-132">Si noti che nella casella degli strumenti è stata aggiunta una nuova sezione denominata **MyWFClient.ServiceReference1.Activities**.</span><span class="sxs-lookup"><span data-stu-id="f418c-132">Notice in the toolbox a new section has been added called **MyWFClient.ServiceReference1.Activities**.</span></span> <span data-ttu-id="f418c-133">Espandere questa sezione e notare l'attività Eco aggiunta, come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="f418c-133">Expand this section and notice the Echo activity that has been added as shown in the following illustration.</span></span>

     <span data-ttu-id="f418c-134">![Nella casella degli strumenti attività Echo](../../../../docs/framework/wcf/feature-details/media/echoactivity.JPG "EchoActivity")</span><span class="sxs-lookup"><span data-stu-id="f418c-134">![Echo activity in toolbox](../../../../docs/framework/wcf/feature-details/media/echoactivity.JPG "EchoActivity")</span></span>

7.  <span data-ttu-id="f418c-135">Trascinare e rilasciare un <!--zz <xref:System.ServiceModel.Activities.Sequence>--> `System.ServiceModel.Activities.Sequence` attività nell'area di progettazione.</span><span class="sxs-lookup"><span data-stu-id="f418c-135">Drag and drop a <!--zz <xref:System.ServiceModel.Activities.Sequence>--> `System.ServiceModel.Activities.Sequence` activity onto the designer surface.</span></span> <span data-ttu-id="f418c-136">È sotto la **flusso di controllo** sezione della casella degli strumenti.</span><span class="sxs-lookup"><span data-stu-id="f418c-136">It is under the **Control Flow** section of the toolbox.</span></span>

8.  <span data-ttu-id="f418c-137">Con il <!--zz <xref:System.ServiceModel.Activities.Sequence>--> `System.ServiceModel.Activities.Sequence` attività in stato attivo, fare clic sui **variabili** collegamento e aggiungere una variabile stringa denominata `inString`.</span><span class="sxs-lookup"><span data-stu-id="f418c-137">With the <!--zz <xref:System.ServiceModel.Activities.Sequence>--> `System.ServiceModel.Activities.Sequence` activity in focus, click the **Variables** link and add a string variable named `inString`.</span></span> <span data-ttu-id="f418c-138">Assegnare alla variabile un valore predefinito pari `"Hello, world"` oltre a una variabile stringa denominata `outString` come illustrato nel diagramma seguente.</span><span class="sxs-lookup"><span data-stu-id="f418c-138">Give the variable a default value of `"Hello, world"` as well as a string variable named `outString` as shown in the following diagram.</span></span>

     <span data-ttu-id="f418c-139">![Aggiunta di una variabile](../../../../docs/framework/wcf/feature-details/media/instringvar.JPG "inStringVar")</span><span class="sxs-lookup"><span data-stu-id="f418c-139">![Adding a variable](../../../../docs/framework/wcf/feature-details/media/instringvar.JPG "inStringVar")</span></span>

9. <span data-ttu-id="f418c-140">Trascinare e rilasciare un' **Echo** attività le <!--zz <xref:System.ServiceModel.Activities.Sequence>--> `System.ServiceModel.Activities.Sequence`.</span><span class="sxs-lookup"><span data-stu-id="f418c-140">Drag and drop an **Echo** activity into the <!--zz <xref:System.ServiceModel.Activities.Sequence>--> `System.ServiceModel.Activities.Sequence`.</span></span> <span data-ttu-id="f418c-141">Nella finestra Proprietà associare il `inMsg` argomento per il `inString` variabile e il `outMsg` argomento per il `outString` variabile, come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="f418c-141">In the properties window bind the `inMsg` argument to the `inString` variable and the `outMsg` argument to the `outString` variable as shown in the following illustration.</span></span> <span data-ttu-id="f418c-142">Viene passato il valore della variabile `inString` all'operazione e quindi il valore restituito si inserisce nella variabile `outString`.</span><span class="sxs-lookup"><span data-stu-id="f418c-142">This passes in the value of the `inString` variable to the operation and then takes the return value and places it in the `outString` variable.</span></span>

     <span data-ttu-id="f418c-143">![Associazione degli argomenti alle variabili](../../../../docs/framework/wcf/feature-details/media/argumentbind.JPG "ArgumentBind")</span><span class="sxs-lookup"><span data-stu-id="f418c-143">![Binding the arguments to variables](../../../../docs/framework/wcf/feature-details/media/argumentbind.JPG "ArgumentBind")</span></span>

10. <span data-ttu-id="f418c-144">Trascinare e rilasciare un **WriteLine** attività sotto il **Echo** attività per visualizzare la stringa restituita dalla chiamata del servizio.</span><span class="sxs-lookup"><span data-stu-id="f418c-144">Drag and drop a **WriteLine** activity below the **Echo** activity to display the string returned by the service call.</span></span> <span data-ttu-id="f418c-145">Il **WriteLine** attività si trova nel **primitive** nodo nella casella degli strumenti.</span><span class="sxs-lookup"><span data-stu-id="f418c-145">The **WriteLine** activity is located in the **Primitives** node in the toolbox.</span></span> <span data-ttu-id="f418c-146">Associare il **testo** argomento delle **WriteLine** attività per il `outString` variabile digitando `outString` nella casella di testo il **WriteLine** attività.</span><span class="sxs-lookup"><span data-stu-id="f418c-146">Bind the **Text** argument of the **WriteLine** activity to the `outString` variable by typing `outString` into the text box on the **WriteLine** activity.</span></span> <span data-ttu-id="f418c-147">Il flusso di lavoro viene ora visualizzato come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="f418c-147">The workflow should now look like the following illustration.</span></span>

     <span data-ttu-id="f418c-148">![Flusso di lavoro client completato](../../../../docs/framework/wcf/feature-details/media/completeclientwf.JPG "CompleteClientWF")</span><span class="sxs-lookup"><span data-stu-id="f418c-148">![The complete client workflow](../../../../docs/framework/wcf/feature-details/media/completeclientwf.JPG "CompleteClientWF")</span></span>

11. <span data-ttu-id="f418c-149">Pulsante destro del mouse sulla soluzione MyWFService e scegliere **Imposta progetti di avvio...** . Selezionare il **progetti di avvio multipli** pulsante di opzione e selezionare **avviare** per ogni progetto nella **azione** colonna come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="f418c-149">Right-click the MyWFService solution and select **Set Startup Projects ...**. Select the **Multiple startup projects** radio button and select **Start** for each project in the **Action** column as shown in the following illustration.</span></span>

     <span data-ttu-id="f418c-150">![Le opzioni dei progetti di avvio](../../../../docs/framework/wcf/feature-details/media/startupprojects.JPG "progetti di avvio")</span><span class="sxs-lookup"><span data-stu-id="f418c-150">![Startup projects options](../../../../docs/framework/wcf/feature-details/media/startupprojects.JPG "StartupProjects")</span></span>

12. <span data-ttu-id="f418c-151">Premere CTRL+F5 per avviare il servizio e il client.</span><span class="sxs-lookup"><span data-stu-id="f418c-151">Press Ctrl + F5 to launch both the service and the client.</span></span> <span data-ttu-id="f418c-152">Il Server di sviluppo ASP.NET ospita il servizio, Internet Explorer viene visualizzata la pagina della Guida WCF e l'applicazione workflow client viene avviato in una finestra della console e Visualizza la stringa restituita dal servizio ("Hello, world").</span><span class="sxs-lookup"><span data-stu-id="f418c-152">The ASP.NET Development Server hosts the service, Internet Explorer displays the WCF help page, and the client workflow application is launched in a console window and displays the string returned from the service ("Hello, world").</span></span>

## <a name="see-also"></a><span data-ttu-id="f418c-153">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="f418c-153">See Also</span></span>

- [<span data-ttu-id="f418c-154">Servizi flusso di lavoro</span><span class="sxs-lookup"><span data-stu-id="f418c-154">Workflow Services</span></span>](../../../../docs/framework/wcf/feature-details/workflow-services.md)
- [<span data-ttu-id="f418c-155">Procedura: Creare un servizio flusso di lavoro con attività di messaggistica</span><span class="sxs-lookup"><span data-stu-id="f418c-155">How to: Create a Workflow Service with Messaging Activities</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md)
- [<span data-ttu-id="f418c-156">Utilizzo di un servizio WCF da un flusso di lavoro in un progetto Web</span><span class="sxs-lookup"><span data-stu-id="f418c-156">Consuming a WCF Service from a Workflow in a Web Project</span></span>](https://go.microsoft.com/fwlink/?LinkId=207725)