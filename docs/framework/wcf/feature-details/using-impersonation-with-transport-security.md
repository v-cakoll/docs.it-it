---
title: Utilizzo della rappresentazione con la protezione del trasporto
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 426df8cb-6337-4262-b2c0-b96c2edf21a9
caps.latest.revision: "12"
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.workload: dotnet
ms.openlocfilehash: 57b40493d0e9bcbbaaf1366c74ff116343f6ee96
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/22/2017
---
# <a name="using-impersonation-with-transport-security"></a><span data-ttu-id="f9c30-102">Utilizzo della rappresentazione con la protezione del trasporto</span><span class="sxs-lookup"><span data-stu-id="f9c30-102">Using Impersonation with Transport Security</span></span>
<span data-ttu-id="f9c30-103">*Rappresentazione* è la possibilità di un'applicazione server di assumere l'identità del client.</span><span class="sxs-lookup"><span data-stu-id="f9c30-103">*Impersonation* is the ability of a server application to take on the identity of the client.</span></span> <span data-ttu-id="f9c30-104">In genere i servizi utilizzano la rappresentazione al momento della convalida dell'accesso alle risorse.</span><span class="sxs-lookup"><span data-stu-id="f9c30-104">It is common for services to use impersonation when validating access to resources.</span></span> <span data-ttu-id="f9c30-105">L'applicazione server è in esecuzione tramite un account del servizio ma quando il server accetta una connessione client, rappresenta il client. In questo modo i controlli di accesso vengono eseguiti utilizzando le credenziali client.</span><span class="sxs-lookup"><span data-stu-id="f9c30-105">The server application runs using a service account, but when the server accepts a client connection, it impersonates the client so that access checks are performed using the client's credentials.</span></span> <span data-ttu-id="f9c30-106">La protezione del trasporto è un meccanismo utilizzato sia per il passaggio delle credenziali che per la protezione della comunicazione tramite quelle credenziali.</span><span class="sxs-lookup"><span data-stu-id="f9c30-106">Transport security is a mechanism both for passing credentials and securing communication using those credentials.</span></span> <span data-ttu-id="f9c30-107">In questo argomento viene illustrato l'utilizzo della sicurezza del trasporto in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] con la funzionalità della rappresentazione.</span><span class="sxs-lookup"><span data-stu-id="f9c30-107">This topic describes using transport security in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] with the impersonation feature.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="f9c30-108">rappresentazione con la sicurezza dei messaggi, vedere [delega e rappresentazione](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="f9c30-108"> impersonation using message security, see [Delegation and Impersonation](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span></span>  
  
## <a name="five-impersonation-levels"></a><span data-ttu-id="f9c30-109">Cinque livelli di rappresentazione</span><span class="sxs-lookup"><span data-stu-id="f9c30-109">Five Impersonation Levels</span></span>  
 <span data-ttu-id="f9c30-110">La protezione del trasporto si avvale di cinque livelli di rappresentazione, come descritto nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="f9c30-110">Transport security makes use of five levels of impersonation, as described in the following table.</span></span>  
  
|<span data-ttu-id="f9c30-111">Livello di rappresentazione</span><span class="sxs-lookup"><span data-stu-id="f9c30-111">Impersonation level</span></span>|<span data-ttu-id="f9c30-112">Descrizione</span><span class="sxs-lookup"><span data-stu-id="f9c30-112">Description</span></span>|  
|-------------------------|-----------------|  
|<span data-ttu-id="f9c30-113">nessuno</span><span class="sxs-lookup"><span data-stu-id="f9c30-113">None</span></span>|<span data-ttu-id="f9c30-114">L'applicazione server non tenta di rappresentare il client.</span><span class="sxs-lookup"><span data-stu-id="f9c30-114">The server application does not attempt to impersonate the client.</span></span>|  
|<span data-ttu-id="f9c30-115">Anonymous</span><span class="sxs-lookup"><span data-stu-id="f9c30-115">Anonymous</span></span>|<span data-ttu-id="f9c30-116">L'applicazione server è in grado di eseguire controlli di accesso a fronte delle credenziali client, ma non riceve alcuna informazione sull'identità del client.</span><span class="sxs-lookup"><span data-stu-id="f9c30-116">The server application can perform access checks against the client's credentials, but does not receive any information about the client's identity.</span></span> <span data-ttu-id="f9c30-117">Questo livello di rappresentazione è significativo solo per comunicazioni su computer, ad esempio le named pipe.</span><span class="sxs-lookup"><span data-stu-id="f9c30-117">This impersonation level is meaningful only for on-machine communication, such as named pipes.</span></span> <span data-ttu-id="f9c30-118">L'utilizzo di `Anonymous` con una connessione remota innalza il livello di rappresentazione a Identify.</span><span class="sxs-lookup"><span data-stu-id="f9c30-118">Using `Anonymous` with a remote connection promotes the impersonation level to Identify.</span></span>|  
|<span data-ttu-id="f9c30-119">Identify</span><span class="sxs-lookup"><span data-stu-id="f9c30-119">Identify</span></span>|<span data-ttu-id="f9c30-120">L'applicazione conosce l'identità del client ed è in grado di eseguire la convalida dell'accesso a fronte delle credenziali client, ma non è in grado di rappresentare il client.</span><span class="sxs-lookup"><span data-stu-id="f9c30-120">The server application knows the client's identity and can perform access validation against the client's credentials, but cannot impersonate the client.</span></span> <span data-ttu-id="f9c30-121">Identify è il livello di rappresentazione predefinito utilizzato con le credenziali SSPI in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], a meno che il provider di token non fornisca un livello di rappresentazione diverso.</span><span class="sxs-lookup"><span data-stu-id="f9c30-121">Identify is the default impersonation level used with SSPI credentials in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] unless the token provider provides a different impersonation level.</span></span>|  
|<span data-ttu-id="f9c30-122">Impersonate</span><span class="sxs-lookup"><span data-stu-id="f9c30-122">Impersonate</span></span>|<span data-ttu-id="f9c30-123">Oltre a eseguire controlli di accesso, l'applicazione server è in grado di accedere alle risorse nel server come client.</span><span class="sxs-lookup"><span data-stu-id="f9c30-123">The server application can access resources on the server machine as the client in addition to performing access checks.</span></span> <span data-ttu-id="f9c30-124">L'applicazione server non è in grado di accedere alle risorse su computer remoti tramite l'identità del client poiché il token rappresentato non dispone di credenziali di rete.</span><span class="sxs-lookup"><span data-stu-id="f9c30-124">The server application cannot access resources on remote machines using the client's identity because the impersonated token does not have network credentials</span></span>|  
|<span data-ttu-id="f9c30-125">delegato</span><span class="sxs-lookup"><span data-stu-id="f9c30-125">Delegate</span></span>|<span data-ttu-id="f9c30-126">Oltre ad avere le stesse funzionalità di `Impersonate`, il livello di rappresentazione Delegate consente all'applicazione server l'accesso a risorse in computer remoti utilizzando l'identità del client e il passaggio dell'identità ad altre applicazioni.</span><span class="sxs-lookup"><span data-stu-id="f9c30-126">In addition to having the same capabilities as `Impersonate`, the Delegate impersonation level also enables the server application to access resources on remote machines using the client's identity and to pass the identity to other applications.</span></span><br /><br /> <span data-ttu-id="f9c30-127">**Importante** l'account di dominio server deve essere contrassegnato come attendibile per la delega nel controller di dominio per utilizzare queste funzionalità aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="f9c30-127">**Important** The server domain account must be marked as trusted for delegation on the domain controller to use these additional features.</span></span> <span data-ttu-id="f9c30-128">È impossibile utilizzare questo livello di rappresentazione con account di dominio client contrassegnati come riservati.</span><span class="sxs-lookup"><span data-stu-id="f9c30-128">This level of impersonation cannot be used with client domain accounts marked as sensitive.</span></span>|  
  
 <span data-ttu-id="f9c30-129">I livelli utilizzati più comunemente con la sicurezza del trasporto sono `Identify` e `Impersonate`.</span><span class="sxs-lookup"><span data-stu-id="f9c30-129">The levels most commonly used with transport security are `Identify` and `Impersonate`.</span></span> <span data-ttu-id="f9c30-130">I livelli `None` e `Anonymous` non sono consigliati per un utilizzo tipico. Molti trasporti inoltre non supportano l'utilizzo di tali livelli con l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="f9c30-130">The levels `None` and `Anonymous` are not recommended for typical use, and many transports do not support using those levels with authentication.</span></span> <span data-ttu-id="f9c30-131">Il livello `Delegate` è una funzionalità potente che deve essere utilizzata con cautela.</span><span class="sxs-lookup"><span data-stu-id="f9c30-131">The `Delegate` level is a powerful feature that should be used with care.</span></span> <span data-ttu-id="f9c30-132">Solo ad applicazioni server attendibili deve essere fornita l'autorizzazione per delegare credenziali.</span><span class="sxs-lookup"><span data-stu-id="f9c30-132">Only trusted server applications should be given the permission to delegate credentials.</span></span>  
  
 <span data-ttu-id="f9c30-133">L'utilizzo della rappresentazione ai livelli `Impersonate` o `Delegate` richiede che l'applicazione server disponga del privilegio `SeImpersonatePrivilege`.</span><span class="sxs-lookup"><span data-stu-id="f9c30-133">Using impersonation at the `Impersonate` or `Delegate` levels requires the server application to have the `SeImpersonatePrivilege` privilege.</span></span> <span data-ttu-id="f9c30-134">Un'applicazione dispone di questo privilegio per impostazione predefinita se è in esecuzione in un account nel gruppo Administrators o in un account con un SID del servizio (Servizio di rete, Servizio locale o Sistema locale).</span><span class="sxs-lookup"><span data-stu-id="f9c30-134">An application has this privilege by default if it is running on an account in the Administrators group or on an account with a Service SID (Network Service, Local Service, or Local System).</span></span> <span data-ttu-id="f9c30-135">La rappresentazione non richiede autenticazione reciproca tra client e server.</span><span class="sxs-lookup"><span data-stu-id="f9c30-135">Impersonation does not require mutual authentication of the client and server.</span></span> <span data-ttu-id="f9c30-136">È impossibile utilizzare alcuni schemi di autenticazione che supportano la rappresentazione, ad esempio NTLM, con l'autenticazione reciproca.</span><span class="sxs-lookup"><span data-stu-id="f9c30-136">Some authentication schemes that support impersonation, such as NTLM, cannot be used with mutual authentication.</span></span>  
  
## <a name="transport-specific-issues-with-impersonation"></a><span data-ttu-id="f9c30-137">Problemi specifici del trasporto con la rappresentazione</span><span class="sxs-lookup"><span data-stu-id="f9c30-137">Transport-Specific Issues with Impersonation</span></span>  
 <span data-ttu-id="f9c30-138">La scelta di un trasporto in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] influisce sulle possibili scelte per la rappresentazione.</span><span class="sxs-lookup"><span data-stu-id="f9c30-138">The choice of a transport in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] affects the possible choices for impersonation.</span></span> <span data-ttu-id="f9c30-139">Contenuto della sezione vengono descritti i problemi che influiscono sui trasporti standard HTTP e sui trasporti delle named pipe in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f9c30-139">This section describes issues affecting the standard HTTP and named pipe transports in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span> <span data-ttu-id="f9c30-140">I trasporti personalizzati presentano restrizioni relative al supporto per la rappresentazione.</span><span class="sxs-lookup"><span data-stu-id="f9c30-140">Custom transports have their own restrictions on support for impersonation.</span></span>  
  
### <a name="named-pipe-transport"></a><span data-ttu-id="f9c30-141">Trasporto di named pipe</span><span class="sxs-lookup"><span data-stu-id="f9c30-141">Named Pipe Transport</span></span>  
 <span data-ttu-id="f9c30-142">Gli elementi seguenti vengono utilizzati con il trasporto di named pipe:</span><span class="sxs-lookup"><span data-stu-id="f9c30-142">The following items are used with the named pipe transport:</span></span>  
  
-   <span data-ttu-id="f9c30-143">Il trasporto di named pipe è concepito per l'utilizzo solo nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="f9c30-143">The named pipe transport is intended for use only on the local machine.</span></span> <span data-ttu-id="f9c30-144">Il trasporto di named pipe in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] impedisce in modo esplicito le connessioni tra computer.</span><span class="sxs-lookup"><span data-stu-id="f9c30-144">The named pipe transport in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] explicitly disallows cross-machine connections.</span></span>  
  
-   <span data-ttu-id="f9c30-145">Non è possibile utilizzare le named pipe con livelli di rappresentazione `Impersonate` o `Delegate`.</span><span class="sxs-lookup"><span data-stu-id="f9c30-145">Named pipes cannot be used with the `Impersonate` or `Delegate` impersonation level.</span></span> <span data-ttu-id="f9c30-146">La named pipe non è in grado di imporre la garanzia su computer con questi livelli di rappresentazione.</span><span class="sxs-lookup"><span data-stu-id="f9c30-146">The named pipe cannot enforce the on-machine guarantee at these impersonation levels.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="f9c30-147">named pipe, vedere [scelta di un trasporto](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span><span class="sxs-lookup"><span data-stu-id="f9c30-147"> named pipes, see [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span></span>  
  
### <a name="http-transport"></a><span data-ttu-id="f9c30-148">Trasporto HTTP</span><span class="sxs-lookup"><span data-stu-id="f9c30-148">HTTP Transport</span></span>  
 <span data-ttu-id="f9c30-149">Le associazioni che utilizzano il trasporto HTTP (<xref:System.ServiceModel.WSHttpBinding> e <xref:System.ServiceModel.BasicHttpBinding>) supportano diversi schemi di autenticazione, come illustrato in [informazioni sull'autenticazione HTTP](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="f9c30-149">The bindings that use the HTTP transport (<xref:System.ServiceModel.WSHttpBinding> and <xref:System.ServiceModel.BasicHttpBinding>) support several authentication schemes, as explained in [Understanding HTTP Authentication](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md).</span></span> <span data-ttu-id="f9c30-150">Il livello di rappresentazione supportato dipende dallo schema di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="f9c30-150">The impersonation level supported depends on the authentication scheme.</span></span> <span data-ttu-id="f9c30-151">Gli elementi seguenti vengono utilizzati con il trasporto HTTP:</span><span class="sxs-lookup"><span data-stu-id="f9c30-151">The following items are used with the HTTP transport:</span></span>  
  
-   <span data-ttu-id="f9c30-152">Lo schema di autenticazione `Anonymous` ignora la rappresentazione.</span><span class="sxs-lookup"><span data-stu-id="f9c30-152">The `Anonymous` authentication scheme ignores impersonation.</span></span>  
  
-   <span data-ttu-id="f9c30-153">Il `Basic` schema di autenticazione supporta solo il `Delegate` livello.</span><span class="sxs-lookup"><span data-stu-id="f9c30-153">The `Basic` authentication scheme supports only the `Delegate` level.</span></span> <span data-ttu-id="f9c30-154">Tutti i livelli di rappresentazione inferiori vengono aggiornati.</span><span class="sxs-lookup"><span data-stu-id="f9c30-154">All lower impersonation levels are upgraded.</span></span>  
  
-   <span data-ttu-id="f9c30-155">Lo schema di autenticazione `Digest` supporta solo i livelli `Impersonate` e `Delegate`.</span><span class="sxs-lookup"><span data-stu-id="f9c30-155">The `Digest` authentication scheme supports only the `Impersonate` and `Delegate` levels.</span></span>  
  
-   <span data-ttu-id="f9c30-156">Lo schema di autenticazione `NTLM`, selezionabile direttamente o tramite negoziazione, supporta solo il livello `Delegate` nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="f9c30-156">The `NTLM` authentication scheme, selectable either directly or through negotiation, supports only the `Delegate` level on the local machine.</span></span>  
  
-   <span data-ttu-id="f9c30-157">Lo schema di autenticazione Kerberos, selezionabile solo tramite negoziazione, può essere utilizzato con qualsiasi livello di rappresentazione supportato.</span><span class="sxs-lookup"><span data-stu-id="f9c30-157">The Kerberos authentication scheme, which can only be selected through negotiation, can be used with any supported impersonation level.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="f9c30-158">il trasporto HTTP, vedere [scelta di un trasporto](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span><span class="sxs-lookup"><span data-stu-id="f9c30-158"> the HTTP transport, see [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f9c30-159">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="f9c30-159">See Also</span></span>  
 [<span data-ttu-id="f9c30-160">Delega e rappresentazione</span><span class="sxs-lookup"><span data-stu-id="f9c30-160">Delegation and Impersonation</span></span>](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md)  
 [<span data-ttu-id="f9c30-161">Autorizzazione</span><span class="sxs-lookup"><span data-stu-id="f9c30-161">Authorization</span></span>](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md)  
 [<span data-ttu-id="f9c30-162">Procedura: Rappresentare un client in un servizio</span><span class="sxs-lookup"><span data-stu-id="f9c30-162">How to: Impersonate a Client on a Service</span></span>](../../../../docs/framework/wcf/how-to-impersonate-a-client-on-a-service.md)  
 [<span data-ttu-id="f9c30-163">Informazioni sull'autenticazione HTTP</span><span class="sxs-lookup"><span data-stu-id="f9c30-163">Understanding HTTP Authentication</span></span>](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md)
