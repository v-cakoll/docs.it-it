---
title: Tipi di enumerazioni nei contratti dati
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: data contracts [WCF], enumeration types
ms.assetid: b5d694da-68cb-4b74-a5fb-75108a68ec3b
caps.latest.revision: "13"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 13b3d19c8e71d7bd6a37362b1ac1b5e23e8ff24a
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/02/2017
---
# <a name="enumeration-types-in-data-contracts"></a><span data-ttu-id="4aa74-102">Tipi di enumerazioni nei contratti dati</span><span class="sxs-lookup"><span data-stu-id="4aa74-102">Enumeration Types in Data Contracts</span></span>
<span data-ttu-id="4aa74-103">Le enumerazioni possono essere espresse nel modello del contratto dati.</span><span class="sxs-lookup"><span data-stu-id="4aa74-103">Enumerations can be expressed in the data contract model.</span></span> <span data-ttu-id="4aa74-104">In questo argomento vengono esaminati molti esempi che spiegano il modello di programmazione.</span><span class="sxs-lookup"><span data-stu-id="4aa74-104">This topic walks through several examples that explain the programming model.</span></span>  
  
## <a name="enumeration-basics"></a><span data-ttu-id="4aa74-105">Nozioni fondamentali sull'enumerazione</span><span class="sxs-lookup"><span data-stu-id="4aa74-105">Enumeration Basics</span></span>  
 <span data-ttu-id="4aa74-106">Per usare i tipi di enumerazione nel modello del contratto dati, applicare l'attributo <xref:System.Runtime.Serialization.DataContractAttribute> al tipo.</span><span class="sxs-lookup"><span data-stu-id="4aa74-106">One way to use enumeration types in the data contract model is to apply the <xref:System.Runtime.Serialization.DataContractAttribute> attribute to the type.</span></span> <span data-ttu-id="4aa74-107">Applicare quindi l'attributo <xref:System.Runtime.Serialization.EnumMemberAttribute> a ogni membro che deve essere incluso nel contratto dati.</span><span class="sxs-lookup"><span data-stu-id="4aa74-107">You must then apply the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute to each member that must be included in the data contract.</span></span>  
  
 <span data-ttu-id="4aa74-108">Nell'esempio che segue vengono illustrate due classi.</span><span class="sxs-lookup"><span data-stu-id="4aa74-108">The following example shows two classes.</span></span> <span data-ttu-id="4aa74-109">La prima usa l'enumerazione e la seconda definisce l'enumerazione.</span><span class="sxs-lookup"><span data-stu-id="4aa74-109">The first uses the enumeration and the second defines the enumeration.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#1)]
 [!code-vb[c_DataContractEnumerations#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#1)]  
  
 <span data-ttu-id="4aa74-110">Un'istanza della classe `Car` può essere inviata o ricevuta solo se il campo `condition` è impostato su uno dei valori `New`, `Used` o `Rental`.</span><span class="sxs-lookup"><span data-stu-id="4aa74-110">An instance of the `Car` class can be sent or received only if the `condition` field is set to one of the values `New`, `Used`, or `Rental`.</span></span> <span data-ttu-id="4aa74-111">Se `condition` è `Broken` o `Stolen`, viene generata un'eccezione <xref:System.Runtime.Serialization.SerializationException>.</span><span class="sxs-lookup"><span data-stu-id="4aa74-111">If the `condition` is `Broken` or `Stolen`, a <xref:System.Runtime.Serialization.SerializationException> is thrown.</span></span>  
  
 <span data-ttu-id="4aa74-112">È possibile usare come al solito le proprietà <xref:System.Runtime.Serialization.DataContractAttribute> (<xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> e <xref:System.Runtime.Serialization.DataContractAttribute.Namespace%2A>) per i contratti dati dell'enumerazione.</span><span class="sxs-lookup"><span data-stu-id="4aa74-112">You can use the <xref:System.Runtime.Serialization.DataContractAttribute> properties (<xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> and <xref:System.Runtime.Serialization.DataContractAttribute.Namespace%2A>) as usual for enumeration data contracts.</span></span>  
  
### <a name="enumeration-member-values"></a><span data-ttu-id="4aa74-113">Valori membro dell'enumerazione</span><span class="sxs-lookup"><span data-stu-id="4aa74-113">Enumeration Member Values</span></span>  
 <span data-ttu-id="4aa74-114">In genere il contratto dati include i nomi dei membri dell'enumerazione, non i valori numerici.</span><span class="sxs-lookup"><span data-stu-id="4aa74-114">Generally the data contract includes enumeration member names, not numerical values.</span></span> <span data-ttu-id="4aa74-115">Tuttavia, quando si usa il modello del contratto dati, se il lato ricevente è un client [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], lo schema esportato mantiene i valori numerici.</span><span class="sxs-lookup"><span data-stu-id="4aa74-115">However, when using the data contract model, if the receiving side is a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client, the exported schema preserves the numerical values.</span></span> <span data-ttu-id="4aa74-116">Si noti che questo non è il caso quando si utilizza il [utilizzando la classe XmlSerializer](../../../../docs/framework/wcf/feature-details/using-the-xmlserializer-class.md).</span><span class="sxs-lookup"><span data-stu-id="4aa74-116">Note that this is not the case when using the [Using the XmlSerializer Class](../../../../docs/framework/wcf/feature-details/using-the-xmlserializer-class.md).</span></span>  
  
 <span data-ttu-id="4aa74-117">Nell'esempio precedente, se `condition` è impostato su `Used` e i dati vengono serializzati in XML, il codice XML risultante è `<condition>Used</condition>``<condition>1</condition>` e non .</span><span class="sxs-lookup"><span data-stu-id="4aa74-117">In the preceding example, if `condition` is set to `Used` and the data is serialized to XML, the resulting XML is `<condition>Used</condition>` and not `<condition>1</condition>`.</span></span> <span data-ttu-id="4aa74-118">Di conseguenza, il contratto dati seguente è equivalente al contratto dati di `CarConditionEnum`.</span><span class="sxs-lookup"><span data-stu-id="4aa74-118">Therefore, the following data contract is equivalent to the data contract of `CarConditionEnum`.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#2)]
 [!code-vb[c_DataContractEnumerations#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#2)]  
  
 <span data-ttu-id="4aa74-119">Ad esempio, è possibile usare `CarConditionEnum` sul lato mittente e `CarConditionWithNumbers` sul lato ricevente.</span><span class="sxs-lookup"><span data-stu-id="4aa74-119">For example, you can use `CarConditionEnum` on the sending side and `CarConditionWithNumbers` on the receiving side.</span></span> <span data-ttu-id="4aa74-120">Sebbene il lato mittente usi il valore "1" per `Used` e il lato ricevente usi il valore "20", la rappresentazione XML è `<condition>Used</condition>` per entrambi i lati.</span><span class="sxs-lookup"><span data-stu-id="4aa74-120">Although the sending side uses the value "1" for `Used` and the receiving side uses the value "20," the XML representation is `<condition>Used</condition>` for both sides.</span></span>  
  
 <span data-ttu-id="4aa74-121">Per essere incluso nel contratto dati, è necessario applicare l'attributo <xref:System.Runtime.Serialization.EnumMemberAttribute>.</span><span class="sxs-lookup"><span data-stu-id="4aa74-121">To be included in the data contract, you must apply the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute.</span></span> <span data-ttu-id="4aa74-122">In [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)], è sempre possibile applicare il valore speciale 0 (zero) a un'enumerazione che è anche il valore predefinito per qualsiasi enumerazione.</span><span class="sxs-lookup"><span data-stu-id="4aa74-122">In the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)], you can always apply the special value 0 (zero) to an enumeration, which is also the default value for any enumeration.</span></span> <span data-ttu-id="4aa74-123">Tuttavia, anche il valore speciale zero non può essere serializzato a meno che sia contrassegnato con l'attributo <xref:System.Runtime.Serialization.EnumMemberAttribute>.</span><span class="sxs-lookup"><span data-stu-id="4aa74-123">However, even this special zero value cannot be serialized unless it is marked with the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute.</span></span>  
  
 <span data-ttu-id="4aa74-124">Esistono due eccezioni a questo contesto:</span><span class="sxs-lookup"><span data-stu-id="4aa74-124">There are two exceptions to this:</span></span>  
  
-   <span data-ttu-id="4aa74-125">Enumerazioni di flag (esaminate più avanti in questo argomento).</span><span class="sxs-lookup"><span data-stu-id="4aa74-125">Flag enumerations (discussed later in this topic).</span></span>  
  
-   <span data-ttu-id="4aa74-126">Membri dati dell'enumerazione con la proprietà <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> impostata su `false` (in tal caso l'enumerazione con valore zero viene omessa dai dati serializzati).</span><span class="sxs-lookup"><span data-stu-id="4aa74-126">Enumeration data members with the <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> property set to `false` (in which case, the enumeration with the value zero is omitted from the serialized data).</span></span>  
  
### <a name="customizing-enumeration-member-values"></a><span data-ttu-id="4aa74-127">Personalizzazione dei valori membro dell'enumerazione</span><span class="sxs-lookup"><span data-stu-id="4aa74-127">Customizing Enumeration Member Values</span></span>  
 <span data-ttu-id="4aa74-128">È possibile personalizzare il valore del membro dell'enumerazione che costituisce una parte del contratto dati usando la proprietà <xref:System.Runtime.Serialization.EnumMemberAttribute.Value%2A> dell'attributo <xref:System.Runtime.Serialization.EnumMemberAttribute>.</span><span class="sxs-lookup"><span data-stu-id="4aa74-128">You can customize the enumeration member value that forms a part of the data contract by using the <xref:System.Runtime.Serialization.EnumMemberAttribute.Value%2A> property of the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute.</span></span>  
  
 <span data-ttu-id="4aa74-129">Ad esempio, il contratto dati seguente è equivalente anche al contratto dati di `CarConditionEnum`.</span><span class="sxs-lookup"><span data-stu-id="4aa74-129">For example, the following data contract is also equivalent to the data contract of the `CarConditionEnum`.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#3)]
 [!code-vb[c_DataContractEnumerations#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#3)]  
  
 <span data-ttu-id="4aa74-130">Una volta serializzato, il valore di `PreviouslyOwned` contiene la rappresentazione XML `<condition>Used</condition>`.</span><span class="sxs-lookup"><span data-stu-id="4aa74-130">When serialized, the value of `PreviouslyOwned` has the XML representation `<condition>Used</condition>`.</span></span>  
  
## <a name="simple-enumerations"></a><span data-ttu-id="4aa74-131">Enumerazioni semplici</span><span class="sxs-lookup"><span data-stu-id="4aa74-131">Simple Enumerations</span></span>  
 <span data-ttu-id="4aa74-132">È anche possibile serializzare i tipi di enumerazione ai quali non è stato applicato l'attributo <xref:System.Runtime.Serialization.DataContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="4aa74-132">You can also serialize enumeration types to which the <xref:System.Runtime.Serialization.DataContractAttribute> attribute has not been applied.</span></span> <span data-ttu-id="4aa74-133">Tali tipi di enumerazione vengono trattati esattamente come descritto in precedenza, con l'eccezione che ogni membro, a cui non è applicato l'attributo <xref:System.NonSerializedAttribute>, viene trattato come se fosse stato applicato l'attributo <xref:System.Runtime.Serialization.EnumMemberAttribute>.</span><span class="sxs-lookup"><span data-stu-id="4aa74-133">Such enumeration types are treated exactly as previously described, except that every member (that does not have the <xref:System.NonSerializedAttribute> attribute applied) is treated as if the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute has been applied.</span></span> <span data-ttu-id="4aa74-134">Ad esempio, l'enumerazione seguente contiene implicitamente un contratto dati equivalente all'esempio `CarConditionEnum` precedente.</span><span class="sxs-lookup"><span data-stu-id="4aa74-134">For example, the following enumeration implicitly has a data contract equivalent to the preceding `CarConditionEnum` example.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#6)]
 [!code-vb[c_DataContractEnumerations#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#6)]  
  
 <span data-ttu-id="4aa74-135">È possibile usare le enumerazioni semplici quando non è necessario personalizzare lo spazio dei nomi e il nome del contratto dati dell'enumerazione e i valori membro dell'enumerazione.</span><span class="sxs-lookup"><span data-stu-id="4aa74-135">You can use simple enumerations when you do not need to customize the enumeration's data contract name and namespace and the enumeration member values.</span></span>  
  
#### <a name="notes-on-simple-enumerations"></a><span data-ttu-id="4aa74-136">Nota sulle enumerazioni semplici</span><span class="sxs-lookup"><span data-stu-id="4aa74-136">Notes on Simple Enumerations</span></span>  
 <span data-ttu-id="4aa74-137">L'applicazione dell'attributo <xref:System.Runtime.Serialization.EnumMemberAttribute> alle enumerazioni semplici non produce alcun effetto.</span><span class="sxs-lookup"><span data-stu-id="4aa74-137">Applying the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute to simple enumerations has no effect.</span></span>  
  
 <span data-ttu-id="4aa74-138">È indifferente se l'attributo <xref:System.SerializableAttribute> viene applicato o meno all'enumerazione.</span><span class="sxs-lookup"><span data-stu-id="4aa74-138">It makes no difference whether or not the <xref:System.SerializableAttribute> attribute is applied to the enumeration.</span></span>  
  
 <span data-ttu-id="4aa74-139">Il fatto che la classe <xref:System.Runtime.Serialization.DataContractSerializer> si basa sull'applicazione dell'attributo <xref:System.NonSerializedAttribute> ai membri dell'enumerazione è diverso dal comportamento di <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> e <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter>.</span><span class="sxs-lookup"><span data-stu-id="4aa74-139">The fact that the <xref:System.Runtime.Serialization.DataContractSerializer> class honors the <xref:System.NonSerializedAttribute> attribute applied to enumeration members is different from the behavior of the <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> and the <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter>.</span></span> <span data-ttu-id="4aa74-140">Entrambi i serializzatori ignorano l'attributo <xref:System.NonSerializedAttribute>.</span><span class="sxs-lookup"><span data-stu-id="4aa74-140">Both of those serializers ignore the <xref:System.NonSerializedAttribute> attribute.</span></span>  
  
## <a name="flag-enumerations"></a><span data-ttu-id="4aa74-141">Enumerazioni di flag</span><span class="sxs-lookup"><span data-stu-id="4aa74-141">Flag Enumerations</span></span>  
 <span data-ttu-id="4aa74-142">È possibile applicare l'attributo <xref:System.FlagsAttribute> alle enumerazioni.</span><span class="sxs-lookup"><span data-stu-id="4aa74-142">You can apply the <xref:System.FlagsAttribute> attribute to enumerations.</span></span> <span data-ttu-id="4aa74-143">In tal caso, è possibile inviare o ricevere simultaneamente un elenco di zero o più valori di enumerazione.</span><span class="sxs-lookup"><span data-stu-id="4aa74-143">In that case, a list of zero or more enumeration values can be sent or received simultaneously.</span></span>  
  
 <span data-ttu-id="4aa74-144">A tale scopo, applicare l'attributo <xref:System.Runtime.Serialization.DataContractAttribute> all'enumerazione del flag e quindi contrassegnare tutti i membri che sono potenze di due con l'attributo <xref:System.Runtime.Serialization.EnumMemberAttribute>.</span><span class="sxs-lookup"><span data-stu-id="4aa74-144">To do so, apply the <xref:System.Runtime.Serialization.DataContractAttribute> attribute to the flag enumeration and then mark all the members that are powers of two with the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute.</span></span> <span data-ttu-id="4aa74-145">Si noti che per usare un'enumerazione del flag, la progressione deve essere una sequenza ininterrotta di potenze di 2 (ad esempio, 1, 2, 4, 8, 16, 32, 64).</span><span class="sxs-lookup"><span data-stu-id="4aa74-145">Note that to use a flag enumeration, the progression must be an uninterrupted sequence of powers of 2 (for example, 1, 2, 4, 8, 16, 32, 64).</span></span>  
  
 <span data-ttu-id="4aa74-146">I passaggi seguenti si applicano all'invio del valore dell'enumerazione di un flag:</span><span class="sxs-lookup"><span data-stu-id="4aa74-146">The following steps apply to sending a flag's enumeration value:</span></span>  
  
1.  <span data-ttu-id="4aa74-147">Tentare di individuare un membro dell'enumerazione (a cui è applicato l'attributo <xref:System.Runtime.Serialization.EnumMemberAttribute>) associato al valore numerico.</span><span class="sxs-lookup"><span data-stu-id="4aa74-147">Attempt to find an enumeration member (with the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute applied) that maps to the numeric value.</span></span> <span data-ttu-id="4aa74-148">Se disponibile, inviare un elenco che contenga solo quel membro.</span><span class="sxs-lookup"><span data-stu-id="4aa74-148">If found, send a list that contains just that member.</span></span>  
  
2.  <span data-ttu-id="4aa74-149">Tentare di suddividere il valore numerico in una somma tale che vi siano membri dell'enumerazione (ai quali è applicato l'attributo <xref:System.Runtime.Serialization.EnumMemberAttribute>) associati a ogni parte della somma.</span><span class="sxs-lookup"><span data-stu-id="4aa74-149">Attempt to break the numeric value into a sum such that there are enumeration members (each with the <xref:System.Runtime.Serialization.EnumMemberAttribute> attribute applied) that map to each part of the sum.</span></span> <span data-ttu-id="4aa74-150">Inviare l'elenco di tutti questi membri.</span><span class="sxs-lookup"><span data-stu-id="4aa74-150">Send the list of all these members.</span></span> <span data-ttu-id="4aa74-151">Si noti che il *algoritmo greedy* viene utilizzato per trovare ad esempio una somma, e pertanto non c'è garanzia che tale somma venga trovata anche se è presente.</span><span class="sxs-lookup"><span data-stu-id="4aa74-151">Note that the *greedy algorithm* is used to find such a sum, and thus there is no guarantee that such a sum is found even if it is present.</span></span> <span data-ttu-id="4aa74-152">Per evitare questo problema, verificare che i valori numerici dei membri dell'enumerazione siano potenze di due.</span><span class="sxs-lookup"><span data-stu-id="4aa74-152">To avoid this problem, make sure that the numeric values of the enumeration members are powers of two.</span></span>  
  
3.  <span data-ttu-id="4aa74-153">Se i due passaggi precedenti hanno esito negativo e il valore numerico è diverso da zero, generare un'eccezione <xref:System.Runtime.Serialization.SerializationException>.</span><span class="sxs-lookup"><span data-stu-id="4aa74-153">If the preceding two steps fail, and the numeric value is nonzero, throw a <xref:System.Runtime.Serialization.SerializationException>.</span></span> <span data-ttu-id="4aa74-154">Se il valore numerico è zero, inviare l'elenco vuoto.</span><span class="sxs-lookup"><span data-stu-id="4aa74-154">If the numeric value is zero, send the empty list.</span></span>  
  
### <a name="example"></a><span data-ttu-id="4aa74-155">Esempio</span><span class="sxs-lookup"><span data-stu-id="4aa74-155">Example</span></span>  
 <span data-ttu-id="4aa74-156">L'esempio di enumerazione seguente può essere usato in un'operazione di flag.</span><span class="sxs-lookup"><span data-stu-id="4aa74-156">The following enumeration example can be used in a flag operation.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#4)]
 [!code-vb[c_DataContractEnumerations#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#4)]  
  
 <span data-ttu-id="4aa74-157">I valori nell'esempio seguente vengono serializzati come indicato.</span><span class="sxs-lookup"><span data-stu-id="4aa74-157">The following example values are serialized as indicated.</span></span>  
  
 [!code-csharp[c_DataContractEnumerations#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontractenumerations/cs/source.cs#5)]
 [!code-vb[c_DataContractEnumerations#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontractenumerations/vb/source.vb#5)]  
  
## <a name="see-also"></a><span data-ttu-id="4aa74-158">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="4aa74-158">See Also</span></span>  
 <xref:System.Runtime.Serialization.DataContractSerializer>  
 [<span data-ttu-id="4aa74-159">Uso di contratti dati</span><span class="sxs-lookup"><span data-stu-id="4aa74-159">Using Data Contracts</span></span>](../../../../docs/framework/wcf/feature-details/using-data-contracts.md)  
 [<span data-ttu-id="4aa74-160">Specifying Data Transfer in Service Contracts</span><span class="sxs-lookup"><span data-stu-id="4aa74-160">Specifying Data Transfer in Service Contracts</span></span>](../../../../docs/framework/wcf/feature-details/specifying-data-transfer-in-service-contracts.md)
