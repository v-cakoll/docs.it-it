---
title: Hosting in un'applicazione di servizio Windows
ms.date: 03/30/2017
ms.assetid: f4199998-27f3-4dd9-aee4-0a4addfa9f24
ms.openlocfilehash: 2b3935babec0c7cdc3ffca5dd11d693fdfee7a89
ms.sourcegitcommit: fb78d8abbdb87144a3872cf154930157090dd933
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/26/2018
ms.locfileid: "47206346"
---
# <a name="hosting-in-a-windows-service-application"></a><span data-ttu-id="913d2-102">Hosting in un'applicazione di servizio Windows</span><span class="sxs-lookup"><span data-stu-id="913d2-102">Hosting in a Windows Service Application</span></span>
<span data-ttu-id="913d2-103">I servizi Windows, precedentemente noti come servizi Windows NT, offrono un modello di processo particolarmente adatto ad applicazioni che devono risiedere in un eseguibile a esecuzione prolungata e che non visualizzano alcuna forma di interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="913d2-103">Windows services (formerly known as Windows NT services) provide a process model particularly suited to applications that must live in a long-running executable and do not display any form of user interface.</span></span> <span data-ttu-id="913d2-104">La durata del processo di un'applicazione di servizio Windows viene gestita da Gestione controllo servizi (SCM), che consente di avviare, interrompere e sospendere le applicazioni di servizio Windows.</span><span class="sxs-lookup"><span data-stu-id="913d2-104">The process lifetime of a Windows service application is managed by the service control manager (SCM), which allows you to start, stop, and pause Windows service applications.</span></span> <span data-ttu-id="913d2-105">È possibile configurare un processo del servizio Windows per l'avvio automatico all'avvio del computer, rendendolo un ambiente host adatto per le applicazioni "always on".</span><span class="sxs-lookup"><span data-stu-id="913d2-105">You can configure a Windows service process to start automatically when the computer starts, making it a suitable hosting environment for "always on" applications.</span></span> <span data-ttu-id="913d2-106">Per altre informazioni sulle applicazioni di servizio di Windows, vedere [le applicazioni del servizio Windows](https://go.microsoft.com/fwlink/?LinkId=89450).</span><span class="sxs-lookup"><span data-stu-id="913d2-106">For more information about Windows service applications, see [Windows Service Applications](https://go.microsoft.com/fwlink/?LinkId=89450).</span></span>  
  
 <span data-ttu-id="913d2-107">Le applicazioni che ospitano servizi Windows Communication Foundation (WCF) a esecuzione prolungata condividono molte caratteristiche dei servizi di Windows.</span><span class="sxs-lookup"><span data-stu-id="913d2-107">Applications that host long-running Windows Communication Foundation (WCF) services share many characteristics with Windows services.</span></span> <span data-ttu-id="913d2-108">In particolare, i servizi WCF sono eseguibili server a esecuzione prolungata che non interagiscono direttamente con l'utente e non implementano quindi alcuna forma di interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="913d2-108">In particular, WCF services are long-running server executables that do not interact directly with the user and therefore do not implement any form of user interface.</span></span> <span data-ttu-id="913d2-109">Di conseguenza, l'hosting dei servizi WCF all'interno di un'applicazione del servizio Windows è un'opzione per la creazione di affidabili e a esecuzione prolungata, le applicazioni WCF.</span><span class="sxs-lookup"><span data-stu-id="913d2-109">As such, hosting WCF services inside of a Windows service application is one option for building robust, long-running, WCF applications.</span></span>  
  
 <span data-ttu-id="913d2-110">Spesso, gli sviluppatori WCF necessario decidere se ospitare le applicazioni WCF all'interno di un'applicazione del servizio Windows o nell'ambiente di hosting Internet Information Services (IIS) o Windows Process Activation Service (WAS).</span><span class="sxs-lookup"><span data-stu-id="913d2-110">Often, WCF developers must decide whether to host their WCF application inside of a Windows service application or inside of the Internet Information Services (IIS) or Windows Process Activation Service (WAS) hosting environment.</span></span> <span data-ttu-id="913d2-111">È consigliabile considerare l'uso di applicazioni di servizio Windows alle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="913d2-111">You should consider using Windows service applications under the following conditions:</span></span>  
  
-   <span data-ttu-id="913d2-112">L'applicazione richiede l'attivazione esplicita.</span><span class="sxs-lookup"><span data-stu-id="913d2-112">Your application requires explicit activation.</span></span> <span data-ttu-id="913d2-113">È, ad esempio, consigliabile usare servizi Windows quando l'applicazione deve essere avviata automaticamente all'avvio del server, invece di essere avviata dinamicamente in risposta al primo messaggio in ingresso.</span><span class="sxs-lookup"><span data-stu-id="913d2-113">For example, you should use Windows services when your application must start automatically when the server starts instead of being dynamically started in response to the first incoming message.</span></span>  
  
-   <span data-ttu-id="913d2-114">Il processo che ospita l'applicazione deve restare in esecuzione una volta avviato.</span><span class="sxs-lookup"><span data-stu-id="913d2-114">The process that hosts your application must remain running once started.</span></span> <span data-ttu-id="913d2-115">Una volta avviato, un processo di servizio Windows resta in esecuzione, a meno che non venga esplicitamente interrotto da un amministratore del server tramite Gestione controllo servizi.</span><span class="sxs-lookup"><span data-stu-id="913d2-115">Once started, a Windows service process remains running unless explicitly shut down by a server administrator using the service control manager.</span></span> <span data-ttu-id="913d2-116">Le applicazioni ospitate in IIS o WAS possono essere avviate e interrotte dinamicamente, per usare le risorse di sistema in modo ottimale.</span><span class="sxs-lookup"><span data-stu-id="913d2-116">Applications hosted in IIS or WAS may be started and stopped dynamically to make optimal use of system resources.</span></span> <span data-ttu-id="913d2-117">Le applicazioni che richiedono il controllo esplicito sulla durata del processo host dovrebbero usare servizi Windows invece di IIS o WAS.</span><span class="sxs-lookup"><span data-stu-id="913d2-117">Applications that require explicit control over the lifetime of their hosting process should use Windows services instead of IIS or WAS.</span></span>  
  
-   <span data-ttu-id="913d2-118">Il servizio WCF deve eseguire in Windows Server 2003 e usare trasporti diversi da HTTP.</span><span class="sxs-lookup"><span data-stu-id="913d2-118">Your WCF service must run on Windows Server 2003 and use transports other than HTTP.</span></span> <span data-ttu-id="913d2-119">Su Windows Server 2003, l'ambiente host [!INCLUDE[iis601](../../../../includes/iis601-md.md)] è limitato alla sola comunicazione HTTP.</span><span class="sxs-lookup"><span data-stu-id="913d2-119">On Windows Server 2003, the [!INCLUDE[iis601](../../../../includes/iis601-md.md)] hosting environment is restricted to HTTP communication only.</span></span> <span data-ttu-id="913d2-120">Le applicazioni del servizio Windows non sono soggetti a questa restrizione e possono usare qualsiasi trasporto WCF supporta, inclusi NET. TCP, NET. pipe e NET. MSMQ.</span><span class="sxs-lookup"><span data-stu-id="913d2-120">Windows service applications are not subject to this restriction and can use any transport WCF supports, including net.tcp, net.pipe, and net.msmq.</span></span>  
  
### <a name="to-host-wcf-inside-of-a-windows-service-application"></a><span data-ttu-id="913d2-121">Per ospitare WCF in un'applicazione di servizio Windows</span><span class="sxs-lookup"><span data-stu-id="913d2-121">To host WCF inside of a Windows service application</span></span>  
  
1.  <span data-ttu-id="913d2-122">Creare un'applicazione di servizio Windows.</span><span class="sxs-lookup"><span data-stu-id="913d2-122">Create a Windows service application.</span></span> <span data-ttu-id="913d2-123">È possibile scrivere applicazioni di servizio Windows in codice gestito usando le classi nello spazio dei nomi <xref:System.ServiceProcess>.</span><span class="sxs-lookup"><span data-stu-id="913d2-123">You can write Windows service applications in managed code using the classes in the <xref:System.ServiceProcess> namespace.</span></span> <span data-ttu-id="913d2-124">Questa applicazione deve includere una classe che eredita da <xref:System.ServiceProcess.ServiceBase>.</span><span class="sxs-lookup"><span data-stu-id="913d2-124">This application must include one class that inherits from <xref:System.ServiceProcess.ServiceBase>.</span></span>  
  
2.  <span data-ttu-id="913d2-125">Collegare la durata dei servizi WCF per la durata dell'applicazione del servizio Windows.</span><span class="sxs-lookup"><span data-stu-id="913d2-125">Link the lifetime of the WCF services to the lifetime of the Windows service application.</span></span> <span data-ttu-id="913d2-126">In genere, è consigliabile servizi WCF ospitati in un'applicazione del servizio Windows divengano attivi quando viene avviato il servizio di hosting, interrompere l'ascolto dei messaggi quando viene arrestato, il servizio di hosting e arrestare il processo di hosting quando il servizio WCF incontra un errore.</span><span class="sxs-lookup"><span data-stu-id="913d2-126">Typically, you want WCF services hosted in a Windows service application to become active when the hosting service starts, stop listening for messages when the hosting service is stopped, and shut down the hosting process when the WCF service encounters an error.</span></span> <span data-ttu-id="913d2-127">Per ottenere questo risultato, è possibile procedere come segue:</span><span class="sxs-lookup"><span data-stu-id="913d2-127">This can be accomplished as follows:</span></span>  
  
    -   <span data-ttu-id="913d2-128">Eseguire l'override di <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> per aprire una o più istanze di <xref:System.ServiceModel.ServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="913d2-128">Override <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> to open one or more instances of <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="913d2-129">Una singola applicazione del servizio Windows può ospitare più servizi WCF che avviano e arrestano come gruppo.</span><span class="sxs-lookup"><span data-stu-id="913d2-129">A single Windows service application can host multiple WCF services that start and stop as a group.</span></span>  
  
    -   <span data-ttu-id="913d2-130">Eseguire l'override <xref:System.ServiceProcess.ServiceBase.OnStop%2A> chiamare <xref:System.ServiceModel.Channels.CommunicationObject.Closed> nel <xref:System.ServiceModel.ServiceHost> tutti i servizi WCF in esecuzione avviati durante <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>.</span><span class="sxs-lookup"><span data-stu-id="913d2-130">Override <xref:System.ServiceProcess.ServiceBase.OnStop%2A> to call <xref:System.ServiceModel.Channels.CommunicationObject.Closed> on the <xref:System.ServiceModel.ServiceHost> any running WCF services that were started during <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>.</span></span>  
  
    -   <span data-ttu-id="913d2-131">Eseguire la sottoscrizione all'evento <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> di <xref:System.ServiceModel.ServiceHost> e usare la classe <xref:System.ServiceProcess.ServiceController> per arrestare l'applicazione di servizio Windows in caso di errore.</span><span class="sxs-lookup"><span data-stu-id="913d2-131">Subscribe to the <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> event of <xref:System.ServiceModel.ServiceHost> and use the <xref:System.ServiceProcess.ServiceController> class to shut down the Windows service application in case of error.</span></span>  
  
     <span data-ttu-id="913d2-132">Le applicazioni di servizio Windows che ospitano servizi WCF distribuite e gestite nello stesso modo come applicazioni di servizio Windows che non effettuano usano WCF.</span><span class="sxs-lookup"><span data-stu-id="913d2-132">Windows service applications that host WCF services are deployed and managed in the same way as Windows service applications that do not make use of WCF.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="913d2-133">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="913d2-133">See Also</span></span>  
 <xref:System.ServiceProcess>  
 [<span data-ttu-id="913d2-134">Procedura dettagliata: creazione di un'applicazione di servizio Windows in Progettazione componenti</span><span class="sxs-lookup"><span data-stu-id="913d2-134">Walkthrough: Creating a Windows Service Application in the Component Designer</span></span>](https://go.microsoft.com/fwlink/?LinkId=94875)  
 [<span data-ttu-id="913d2-135">Procedura: Ospitare un servizio WCF in un servizio di Windows gestito</span><span class="sxs-lookup"><span data-stu-id="913d2-135">How to: Host a WCF Service in a Managed Windows Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-a-managed-windows-service.md)  
 [<span data-ttu-id="913d2-136">Host del servizio Windows</span><span class="sxs-lookup"><span data-stu-id="913d2-136">Windows Service Host</span></span>](../../../../docs/framework/wcf/samples/windows-service-host.md)  
 [<span data-ttu-id="913d2-137">Architettura di programmazione delle applicazioni di servizio</span><span class="sxs-lookup"><span data-stu-id="913d2-137">Service Application Programming Architecture</span></span>](https://go.microsoft.com/fwlink/?LinkId=94876)  
 [<span data-ttu-id="913d2-138">Windows Server AppFabric con funzionalità di Hosting</span><span class="sxs-lookup"><span data-stu-id="913d2-138">Windows Server App Fabric Hosting Features</span></span>](https://go.microsoft.com/fwlink/?LinkId=201276)
