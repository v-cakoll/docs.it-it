---
title: Attacchi di tipo replay
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 7a17e040-93cd-4432-81b9-9f62fec78c8f
caps.latest.revision: "10"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: cd96404adea7fb8e7d59dcea322b2d3832f2bfe4
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/02/2017
---
# <a name="replay-attacks"></a><span data-ttu-id="2c145-102">Attacchi di tipo replay</span><span class="sxs-lookup"><span data-stu-id="2c145-102">Replay Attacks</span></span>
<span data-ttu-id="2c145-103">Oggetto *attacco di tipo replay* si verifica quando un utente malintenzionato copia un flusso di messaggi tra due parti e lo riproduce verso una o più parti.</span><span class="sxs-lookup"><span data-stu-id="2c145-103">A *replay attack* occurs when an attacker copies a stream of messages between two parties and replays the stream to one or more of the parties.</span></span> <span data-ttu-id="2c145-104">Se l'attacco non viene respinto, i computer colpiti elaborano il flusso come se i messaggi fossero legittimi. Ciò determina una serie di conseguenze negative, ad esempio la creazione di ordini ridondanti di un articolo.</span><span class="sxs-lookup"><span data-stu-id="2c145-104">Unless mitigated, the computers subject to the attack process the stream as legitimate messages, resulting in a range of bad consequences, such as redundant orders of an item.</span></span>  
  
## <a name="bindings-may-be-subject-to-reflection-attacks"></a><span data-ttu-id="2c145-105">Vulnerabilità delle associazioni agli attacchi di tipo reflection</span><span class="sxs-lookup"><span data-stu-id="2c145-105">Bindings May Be Subject to Reflection Attacks</span></span>  
 <span data-ttu-id="2c145-106">*Attacchi di tipo reflection* sono riproduzioni dei messaggi di un mittente proveniente dal destinatario come risposta.</span><span class="sxs-lookup"><span data-stu-id="2c145-106">*Reflection attacks* are replays of messages back to a sender as if they came from the receiver as the reply.</span></span> <span data-ttu-id="2c145-107">Lo standard *rilevamento riproduzione* nel [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] meccanismo non gestiscono automaticamente questo.</span><span class="sxs-lookup"><span data-stu-id="2c145-107">The standard *replay detection* in the [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] mechanism does not automatically handle this.</span></span>  
  
 <span data-ttu-id="2c145-108">In [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], tuttavia, gli attacchi di tipo reflection vengono respinti per impostazione predefinita. Infatti, il modello dei servizi di tale piattaforma prevede l'aggiunta di un ID di messaggio firmato ai messaggi di richiesta nonché un'intestazione firmata `relates-to` nei messaggi di risposta.</span><span class="sxs-lookup"><span data-stu-id="2c145-108">Reflection attacks are mitigated by default because the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service model adds a signed message ID to request messages and expects a signed `relates-to` header on response messages.</span></span> <span data-ttu-id="2c145-109">Risulta di conseguenza impossibile riprodurre il messaggio di richiesta come risposta.</span><span class="sxs-lookup"><span data-stu-id="2c145-109">Consequently, the request message cannot be replayed as a response.</span></span> <span data-ttu-id="2c145-110">Negli scenari che prevedono messaggi affidabili gli attacchi di tipo reflection vengono respinti per i motivi seguenti:</span><span class="sxs-lookup"><span data-stu-id="2c145-110">In secure reliable message (RM) scenarios, reflection attacks are mitigated because:</span></span>  
  
-   <span data-ttu-id="2c145-111">Lo schema dei messaggi di creazione di sequenza non corrisponde a quello di creazione di sequenza di risposta.</span><span class="sxs-lookup"><span data-stu-id="2c145-111">The create sequence and create sequence response message schemas are different.</span></span>  
  
-   <span data-ttu-id="2c145-112">Per le sequenze simplex, i messaggi di sequenza inviati dal client non possono essere riprodotti verso il client stesso in quanto quest'ultimo non è in grado di riconoscere tali messaggi.</span><span class="sxs-lookup"><span data-stu-id="2c145-112">For simplex sequences, sequence messages the client sends cannot be replayed back to it because the client cannot understand such messages.</span></span>  
  
-   <span data-ttu-id="2c145-113">Per le sequenze duplex, i due ID di sequenza devono essere univoci.</span><span class="sxs-lookup"><span data-stu-id="2c145-113">For duplex sequences, the two sequence IDs must be unique.</span></span> <span data-ttu-id="2c145-114">Inoltre, ogni intestazione e corpo della sequenza è firmato. Risulta pertanto impossibile riprodurre un messaggio di sequenza in uscita sottoforma di messaggio di sequenza in ingresso.</span><span class="sxs-lookup"><span data-stu-id="2c145-114">Thus, an outgoing sequence message cannot be replayed back as an incoming sequence message (all sequence headers and bodies are signed, too).</span></span>  
  
 <span data-ttu-id="2c145-115">Le uniche associazioni vulnerabili agli attacchi di tipo reflection sono quelle in cui non viene applicata la specifica WS-Addressing, ovvero le associazioni personalizzate in cui la funzionalità WS-Addressing è stata disattivata e in cui si utilizza la protezione basata su chiavi simmetriche.</span><span class="sxs-lookup"><span data-stu-id="2c145-115">The only bindings that are susceptible to reflection attacks are those without WS-Addressing: custom bindings that have WS-Addressing disabled and use the symmetric key-based security.</span></span> <span data-ttu-id="2c145-116">Per impostazione predefinita, l'associazione <xref:System.ServiceModel.BasicHttpBinding> non applica la specifica WS-Addressing. Tuttavia, tale associazione presenta una modalità di sicurezza basata su chiavi simmetriche in grado di respingere gli attacchi di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="2c145-116">The <xref:System.ServiceModel.BasicHttpBinding> does not use WS-Addressing by default, but it does not use symmetric key-based security in a way that allows it to be vulnerable to this attack.</span></span>  
  
 <span data-ttu-id="2c145-117">Affinché le associazioni personalizzate siano in grado di respingere gli attacchi di tipo reflection è necessario richiedere l'utilizzo di intestazioni WS-Addressing oppure evitare di stabilire contesti di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="2c145-117">The mitigation for custom bindings is to not establish security context or to require WS-Addressing headers.</span></span>  
  
## <a name="web-farm-attacker-replays-request-to-multiple-nodes"></a><span data-ttu-id="2c145-118">Web farm: attacco basato sulla riproduzione di richieste verso più nodi</span><span class="sxs-lookup"><span data-stu-id="2c145-118">Web Farm: Attacker Replays Request to Multiple Nodes</span></span>  
 <span data-ttu-id="2c145-119">Si consideri il caso di un client che utilizza un servizio implementato in una Web farm.</span><span class="sxs-lookup"><span data-stu-id="2c145-119">A client uses a service that is implemented on a Web farm.</span></span> <span data-ttu-id="2c145-120">In questo caso un utente malintenzionato può riprodurre una richiesta inviata a un determinato nodo della farm verso un'altro nodo della stessa farm.</span><span class="sxs-lookup"><span data-stu-id="2c145-120">An attacker replays a request that was sent to one node in the farm to another node in the farm.</span></span> <span data-ttu-id="2c145-121">Inoltre, se un servizio viene riavviato, la cache di riproduzione viene svuotata. Ciò consente a un utente malintenzionato di riprodurre una richiesta.</span><span class="sxs-lookup"><span data-stu-id="2c145-121">In addition, if a service is restarted, the replay cache is flushed, allowing an attacker to replay the request.</span></span> <span data-ttu-id="2c145-122">Nota: una cache di riproduzione contiene i valori di firma dei messaggi usati o già visualizzati e impedisce che tali firme vengano utilizzate più di una volta, respingendo in questo modo gli attacchi di tipo replay.</span><span class="sxs-lookup"><span data-stu-id="2c145-122">(The cache contains used, previously seen message signature values and prevents replays so those signatures can be used only once.</span></span> <span data-ttu-id="2c145-123">Tuttavia, le funzionalità di una cache di riproduzione non vengono estese all'intera Web farm.</span><span class="sxs-lookup"><span data-stu-id="2c145-123">Replay caches are not shared across a Web farm.)</span></span>  
  
 <span data-ttu-id="2c145-124">Le prevenzioni includono:</span><span class="sxs-lookup"><span data-stu-id="2c145-124">Mitigations include:</span></span>  
  
-   <span data-ttu-id="2c145-125">Usare una modalità di sicurezza dei messaggi che preveda token del contesto di sicurezza con stato. La funzionalità di conversazione protetta può essere attiva o disattivata.</span><span class="sxs-lookup"><span data-stu-id="2c145-125">Use message mode security with stateful security context tokens (with or without secure conversation enabled).</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="2c145-126">[Procedura: creare un contesto di sicurezza per una sessione protetta](../../../../docs/framework/wcf/feature-details/how-to-create-a-security-context-token-for-a-secure-session.md).</span><span class="sxs-lookup"><span data-stu-id="2c145-126"> [How to: Create a Security Context Token for a Secure Session](../../../../docs/framework/wcf/feature-details/how-to-create-a-security-context-token-for-a-secure-session.md).</span></span>  
  
-   <span data-ttu-id="2c145-127">Configurare il servizio in modo che utilizzi un meccanismo di sicurezza a livello di trasporto.</span><span class="sxs-lookup"><span data-stu-id="2c145-127">Configure the service to use transport-level security.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2c145-128">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="2c145-128">See Also</span></span>  
 [<span data-ttu-id="2c145-129">Considerazioni sulla sicurezza</span><span class="sxs-lookup"><span data-stu-id="2c145-129">Security Considerations</span></span>](../../../../docs/framework/wcf/feature-details/security-considerations-in-wcf.md)  
 [<span data-ttu-id="2c145-130">Diffusione di informazioni</span><span class="sxs-lookup"><span data-stu-id="2c145-130">Information Disclosure</span></span>](../../../../docs/framework/wcf/feature-details/information-disclosure.md)  
 [<span data-ttu-id="2c145-131">Elevazione dei privilegi</span><span class="sxs-lookup"><span data-stu-id="2c145-131">Elevation of Privilege</span></span>](../../../../docs/framework/wcf/feature-details/elevation-of-privilege.md)  
 [<span data-ttu-id="2c145-132">Denial of Service</span><span class="sxs-lookup"><span data-stu-id="2c145-132">Denial of Service</span></span>](../../../../docs/framework/wcf/feature-details/denial-of-service.md)  
 [<span data-ttu-id="2c145-133">Manomissione</span><span class="sxs-lookup"><span data-stu-id="2c145-133">Tampering</span></span>](../../../../docs/framework/wcf/feature-details/tampering.md)  
 [<span data-ttu-id="2c145-134">Scenari non supportati</span><span class="sxs-lookup"><span data-stu-id="2c145-134">Unsupported Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/unsupported-scenarios.md)
