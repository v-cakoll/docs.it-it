---
title: Scenari di routing
ms.date: 03/30/2017
helpviewer_keywords:
- rounting [WCF], scenarios
ms.assetid: ec22f308-665a-413e-9f94-7267cb665dab
ms.openlocfilehash: fa5d588211cfe40cde9e9db3161a931e3287cd39
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 04/23/2019
ms.locfileid: "61991054"
---
# <a name="routing-scenarios"></a><span data-ttu-id="ac0b7-102">Scenari di routing</span><span class="sxs-lookup"><span data-stu-id="ac0b7-102">Routing Scenarios</span></span>
<span data-ttu-id="ac0b7-103">Sebbene il servizio di routing sia notevolmente personalizzabile, può risultare difficile progettare una logica di routing efficiente quando si crea una nuova configurazione da zero.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-103">While the Routing Service is highly customizable, it can be a challenge to design efficient routing logic when creating a new configuration from scratch.</span></span>  <span data-ttu-id="ac0b7-104">Esistono tuttavia diversi scenari comuni seguiti dalla maggior parte delle configurazioni dei servizi di routing.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-104">However, there are several common scenarios that most Routing Service configurations follow.</span></span> <span data-ttu-id="ac0b7-105">Tali scenari possono non essere direttamente applicabili a una configurazione specifica, tuttavia comprendere le modalità di configurazione del servizio di routing per tali scenari consente di acquisire familiarità con le potenzialità del servizio stesso.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-105">While these scenarios may not apply directly to your specific configuration, understanding how the Routing Service can be configured to handle these scenarios will aid you in understanding the Routing Service.</span></span>  
  
## <a name="common-scenarios"></a><span data-ttu-id="ac0b7-106">Scenari comuni</span><span class="sxs-lookup"><span data-stu-id="ac0b7-106">Common Scenarios</span></span>  
 <span data-ttu-id="ac0b7-107">L'utilizzo più comune del servizio di routing consiste nell'aggregazione di più endpoint di destinazione allo scopo di ridurre il numero degli endpoint esposti alle applicazioni client e quindi nell'utilizzo di filtri messaggi per indirizzare ogni messaggio alla destinazione corretta.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-107">The most basic use of the Routing Service is to aggregate multiple destination endpoints to reduce the number of endpoints exposed to the client applications, and then use message filters to route each message to the correct destination.</span></span> <span data-ttu-id="ac0b7-108">I messaggi possono essere indirizzati in base a requisiti di elaborazione fisica o logica, ad esempio a seconda che un messaggio debba essere elaborato da un servizio specifico o in base a esigenze aziendali arbitrarie quali l'elaborazione prioritaria a seconda dell'origine del messaggio.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-108">Messages may be routed based on logical or physical processing requirements, such as a message type that must be processed by a specific service, or based on arbitrary business needs such as providing priority processing of messages from a specific source.</span></span> <span data-ttu-id="ac0b7-109">Nella tabella seguente vengono elencati alcuni scenari comuni e le circostanze in cui si verificano:</span><span class="sxs-lookup"><span data-stu-id="ac0b7-109">The following table lists some of the common scenarios and when they are encountered:</span></span>  
  
|<span data-ttu-id="ac0b7-110">Scenario</span><span class="sxs-lookup"><span data-stu-id="ac0b7-110">Scenario</span></span>|<span data-ttu-id="ac0b7-111">Casi di utilizzo</span><span class="sxs-lookup"><span data-stu-id="ac0b7-111">Use when</span></span>|  
|--------------|--------------|  
|<span data-ttu-id="ac0b7-112">Controllo delle versioni dei servizi</span><span class="sxs-lookup"><span data-stu-id="ac0b7-112">Service versioning</span></span>|<span data-ttu-id="ac0b7-113">È necessario supportare più versioni di un servizio o prevedere la distribuzione futura di una versione aggiornata del servizio</span><span class="sxs-lookup"><span data-stu-id="ac0b7-113">You need to support multiple versions of a service or may deploy an updated service in the future</span></span>|  
|<span data-ttu-id="ac0b7-114">Partizionamento dei dati del servizio</span><span class="sxs-lookup"><span data-stu-id="ac0b7-114">Service data partitioning</span></span>|<span data-ttu-id="ac0b7-115">È necessario partizionare un servizio tra più host</span><span class="sxs-lookup"><span data-stu-id="ac0b7-115">You must partition a service across multiple hosts</span></span>|  
|<span data-ttu-id="ac0b7-116">Aggiornamento dinamico</span><span class="sxs-lookup"><span data-stu-id="ac0b7-116">Dynamic update</span></span>|<span data-ttu-id="ac0b7-117">È necessario riconfigurare dinamicamente la logica di routing al runtime per gestire distribuzioni del servizio mutevoli</span><span class="sxs-lookup"><span data-stu-id="ac0b7-117">You must dynamically reconfigure routing logic at runtime to handle changing service deployments</span></span>|  
|<span data-ttu-id="ac0b7-118">Multicast</span><span class="sxs-lookup"><span data-stu-id="ac0b7-118">Multicast</span></span>|<span data-ttu-id="ac0b7-119">È necessario inviare un messaggio a più endpoint</span><span class="sxs-lookup"><span data-stu-id="ac0b7-119">You must send one message to multiple endpoints</span></span>|  
|<span data-ttu-id="ac0b7-120">Bridging del protocollo</span><span class="sxs-lookup"><span data-stu-id="ac0b7-120">Protocol bridging</span></span>|<span data-ttu-id="ac0b7-121">Si ricevono messaggi su un protocollo di trasporto ma l'endpoint di destinazione usa un protocollo diverso</span><span class="sxs-lookup"><span data-stu-id="ac0b7-121">You receive messages over one transport protocol, and the destination endpoint uses a different protocol</span></span>|  
|<span data-ttu-id="ac0b7-122">Gestione degli errori</span><span class="sxs-lookup"><span data-stu-id="ac0b7-122">Error Handling</span></span>|<span data-ttu-id="ac0b7-123">È necessario assicurare la continuità dei servizi in caso di limitazioni di rete ed errori di comunicazione</span><span class="sxs-lookup"><span data-stu-id="ac0b7-123">You need to provide resilience to network outages and communication failures</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="ac0b7-124">Sebbene molti degli scenari indicati siano specifici di precise esigenze aziendali o di particolari requisiti di elaborazione, prevedere il supporto per gli aggiornamenti dinamici e l'uso della gestione degli errori è spesso consigliabile in quanto in questo modo è possibile modificare la logica di routing al runtime e ripristinare i servizi in caso di errori di rete e di comunicazione temporanei.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-124">While many of the scenarios presented are specific to certain business needs or processing requirements, planning to support dynamic updates and utilizing error handling can often be considered as best practices as they allow you to modify routing logic at runtime and recover from transient network and communication failures.</span></span>  
  
### <a name="service-versioning"></a><span data-ttu-id="ac0b7-125">Controllo delle versioni dei servizi</span><span class="sxs-lookup"><span data-stu-id="ac0b7-125">Service Versioning</span></span>  
 <span data-ttu-id="ac0b7-126">Quando si introduce una nuova versione di un servizio è spesso necessario mantenere la versione precedente finché tutti i client non sono passati al nuovo servizio.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-126">When introducing a new version of a service, you must often maintain the previous version until all clients have transitioned to the new service.</span></span> <span data-ttu-id="ac0b7-127">Ciò è di particolare importanza se il servizio è un processo a esecuzione prolungata il cui completamento richiede giorni, settimane o perfino mesi.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-127">This is especially critical if the service is a long-running process that takes days, weeks, or even months to complete.</span></span> <span data-ttu-id="ac0b7-128">In questi casi, è in genere necessario implementare un nuovo indirizzo per l'endpoint del nuovo servizio e mantenere l'endpoint originale della versione precedente.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-128">Usually this requires implementing a new endpoint address for the new service while maintaining the original endpoint for the previous version.</span></span>  
  
 <span data-ttu-id="ac0b7-129">Con il servizio di routing è possibile esporre un endpoint affinché riceva i messaggi dalle applicazioni client e quindi indirizzare ogni messaggio alla versione corretta del servizio in base al contenuto del messaggio.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-129">By using the Routing Service, you can expose one endpoint to receive messages from client applications and then route each message to the correct service version based on the message content.</span></span> <span data-ttu-id="ac0b7-130">L'implementazione più semplice prevede l'aggiunta di un'intestazione personalizzata al messaggio, la quale indichi la versione del servizio da cui deve essere elaborato il messaggio.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-130">The most basic implementation involves adding a custom header to the message that indicates the version of the service that the message is to be processed by.</span></span> <span data-ttu-id="ac0b7-131">Il servizio di routing può usare XPathMessageFilter per verificare in ogni messaggio la presenza dell'intestazione personalizzata e indirizzare il messaggio all'endpoint di destinazione appropriato.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-131">The Routing Service can use the XPathMessageFilter to inspect each message for the presence of the custom header and route the message to the appropriate destination endpoint.</span></span>  
  
 <span data-ttu-id="ac0b7-132">Per i passaggi necessari per creare una configurazione di controllo delle versioni del servizio, vedere [How To: Controllo delle versioni del servizio](../../../../docs/framework/wcf/feature-details/how-to-service-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="ac0b7-132">For the steps used to create a service versioning configuration, see [How To: Service Versioning](../../../../docs/framework/wcf/feature-details/how-to-service-versioning.md).</span></span>
  
### <a name="service-data-partitioning"></a><span data-ttu-id="ac0b7-133">Partizionamento dei dati del servizio</span><span class="sxs-lookup"><span data-stu-id="ac0b7-133">Service Data Partitioning</span></span>  
 <span data-ttu-id="ac0b7-134">Quando si progetta un ambiente distribuito, è spesso consigliabile suddividere il carico di elaborazione tra più computer in modo da offrire disponibilità elevata, ridurre il carico sui singoli computer o fornire risorse dedicate per uno specifico subset di messaggi.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-134">When designing a distributed environment, it is often desirable to spread processing load across multiple computers in order to provide high availability, decrease processing load on individual computers, or to provide dedicated resources for a specific subset of messages.</span></span> <span data-ttu-id="ac0b7-135">Sebbene il servizio di routing non sostituisca una soluzione di bilanciamento del carico dedicata, la possibilità di eseguire il routing basato sul contenuto consente di indirizzare messaggi simili a specifiche destinazioni.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-135">While the Routing Service does not replace a dedicated load balancing solution, its ability to perform content based routing can be used to route otherwise similar messages to specific destinations.</span></span> <span data-ttu-id="ac0b7-136">Potrebbe essere ad esempio necessario elaborare i messaggi di un determinato cliente separatamente da quelli ricevuti da altri client.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-136">For example, you may have a requirement to process messages from a specific client separately from messages received from other clients.</span></span>  
  
 <span data-ttu-id="ac0b7-137">Per i passaggi necessari per creare un servizio dati di configurazione del partizionamento, vedere [How To: Partizionamento dei dati del servizio](../../../../docs/framework/wcf/feature-details/how-to-service-data-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="ac0b7-137">For the steps used to create a service data partitioning configuration, see [How To: Service Data Partitioning](../../../../docs/framework/wcf/feature-details/how-to-service-data-partitioning.md).</span></span>  
  
### <a name="dynamic-routing"></a><span data-ttu-id="ac0b7-138">Routing dinamico</span><span class="sxs-lookup"><span data-stu-id="ac0b7-138">Dynamic Routing</span></span>  
 <span data-ttu-id="ac0b7-139">È spesso necessario modificare la configurazione di routing per soddisfare nuove esigenze aziendali, ad esempio con l'aggiunta di una route a una versione più recente di un servizio, la modifica dei criteri di routing oppure la modifica dell'endpoint di destinazione di uno specifico messaggio.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-139">Often it is desirable to modify the routing configuration to satisfy changing business needs, such as adding a route to a newer version of a service, changing routing criteria, or changing the destination endpoint a specific message that the filter routes to.</span></span> <span data-ttu-id="ac0b7-140">Queste modifiche sono possibile tramite <xref:System.ServiceModel.Routing.RoutingExtension> grazie al quale è possibile specificare una nuova configurazione di routing in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-140">The Routing Service allows you to do this through the <xref:System.ServiceModel.Routing.RoutingExtension>, which allows you to provide a new RoutingConfiguration during run time.</span></span> <span data-ttu-id="ac0b7-141">La nuova configurazione viene applicata immediatamente, ma influisce solo sulle nuove sessioni elaborate dal servizio di routing.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-141">The new configuration takes effect immediately, but only affects any new sessions processed by the Routing Service.</span></span>  
  
 <span data-ttu-id="ac0b7-142">Per i passaggi necessari per implementare il routing dinamico, vedere [How To: Aggiornamento dinamico](../../../../docs/framework/wcf/feature-details/how-to-dynamic-update.md).</span><span class="sxs-lookup"><span data-stu-id="ac0b7-142">For the steps used to implement dynamic routing, see [How To: Dynamic Update](../../../../docs/framework/wcf/feature-details/how-to-dynamic-update.md).</span></span>
  
### <a name="multicast"></a><span data-ttu-id="ac0b7-143">Multicast</span><span class="sxs-lookup"><span data-stu-id="ac0b7-143">Multicast</span></span>  
 <span data-ttu-id="ac0b7-144">Il routing dei messaggi avviene in genere a uno specifico endpoint di destinazione.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-144">When routing messages, usually you routing each message to one specific destination endpoint.</span></span>  <span data-ttu-id="ac0b7-145">Può tuttavia risultare talvolta necessario indirizzare una copia del messaggio a più endpoint di destinazione.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-145">However, you may occasionally need to route a copy of the message to multiple destination endpoints.</span></span> <span data-ttu-id="ac0b7-146">Per il routing multicast, è necessario che siano soddisfatte le condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="ac0b7-146">To perform multicast routing, the following conditions must be true:</span></span>  
  
- <span data-ttu-id="ac0b7-147">La forma del canale non deve essere di tipo request/reply (tuttavia può essere unidirezionale o duplex), poiché tale forma impone che l'applicazione client debba ricevere una sola risposta alla richiesta.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-147">The channel shape must not be request-reply (though it may be one-way or duplex,) because request-reply mandates that only one reply can be received by the client application in response to the request.</span></span>  
  
- <span data-ttu-id="ac0b7-148">Più filtri devono restituire **true** durante la valutazione del messaggio.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-148">Multiple filters must return **true** when evaluating the message.</span></span>  
  
 <span data-ttu-id="ac0b7-149">Se vengono soddisfatte queste condizioni, ogni endpoint di destinazione associato a un filtro che restituisce true riceverà una copia del messaggio.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-149">If these conditions are met, each destination endpoint that is associated with a filter that returns true will receive a copy of the message.</span></span>  
  
### <a name="protocol-bridging"></a><span data-ttu-id="ac0b7-150">Bridging del protocollo</span><span class="sxs-lookup"><span data-stu-id="ac0b7-150">Protocol Bridging</span></span>  
 <span data-ttu-id="ac0b7-151">Per il routing dei messaggi tra protocolli SOAP diversi, il servizio di routing usa le API WCF per convertire il messaggio da un protocollo all'altro.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-151">When routing messages between dissimilar SOAP protocols, the Routing Service uses WCF APIs to convert the message from one protocol to the other.</span></span> <span data-ttu-id="ac0b7-152">Il bridging viene eseguito automaticamente se l'endpoint servizio esposto dal servizio di routing usa un protocollo diverso rispetto agli endpoint client ai quali vengono indirizzati i messaggi.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-152">This occurs automatically when the service endpoint(s) exposed by the Routing Service use a different protocol than the client endpoint(s) that messages are routed to.</span></span> <span data-ttu-id="ac0b7-153">È possibile disabilitare questo comportamento se i protocolli usati non sono standard; tuttavia, è necessario fornire codice di bridging specifico.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-153">It is possible to disable this behavior if the protocols in use are not standard; however, you must then provide your own bridging code.</span></span>
  
### <a name="error-handling"></a><span data-ttu-id="ac0b7-154">Gestione degli errori</span><span class="sxs-lookup"><span data-stu-id="ac0b7-154">Error Handling</span></span>  
 <span data-ttu-id="ac0b7-155">In un ambiente distribuito non è insolito che si verifichino errori di rete o di comunicazione temporanei.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-155">In a distributed environment, it is not uncommon to encounter transient network or communication failures.</span></span> <span data-ttu-id="ac0b7-156">In assenza di un servizio intermediario quale quello di routing, la gestione di tali errori dipende dall'applicazione client.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-156">Without an intermediary service such as the Routing Service, the burden of handling such failures falls on the client application.</span></span> <span data-ttu-id="ac0b7-157">Se l'applicazione client non include logica specifica per eseguire un nuovo tentativo in caso di errori di rete o di comunicazione e non sono noti indirizzi alternativi, è possibile che un messaggio debba essere inviato più volte affinché possa essere elaborato correttamente dal servizio di destinazione.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-157">If the client application does not include specific logic to retry in the event of network or communication failures and knowledge of alternate locations, the user may encounter scenarios where a message must be submitted multiple times before it is successfully processed by the destination service.</span></span> <span data-ttu-id="ac0b7-158">Ciò può determinare disservizi per i clienti che potrebbero considerare l'applicazione inaffidabile.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-158">This can lead to customer dissatisfaction with the application, as it may be perceived as unreliable.</span></span>  
  
 <span data-ttu-id="ac0b7-159">Il servizio di routing offre affidabili funzionalità di gestione degli errori di rete e di comunicazione allo scopo di rimediare a tali scenari.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-159">The Routing Service attempts to remedy this scenario by providing robust error handling capabilities for messages that encounter network or communication-related failures.</span></span> <span data-ttu-id="ac0b7-160">Creando un elenco di possibili endpoint di destinazione da associare a ogni filtro messaggi, è possibile evitare il singolo punto di errore determinato dalla presenza di un'unica possibile destinazione.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-160">By creating a list of possible destination endpoints and associating this list with each message filter, you remove the single point of failure incurred by having only one possible destination.</span></span> <span data-ttu-id="ac0b7-161">In caso di errore, il servizio di routing tenta di recapitare il messaggio all'endpoint successivo nell'elenco finché l'operazione non ha esito positivo, si verifica un errore non di comunicazione o si esauriscono tutti gli endpoint.</span><span class="sxs-lookup"><span data-stu-id="ac0b7-161">In the event of a failure, the Routing Service will attempt to deliver the message to the next endpoint in the list until the message has been delivered, a non-communication failure occurs, or all endpoints have been exhausted.</span></span>  
  
 <span data-ttu-id="ac0b7-162">Per i passaggi necessari per configurare la gestione degli errori, vedere [How To: Gestione degli errori](../../../../docs/framework/wcf/feature-details/how-to-error-handling.md).</span><span class="sxs-lookup"><span data-stu-id="ac0b7-162">For the steps used to configure error handling, see [How To: Error Handling](../../../../docs/framework/wcf/feature-details/how-to-error-handling.md).</span></span>
  
### <a name="in-this-section"></a><span data-ttu-id="ac0b7-163">In questa sezione</span><span class="sxs-lookup"><span data-stu-id="ac0b7-163">In This Section</span></span>  
 [<span data-ttu-id="ac0b7-164">Procedura: Controllo delle versioni del servizio</span><span class="sxs-lookup"><span data-stu-id="ac0b7-164">How To: Service Versioning</span></span>](../../../../docs/framework/wcf/feature-details/how-to-service-versioning.md)  
  
 [<span data-ttu-id="ac0b7-165">Procedura: Partizionamento dei dati del servizio</span><span class="sxs-lookup"><span data-stu-id="ac0b7-165">How To: Service Data Partitioning</span></span>](../../../../docs/framework/wcf/feature-details/how-to-service-data-partitioning.md)  
  
 [<span data-ttu-id="ac0b7-166">Procedura: Aggiornamento dinamico</span><span class="sxs-lookup"><span data-stu-id="ac0b7-166">How To: Dynamic Update</span></span>](../../../../docs/framework/wcf/feature-details/how-to-dynamic-update.md)  
  
 [<span data-ttu-id="ac0b7-167">Procedura: Gestione degli errori</span><span class="sxs-lookup"><span data-stu-id="ac0b7-167">How To: Error Handling</span></span>](../../../../docs/framework/wcf/feature-details/how-to-error-handling.md)  
  
## <a name="see-also"></a><span data-ttu-id="ac0b7-168">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="ac0b7-168">See also</span></span>

- [<span data-ttu-id="ac0b7-169">Introduzione al routing</span><span class="sxs-lookup"><span data-stu-id="ac0b7-169">Routing Introduction</span></span>](../../../../docs/framework/wcf/feature-details/routing-introduction.md)
