---
title: Informazioni sui cambiamenti di stato
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: a79ed2aa-e49a-47a8-845a-c9f436ec9987
caps.latest.revision: "13"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: ce0d3be43b8e50367d1cdd9b4e486a4154001624
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/22/2017
---
# <a name="understanding-state-changes"></a><span data-ttu-id="8f0b6-102">Informazioni sui cambiamenti di stato</span><span class="sxs-lookup"><span data-stu-id="8f0b6-102">Understanding State Changes</span></span>
<span data-ttu-id="8f0b6-103">In questo argomento vengono descritti gli stati e le transizioni dei canali, i tipi utilizzati per strutturare gli stati dei canali e come implementarli.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-103">This topic discusses the states and transitions that channels have, the types used to structure channel states, and how to implement them.</span></span>  
  
## <a name="state-machines-and-channels"></a><span data-ttu-id="8f0b6-104">Macchine a stati e canali</span><span class="sxs-lookup"><span data-stu-id="8f0b6-104">State Machines and Channels</span></span>  
 <span data-ttu-id="8f0b6-105">Gli oggetti che gestiscono comunicazioni, ad esempio i socket, di solito presentano una macchina a stati le cui transizioni di stato riguardano operazioni quali allocare risorse di rete, stabilire o accettare connessioni, chiudere connessioni e terminare la comunicazione.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-105">Objects that deal with communication, for example sockets, usually present a state machine whose state transitions relate to allocating network resources, making or accepting connections, closing connections and terminating communication.</span></span> <span data-ttu-id="8f0b6-106">La macchina a stati del canale fornisce un modello uniforme degli stati di un oggetto di comunicazione che astrae l'implementazione sottostante di tale oggetto.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-106">The channel state machine provides a uniform model of the states of a communication object that abstracts the underlying implementation of that object.</span></span> <span data-ttu-id="8f0b6-107">L'interfaccia <xref:System.ServiceModel.ICommunicationObject> fornisce un set di stati, nonché di metodi ed eventi di transizione di stato.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-107">The <xref:System.ServiceModel.ICommunicationObject> interface provides a set of states, state transition methods and state transition events.</span></span> <span data-ttu-id="8f0b6-108">Tutti i canali, le factory e i listener di canale implementano la macchina a stati del canale.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-108">All channels, channel factories and channel listeners implement the channel state machine.</span></span>  
  
 <span data-ttu-id="8f0b6-109">Gli eventi Closed, Closing, Faulted, Opened e Opening segnalano a un osservatore esterno che è avvenuta una transizione di stato.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-109">The events Closed, Closing, Faulted, Opened and Opening signal an external observer after a state transition occurs.</span></span>  
  
 <span data-ttu-id="8f0b6-110">I metodi Abort, Close e Open, unitamente ai relativi equivalenti asincroni, causano le transizioni di stato.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-110">The methods Abort, Close, and Open (and their asynchronous equivalents) cause state transitions.</span></span>  
  
 <span data-ttu-id="8f0b6-111">La proprietà State restituisce lo stato corrente, così com'è definito da <xref:System.ServiceModel.CommunicationState>:</span><span class="sxs-lookup"><span data-stu-id="8f0b6-111">The state property returns the current state as defined by <xref:System.ServiceModel.CommunicationState>:</span></span>  
  
## <a name="icommunicationobject-communicationobject-and-states-and-state-transition"></a><span data-ttu-id="8f0b6-112">ICommunicationObject, CommunicationObject, stati e transizioni di stato</span><span class="sxs-lookup"><span data-stu-id="8f0b6-112">ICommunicationObject, CommunicationObject, and States and State Transition</span></span>  
 <span data-ttu-id="8f0b6-113">Un elemento <xref:System.ServiceModel.ICommunicationObject> inizia con lo stato Created nel quale è possibile configurare le relative proprietà.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-113">An <xref:System.ServiceModel.ICommunicationObject> starts out in the Created state where its various properties can be configured.</span></span> <span data-ttu-id="8f0b6-114">Una volta nello stato Opened, l'oggetto è utilizzabile per l'invio e la ricezione di messaggi ma le relative proprietà sono considerate immutabili.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-114">Once in the Opened state, the object is usable for sending and receiving messages but its properties are considered immutable.</span></span> <span data-ttu-id="8f0b6-115">Una volta assunto lo stato Closing, l'oggetto non potrà più elaborare nuove richieste di invio e ricezione, ma è probabile che le richieste esistenti possano essere completate finché non verrà raggiunto il timeout Close.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-115">Once in the Closing state, the object can no longer process new send or receive requests, but existing requests have a chance to complete until the Close timeout is reached.</span></span>  <span data-ttu-id="8f0b6-116">Se si verifica un errore irreversibile, l'oggetto passa allo stato Faulted nel quale può essere controllato per verificare le informazioni relative all'errore e infine chiuso.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-116">If an unrecoverable error occurs, the object transitions to the Faulted state where it can be inspected for information about the error and ultimately closed.</span></span> <span data-ttu-id="8f0b6-117">Quando l'oggetto arriva allo stato Closed essenzialmente raggiunge la fine della macchina a stati.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-117">When in the Closed state the object has essentially reached the end of the state machine.</span></span> <span data-ttu-id="8f0b6-118">Una volta che l'oggetto è passato da uno stato al successivo, non torna più a uno stato precedente.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-118">Once an object transitions from one state to the next, it does not go back to a previous state.</span></span>  
  
 <span data-ttu-id="8f0b6-119">Nel diagramma seguente sono illustrati gli stati e le transizioni di stato di <xref:System.ServiceModel.ICommunicationObject>.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-119">The following diagram shows the <xref:System.ServiceModel.ICommunicationObject> states and state transitions.</span></span> <span data-ttu-id="8f0b6-120">Le transizioni di stato possono essere indotte chiamando uno dei tre metodi seguenti: Abort, Open o Close.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-120">State transitions can be caused by calling one of the three methods: Abort, Open, or Close.</span></span> <span data-ttu-id="8f0b6-121">È inoltre possibile fare in modo che si verifichino chiamando altri metodi specifici dell'implementazione.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-121">They could also be caused by calling other implementation-specific methods.</span></span> <span data-ttu-id="8f0b6-122">Il passaggio allo stato Faulted può avvenire per effetto di errori durante l'apertura o dopo avere aperto l'oggetto di comunicazione.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-122">Transitioning to the Faulted state could happen as a result of errors while opening or after having opened the communication object.</span></span>  
  
 <span data-ttu-id="8f0b6-123">Tutti gli oggetti <xref:System.ServiceModel.ICommunicationObject> iniziano con lo stato Created.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-123">Every <xref:System.ServiceModel.ICommunicationObject> starts out in the Created state.</span></span> <span data-ttu-id="8f0b6-124">In questo stato un'applicazione può configurare l'oggetto impostandone le proprietà.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-124">In this state, an application can configure the object by setting its properties.</span></span> <span data-ttu-id="8f0b6-125">Una volta che l'oggetto ha assunto uno stato diverso da Created, viene considerato immutabile.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-125">Once an object is in a state other than Created, it is considered immutable.</span></span>  
  
 <span data-ttu-id="8f0b6-126">![Canale stato transitition](../../../../docs/framework/wcf/extending/media/channelstatetranitionshighleveldiagram.gif "ChannelStateTranitionsHighLevelDiagram")</span><span class="sxs-lookup"><span data-stu-id="8f0b6-126">![Channel state transitition](../../../../docs/framework/wcf/extending/media/channelstatetranitionshighleveldiagram.gif "ChannelStateTranitionsHighLevelDiagram")</span></span>  
<span data-ttu-id="8f0b6-127">Figura 1.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-127">Figure 1.</span></span> <span data-ttu-id="8f0b6-128">La macchina a stati di ICommunicationObject.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-128">The ICommunicationObject State Machine.</span></span>  
  
 [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]<span data-ttu-id="8f0b6-129"> fornisce una classe di base astratta denominata <xref:System.ServiceModel.Channels.CommunicationObject> che implementa <xref:System.ServiceModel.ICommunicationObject> e la macchina a stati del canale.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-129"> provides an abstract base class named <xref:System.ServiceModel.Channels.CommunicationObject> that implements <xref:System.ServiceModel.ICommunicationObject> and the channel state machine.</span></span> <span data-ttu-id="8f0b6-130">Di seguito è illustrato un diagramma di stato modificato specifico di <xref:System.ServiceModel.Channels.CommunicationObject>.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-130">The following graphic is a modified state diagram that is specific to <xref:System.ServiceModel.Channels.CommunicationObject>.</span></span> <span data-ttu-id="8f0b6-131">Oltre alla macchina a stati <xref:System.ServiceModel.ICommunicationObject>, è indicato l'intervallo in cui vengono richiamati metodi <xref:System.ServiceModel.Channels.CommunicationObject> aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-131">In addition to the <xref:System.ServiceModel.ICommunicationObject> state machine, it shows the timing when additional <xref:System.ServiceModel.Channels.CommunicationObject> methods are invoked.</span></span>  
  
 <span data-ttu-id="8f0b6-132">![Le modifiche di stato](../../../../docs/framework/wcf/extending/media/wcfc-wcfchannelsigure5statetransitionsdetailsc.gif "wcfc_WCFChannelsigure5StateTransitionsDetailsc")</span><span class="sxs-lookup"><span data-stu-id="8f0b6-132">![State changes](../../../../docs/framework/wcf/extending/media/wcfc-wcfchannelsigure5statetransitionsdetailsc.gif "wcfc_WCFChannelsigure5StateTransitionsDetailsc")</span></span>  
<span data-ttu-id="8f0b6-133">Figura 2.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-133">Figure 2.</span></span> <span data-ttu-id="8f0b6-134">Implementazione dell'oggetto CommunicationObject della macchina a stati ICommunicationObject con chiamate a eventi e metodi protetti.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-134">The CommunicationObject implementation of the ICommunicationObject state machine including calls to events and protected methods.</span></span>  
  
### <a name="icommunicationobject-events"></a><span data-ttu-id="8f0b6-135">Eventi ICommunicationObject</span><span class="sxs-lookup"><span data-stu-id="8f0b6-135">ICommunicationObject Events</span></span>  
 <span data-ttu-id="8f0b6-136"><xref:System.ServiceModel.Channels.CommunicationObject> espone i cinque eventi definiti da <xref:System.ServiceModel.ICommunicationObject>.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-136"><xref:System.ServiceModel.Channels.CommunicationObject> exposes the five events defined by <xref:System.ServiceModel.ICommunicationObject>.</span></span> <span data-ttu-id="8f0b6-137">Questi eventi sono progettati per codice che utilizza l'oggetto di comunicazione al quale notificare le transizioni di stato.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-137">These events are designed for code using the communication object to be notified of state transitions.</span></span> <span data-ttu-id="8f0b6-138">Come illustrato nella Figura 2 riportata in precedenza, ogni evento viene generato una volta dopo le transizioni di stato dell'oggetto allo stato denominato dall'evento.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-138">As shown in Figure 2 above, each event is fired once after the object’s state transitions to the state named by the event.</span></span> <span data-ttu-id="8f0b6-139">Tutti e cinque gli eventi sono di tipo `EventHandler` definito come:</span><span class="sxs-lookup"><span data-stu-id="8f0b6-139">All five events are of the `EventHandler` type which is defined as:</span></span>  
  
 `public delegate void EventHandler(object sender, EventArgs e);`  
  
 <span data-ttu-id="8f0b6-140">Nell'implementazione di <xref:System.ServiceModel.Channels.CommunicationObject>, il mittente è <xref:System.ServiceModel.Channels.CommunicationObject> stesso o qualunque altro elemento passato come mittente al costruttore <xref:System.ServiceModel.Channels.CommunicationObject> (se è stato utilizzato l'overload di tale costruttore).</span><span class="sxs-lookup"><span data-stu-id="8f0b6-140">In the <xref:System.ServiceModel.Channels.CommunicationObject> implementation, the sender is either the <xref:System.ServiceModel.Channels.CommunicationObject> itself or whatever was passed in as the sender to the <xref:System.ServiceModel.Channels.CommunicationObject> constructor (if that constructor overload was used).</span></span> <span data-ttu-id="8f0b6-141">Il parametro EventArgs, `e`è sempre `EventArgs.Empty`.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-141">The EventArgs parameter, `e`, is always `EventArgs.Empty`.</span></span>  
  
### <a name="derived-object-callbacks"></a><span data-ttu-id="8f0b6-142">Richiamate a oggetti derivati</span><span class="sxs-lookup"><span data-stu-id="8f0b6-142">Derived Object Callbacks</span></span>  
 <span data-ttu-id="8f0b6-143">Oltre ai cinque eventi, <xref:System.ServiceModel.Channels.CommunicationObject> dichiara otto metodi virtuali protetti, progettati per consentire la richiamata di un oggetto derivato prima e dopo le transizioni di stato.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-143">In addition to the five events, <xref:System.ServiceModel.Channels.CommunicationObject> declares eight protected virtual methods designed to allow a derived object to be called back before and after state transitions occur.</span></span>  
  
 <span data-ttu-id="8f0b6-144">Per i metodi <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A?displayProperty=nameWithType> e <xref:System.ServiceModel.Channels.CommunicationObject.Close%2A?displayProperty=nameWithType> sono disponibili tre richiamate di questo genere associate a ognuno di essi.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-144">The <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A?displayProperty=nameWithType> and <xref:System.ServiceModel.Channels.CommunicationObject.Close%2A?displayProperty=nameWithType> methods have three such callbacks associated with each of them.</span></span> <span data-ttu-id="8f0b6-145">Ad esempio, al metodo <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A?displayProperty=nameWithType> corrispondono <xref:System.ServiceModel.Channels.CommunicationObject.OnOpening%2A?displayProperty=nameWithType>, <xref:System.ServiceModel.Channels.CommunicationObject.OnOpen%2A?displayProperty=nameWithType> e <xref:System.ServiceModel.Channels.CommunicationObject.OnOpened%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-145">For example, corresponding to <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A?displayProperty=nameWithType> there is <xref:System.ServiceModel.Channels.CommunicationObject.OnOpening%2A?displayProperty=nameWithType>, <xref:System.ServiceModel.Channels.CommunicationObject.OnOpen%2A?displayProperty=nameWithType>, and <xref:System.ServiceModel.Channels.CommunicationObject.OnOpened%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="8f0b6-146">Al metodo <xref:System.ServiceModel.Channels.CommunicationObject.Close%2A?displayProperty=nameWithType> si associano <xref:System.ServiceModel.Channels.CommunicationObject.OnClose%2A?displayProperty=nameWithType>, <xref:System.ServiceModel.Channels.CommunicationObject.OnClosing%2A?displayProperty=nameWithType> e <xref:System.ServiceModel.Channels.CommunicationObject.OnClosed%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-146">Associated with <xref:System.ServiceModel.Channels.CommunicationObject.Close%2A?displayProperty=nameWithType> are the <xref:System.ServiceModel.Channels.CommunicationObject.OnClose%2A?displayProperty=nameWithType>, <xref:System.ServiceModel.Channels.CommunicationObject.OnClosing%2A?displayProperty=nameWithType>, and <xref:System.ServiceModel.Channels.CommunicationObject.OnClosed%2A?displayProperty=nameWithType> methods.</span></span>  
  
 <span data-ttu-id="8f0b6-147">Analogamente, il metodo <xref:System.ServiceModel.Channels.CommunicationObject.Abort%2A?displayProperty=nameWithType> ha come corrispondente <xref:System.ServiceModel.Channels.CommunicationObject.OnAbort%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-147">Similarly, the <xref:System.ServiceModel.Channels.CommunicationObject.Abort%2A?displayProperty=nameWithType> method has a corresponding <xref:System.ServiceModel.Channels.CommunicationObject.OnAbort%2A?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="8f0b6-148">Mentre per <xref:System.ServiceModel.Channels.CommunicationObject.OnOpen%2A?displayProperty=nameWithType>, <xref:System.ServiceModel.Channels.CommunicationObject.OnClose%2A?displayProperty=nameWithType>e <xref:System.ServiceModel.Channels.CommunicationObject.OnAbort%2A?displayProperty=nameWithType> non è disponibile un'implementazione predefinita, per le altre richiamate ne è disponibile una, necessaria per la correttezza della macchina a stati.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-148">While <xref:System.ServiceModel.Channels.CommunicationObject.OnOpen%2A?displayProperty=nameWithType>, <xref:System.ServiceModel.Channels.CommunicationObject.OnClose%2A?displayProperty=nameWithType>, and <xref:System.ServiceModel.Channels.CommunicationObject.OnAbort%2A?displayProperty=nameWithType> have no default implementation, the other callbacks do have a default implementation which is necessary for state machine correctness.</span></span> <span data-ttu-id="8f0b6-149">Se si esegue l'override di questi metodi, assicurarsi di chiamare l'implementazione di base o di sostituirla correttamente.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-149">If you override those methods be sure to call the base implementation or correctly replace it.</span></span>  
  
 <span data-ttu-id="8f0b6-150"><xref:System.ServiceModel.Channels.CommunicationObject.OnOpening%2A?displayProperty=nameWithType>, <xref:System.ServiceModel.Channels.CommunicationObject.OnClosing%2A?displayProperty=nameWithType> e <xref:System.ServiceModel.Channels.CommunicationObject.OnFaulted%2A?displayProperty=nameWithType> generano gli eventi <xref:System.ServiceModel.Channels.CommunicationObject.Opening?displayProperty=nameWithType>, <xref:System.ServiceModel.Channels.CommunicationObject.Closing?displayProperty=nameWithType> e <xref:System.ServiceModel.Channels.CommunicationObject.Faulted?displayProperty=nameWithType> corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-150"><xref:System.ServiceModel.Channels.CommunicationObject.OnOpening%2A?displayProperty=nameWithType>, <xref:System.ServiceModel.Channels.CommunicationObject.OnClosing%2A?displayProperty=nameWithType> and <xref:System.ServiceModel.Channels.CommunicationObject.OnFaulted%2A?displayProperty=nameWithType> fire the corresponding <xref:System.ServiceModel.Channels.CommunicationObject.Opening?displayProperty=nameWithType>, <xref:System.ServiceModel.Channels.CommunicationObject.Closing?displayProperty=nameWithType> and <xref:System.ServiceModel.Channels.CommunicationObject.Faulted?displayProperty=nameWithType> events.</span></span> <span data-ttu-id="8f0b6-151"><xref:System.ServiceModel.Channels.CommunicationObject.OnOpened%2A?displayProperty=nameWithType> e <xref:System.ServiceModel.Channels.CommunicationObject.OnClosed%2A?displayProperty=nameWithType> impostano rispettivamente lo stato dell'oggetto su Opened e su Closed, quindi generano gli eventi <xref:System.ServiceModel.Channels.CommunicationObject.Opened?displayProperty=nameWithType> e <xref:System.ServiceModel.Channels.CommunicationObject.Closed?displayProperty=nameWithType> corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-151"><xref:System.ServiceModel.Channels.CommunicationObject.OnOpened%2A?displayProperty=nameWithType> and <xref:System.ServiceModel.Channels.CommunicationObject.OnClosed%2A?displayProperty=nameWithType> set the object state to Opened and Closed respectively then fire the corresponding <xref:System.ServiceModel.Channels.CommunicationObject.Opened?displayProperty=nameWithType> and <xref:System.ServiceModel.Channels.CommunicationObject.Closed?displayProperty=nameWithType> events.</span></span>  
  
### <a name="state-transition-methods"></a><span data-ttu-id="8f0b6-152">Metodi delle transizioni di stato</span><span class="sxs-lookup"><span data-stu-id="8f0b6-152">State Transition Methods</span></span>  
 <span data-ttu-id="8f0b6-153">L'oggetto <xref:System.ServiceModel.Channels.CommunicationObject> fornisce le implementazioni di Abort, Close e Open</span><span class="sxs-lookup"><span data-stu-id="8f0b6-153"><xref:System.ServiceModel.Channels.CommunicationObject> provides implementations of Abort, Close and Open.</span></span> <span data-ttu-id="8f0b6-154">oltre a un metodo Fault che causa la transizione dello stato a Faulted.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-154">It also provides a Fault method which causes a state transition to the Faulted state.</span></span> <span data-ttu-id="8f0b6-155">Nella Figura 2 è illustrata la macchina a stati di <xref:System.ServiceModel.ICommunicationObject> unitamente a ogni transizione identificata dal metodo che la provoca (nell'implementazione del metodo che causa l'ultima transizione con etichetta si verificano transizioni senza etichetta).</span><span class="sxs-lookup"><span data-stu-id="8f0b6-155">Figure 2 shows the <xref:System.ServiceModel.ICommunicationObject> state machine with each transition labeled by the method that causes it (unlabeled transitions happen inside the implementation of the method that caused the last labeled transition).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8f0b6-156">Tutte le implementazioni <xref:System.ServiceModel.Channels.CommunicationObject> dello stato della comunicazione get/set sono sincronizzate in base al thread.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-156">All <xref:System.ServiceModel.Channels.CommunicationObject> implementations of communication state gets/sets are thread-synchronized.</span></span>  
  
 <span data-ttu-id="8f0b6-157">Costruttore</span><span class="sxs-lookup"><span data-stu-id="8f0b6-157">Constructor</span></span>  
  
 <span data-ttu-id="8f0b6-158">L'elemento <xref:System.ServiceModel.Channels.CommunicationObject> fornisce tre costruttori che lasciano tutti l'oggetto nello stato Created.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-158"><xref:System.ServiceModel.Channels.CommunicationObject> provides three constructors, all of which leave the object in the Created state.</span></span> <span data-ttu-id="8f0b6-159">I costruttori sono definiti come segue:</span><span class="sxs-lookup"><span data-stu-id="8f0b6-159">The constructors are defined as:</span></span>  
  
 <span data-ttu-id="8f0b6-160">Il primo è un costruttore predefinito che delega all'overload del costruttore che utilizza un oggetto:</span><span class="sxs-lookup"><span data-stu-id="8f0b6-160">The first constructor is a default constructor that delegates to the constructor overload that takes an object:</span></span>  
  
 `protected CommunicationObject() : this(new object()) { … }`  
  
 <span data-ttu-id="8f0b6-161">Il costruttore che riprende un oggetto utilizza tale parametro come oggetto da bloccare durante la sincronizzazione dell'accesso allo stato dell'oggetto di comunicazione:</span><span class="sxs-lookup"><span data-stu-id="8f0b6-161">The constructor that takes an object uses that parameter as the object to be locked when synchronizing access to communication object state:</span></span>  
  
 `protected CommunicationObject(object mutex) { … }`  
  
 <span data-ttu-id="8f0b6-162">Infine il terzo costruttore riprende un parametro aggiuntivo utilizzato come argomento del mittente quando vengono generati eventi <xref:System.ServiceModel.ICommunicationObject>.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-162">Finally, a third constructor takes an additional parameter that is used as the sender argument when <xref:System.ServiceModel.ICommunicationObject> events are fired.</span></span>  
  
 `protected CommunicationObject(object mutex, object eventSender) { … }`  
  
 <span data-ttu-id="8f0b6-163">I due costruttori precedenti impostano il mittente in questo modo.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-163">The previous two constructors set the sender to this.</span></span>  
  
 <span data-ttu-id="8f0b6-164">Metodo Open</span><span class="sxs-lookup"><span data-stu-id="8f0b6-164">Open Method</span></span>  
  
 <span data-ttu-id="8f0b6-165">Precondizione: lo stato è Created.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-165">Precondition: State is Created.</span></span>  
  
 <span data-ttu-id="8f0b6-166">Postcondizione: lo stato è Opened o Faulted.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-166">Post-condition: State is Opened or Faulted.</span></span> <span data-ttu-id="8f0b6-167">Può generare un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-167">May throw an exception.</span></span>  
  
 <span data-ttu-id="8f0b6-168">Il metodo Open() tenterà di aprire l'oggetto di comunicazione e impostare lo stato su Opened.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-168">The Open() method will try to open the communication object and set the state to Opened.</span></span> <span data-ttu-id="8f0b6-169">Se incontra un errore, imposterà lo stato su Faulted.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-169">If it encounters an error, it will set the state to Faulted.</span></span>  
  
 <span data-ttu-id="8f0b6-170">Il metodo prima controlla che lo stato corrente sia Created.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-170">The method first checks that the current state is Created.</span></span> <span data-ttu-id="8f0b6-171">Se lo stato corrente è Opening o Opened genera un'eccezione <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-171">If the current state is Opening or Opened it throws an <xref:System.InvalidOperationException>.</span></span> <span data-ttu-id="8f0b6-172">Se lo stato corrente è Closing o Closed, genera un'eccezione <xref:System.ServiceModel.CommunicationObjectAbortedException> se l'oggetto è stato terminato e, in caso contrario, l'eccezione <xref:System.ObjectDisposedException>.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-172">If the current state is Closing or Closed, it throws a <xref:System.ServiceModel.CommunicationObjectAbortedException> if the object has been terminated and <xref:System.ObjectDisposedException> otherwise.</span></span> <span data-ttu-id="8f0b6-173">Se lo stato corrente è Faulted, genera un'eccezione <xref:System.ServiceModel.CommunicationObjectFaultedException>.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-173">If the current state is Faulted, it throws a <xref:System.ServiceModel.CommunicationObjectFaultedException>.</span></span>  
  
 <span data-ttu-id="8f0b6-174">Imposta quindi lo stato su Opening e chiama OnOpening() (che genera l'evento Opening), OnOpen() e OnOpened(), nell'ordine specificato.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-174">It then sets the state to Opening and calls OnOpening() (which raises the Opening event), OnOpen() and OnOpened() in that order.</span></span> <span data-ttu-id="8f0b6-175">OnOpened() imposta lo stato su Opened e genera l'evento Opened.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-175">OnOpened() sets the state to Opened and raises the Opened event.</span></span> <span data-ttu-id="8f0b6-176">Se uno di questi elementi genera un'eccezione, Open() chiama Fault() e consente all'eccezione di emergere.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-176">If any of these throws an exception, Open()calls Fault() and lets the exception bubble up.</span></span> <span data-ttu-id="8f0b6-177">Nel diagramma seguente il processo Open è illustrato più dettagliatamente.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-177">The following diagram shows the Open process in more detail.</span></span>  
  
 <span data-ttu-id="8f0b6-178">![Le modifiche di stato](../../../../docs/framework/wcf/extending/media/wcfc-wcfchannelsigurecoopenflowchartf.gif "wcfc_WCFChannelsigureCOOpenFlowChartf")</span><span class="sxs-lookup"><span data-stu-id="8f0b6-178">![State changes](../../../../docs/framework/wcf/extending/media/wcfc-wcfchannelsigurecoopenflowchartf.gif "wcfc_WCFChannelsigureCOOpenFlowChartf")</span></span>  
<span data-ttu-id="8f0b6-179">Eseguire l'override del metodo OnOpen per implementare logica di apertura personalizzata, quale l'apertura di un oggetto di comunicazione interno.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-179">Override the OnOpen method to implement custom open logic such as opening an inner communication object.</span></span>  
  
 <span data-ttu-id="8f0b6-180">Metodo Close</span><span class="sxs-lookup"><span data-stu-id="8f0b6-180">Close Method</span></span>  
  
 <span data-ttu-id="8f0b6-181">Precondizione: nessuna.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-181">Precondition: None.</span></span>  
  
 <span data-ttu-id="8f0b6-182">Postcondizione: lo stato è Closed.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-182">Post-condition: State is Closed.</span></span> <span data-ttu-id="8f0b6-183">Può generare un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-183">May throw an exception.</span></span>  
  
 <span data-ttu-id="8f0b6-184">Il metodo Close() può essere chiamato a qualsiasi stato.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-184">The Close() method can be called at any state.</span></span> <span data-ttu-id="8f0b6-185">Tenta di chiudere l'oggetto normalmente.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-185">It tries to close the object normally.</span></span> <span data-ttu-id="8f0b6-186">Se viene rilevato un errore, l'oggetto viene terminato.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-186">If an error is encountered, it terminates the object.</span></span> <span data-ttu-id="8f0b6-187">Il metodo non esegue alcuna operazione se lo stato corrente è Closing o Closed.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-187">The method does nothing if the current state is Closing or Closed.</span></span> <span data-ttu-id="8f0b6-188">In caso contrario imposta lo stato su Closing.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-188">Otherwise it sets the state to Closing.</span></span> <span data-ttu-id="8f0b6-189">Se lo stato originale era Created, Opening o Faulted, chiama Abort() (vedere il diagramma seguente).</span><span class="sxs-lookup"><span data-stu-id="8f0b6-189">If the original state was Created, Opening or Faulted, it calls Abort() (see the following diagram).</span></span> <span data-ttu-id="8f0b6-190">Se lo stato originale era Opened, chiama OnClosing() (che genera l'evento Closing), OnClose() e OnClosed(), nell'ordine specificato.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-190">If the original state was Opened, it calls OnClosing() (which raises the Closing event), OnClose() and OnClosed() in that order.</span></span> <span data-ttu-id="8f0b6-191">Se alcuni di questi elementi generano eccezioni, Close() chiama Abort() e consente all'eccezione di emergere.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-191">If any of these throws an exception, Close()calls Abort() and lets the exception bubble up.</span></span> <span data-ttu-id="8f0b6-192">OnClosed() imposta lo stato su Closed e genera l'evento Closed.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-192">OnClosed() sets the state to Closed and raises the Closed event.</span></span> <span data-ttu-id="8f0b6-193">Nel diagramma seguente il processo Close è illustrato più dettagliatamente.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-193">The following diagram shows the Close process in more detail.</span></span>  
  
 <span data-ttu-id="8f0b6-194">![Le modifiche di stato](../../../../docs/framework/wcf/extending/media/wcfc-wcfchannelsguire7ico-closeflowchartc.gif "wcfc_WCFChannelsguire7ICO CloseFlowChartc")</span><span class="sxs-lookup"><span data-stu-id="8f0b6-194">![State changes](../../../../docs/framework/wcf/extending/media/wcfc-wcfchannelsguire7ico-closeflowchartc.gif "wcfc_WCFChannelsguire7ICO-CloseFlowChartc")</span></span>  
<span data-ttu-id="8f0b6-195">Eseguire l'override del metodo OnClose per implementare logica di chiusura personalizzata, quale la chiusura di un oggetto di comunicazione interno.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-195">Override the OnClose method to implement custom close logic, such as closing an inner communication object.</span></span> <span data-ttu-id="8f0b6-196">Tutta la logica di chiusura corretta che può bloccarsi a lungo (ad esempio, in attesa della risposta dell'altro lato) deve essere implementata in OnClose() perché utilizza un parametro di timeout e perché non viene chiamata come parte Abort().</span><span class="sxs-lookup"><span data-stu-id="8f0b6-196">All graceful closing logic that may block for a long time (for example, waiting for the other side to respond) should be implemented in OnClose() because it takes a timeout parameter and because it is not called as part of Abort().</span></span>  
  
 <span data-ttu-id="8f0b6-197">Abort</span><span class="sxs-lookup"><span data-stu-id="8f0b6-197">Abort</span></span>  
  
 <span data-ttu-id="8f0b6-198">Precondizione: nessuna.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-198">Precondition: None.</span></span>  
<span data-ttu-id="8f0b6-199">Postcondizione: lo stato è Closed.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-199">Post-condition: State is Closed.</span></span> <span data-ttu-id="8f0b6-200">Può generare un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-200">May throw an exception.</span></span>  
  
 <span data-ttu-id="8f0b6-201">Il metodo Abort() non esegue alcuna operazione se lo stato corrente è Closed o se l'oggetto è stato terminato in precedenza, facendo ad esempio in modo che Abort() venisse eseguito su un altro thread.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-201">The Abort() method does nothing if the current state is Closed or if the object has been terminated before (for example, possibly by having Abort() executing on another thread).</span></span> <span data-ttu-id="8f0b6-202">In caso contrario imposta lo stato su Closing e chiama OnClosing() (che genera l'evento Closing), OnAbort() e OnClosed(), nell'ordine specificato, senza chiamare OnClose perché l'oggetto sta per essere terminato, non chiuso.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-202">Otherwise it sets the state to Closing and calls OnClosing() (which raises the Closing event), OnAbort(), and OnClosed() in that order (does not call OnClose because the object is being terminated, not closed).</span></span> <span data-ttu-id="8f0b6-203">OnClosed() imposta lo stato su Closed e genera l'evento Closed.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-203">OnClosed() sets the state to Closed and raises the Closed event.</span></span> <span data-ttu-id="8f0b6-204">Se uno di questi elementi genera un'eccezione, l'eccezione viene generata nuovamente al chiamante di Abort.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-204">If any of these throw an exception, it is re-thrown to the caller of Abort.</span></span> <span data-ttu-id="8f0b6-205">Le implementazioni di OnClosing(), OnClosed() e OnAbort() non si devono bloccare, ad esempio su input/output.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-205">Implementations of OnClosing(), OnClosed() and OnAbort() should not block (for example, on input/output).</span></span> <span data-ttu-id="8f0b6-206">Nel diagramma seguente il processo Abort è illustrato più dettagliatamente.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-206">The following diagram shows the Abort process in more detail.</span></span>  
  
 <span data-ttu-id="8f0b6-207">![Le modifiche di stato](../../../../docs/framework/wcf/extending/media/wcfc-wcfchannelsigure8ico-abortflowchartc.gif "wcfc_WCFChannelsigure8ICO AbortFlowChartc")</span><span class="sxs-lookup"><span data-stu-id="8f0b6-207">![State changes](../../../../docs/framework/wcf/extending/media/wcfc-wcfchannelsigure8ico-abortflowchartc.gif "wcfc_WCFChannelsigure8ICO-AbortFlowChartc")</span></span>  
<span data-ttu-id="8f0b6-208">Eseguire l'override del metodo OnAbort per implementare logica di terminazione personalizzata, quale la terminazione di un oggetto di comunicazione interno.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-208">Override the OnAbort method to implement custom terminate logic such as terminating an inner communication object.</span></span>  
  
 <span data-ttu-id="8f0b6-209">Fault</span><span class="sxs-lookup"><span data-stu-id="8f0b6-209">Fault</span></span>  
  
 <span data-ttu-id="8f0b6-210">Il metodo Fault è specifico di <xref:System.ServiceModel.Channels.CommunicationObject> e non fa parte dell'interfaccia <xref:System.ServiceModel.ICommunicationObject>.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-210">The Fault method is specific to <xref:System.ServiceModel.Channels.CommunicationObject> and is not part of the <xref:System.ServiceModel.ICommunicationObject> interface.</span></span> <span data-ttu-id="8f0b6-211">È incluso in questa sede per motivi di completezza.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-211">It is included here for completeness.</span></span>  
  
 <span data-ttu-id="8f0b6-212">Precondizione: nessuna.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-212">Precondition: None.</span></span>  
  
 <span data-ttu-id="8f0b6-213">Postcondizione: lo stato è Faulted.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-213">Post-condition: State is Faulted.</span></span> <span data-ttu-id="8f0b6-214">Può generare un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-214">May throw an exception.</span></span>  
  
 <span data-ttu-id="8f0b6-215">Il metodo Fault() non esegue alcuna operazione se lo stato corrente è Faulted o Closed.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-215">The Fault() method does nothing if the current state is Faulted or Closed.</span></span> <span data-ttu-id="8f0b6-216">In caso contrario imposta lo stato su Faulted e chiama OnFaulted() che genera l'evento Faulted.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-216">Otherwise it sets the state to Faulted and call OnFaulted(), which raises the Faulted event.</span></span> <span data-ttu-id="8f0b6-217">Se OnFaulted genera un'eccezione, l'eccezione viene generata nuovamente.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-217">If OnFaulted throws an exception it is re-thrown.</span></span>  
  
### <a name="throwifxxx-methods"></a><span data-ttu-id="8f0b6-218">Metodi ThrowIfXxx</span><span class="sxs-lookup"><span data-stu-id="8f0b6-218">ThrowIfXxx Methods</span></span>  
 <span data-ttu-id="8f0b6-219">CommunicationObject dispone di tre metodi protetti che possono essere utilizzati per generare eccezioni se l'oggetto è in un stato specifico.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-219">CommunicationObject has three protected methods that can be used to throw exceptions if the object is in a specific state.</span></span>  
  
 <span data-ttu-id="8f0b6-220"><xref:System.ServiceModel.Channels.CommunicationObject.ThrowIfDisposed%2A> genera un'eccezione se lo stato è Closing, Closed o Faulted.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-220"><xref:System.ServiceModel.Channels.CommunicationObject.ThrowIfDisposed%2A> throws an exception if the state is Closing, Closed or Faulted.</span></span>  
  
 <span data-ttu-id="8f0b6-221"><xref:System.ServiceModel.Channels.CommunicationObject.ThrowIfDisposedOrImmutable%2A> genera un'eccezione se lo stato non è Created.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-221"><xref:System.ServiceModel.Channels.CommunicationObject.ThrowIfDisposedOrImmutable%2A> throws an exception if the state is not Created.</span></span>  
  
 <span data-ttu-id="8f0b6-222"><xref:System.ServiceModel.Channels.CommunicationObject.ThrowIfDisposedOrNotOpen%2A> genera un'eccezione se lo stato non è Opened.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-222"><xref:System.ServiceModel.Channels.CommunicationObject.ThrowIfDisposedOrNotOpen%2A> throws an exception if the state is not Opened.</span></span>  
  
 <span data-ttu-id="8f0b6-223">Le eccezioni generate dipendono dallo stato.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-223">The exceptions thrown depend on the state.</span></span> <span data-ttu-id="8f0b6-224">Nella tabella seguente sono illustrati i diversi stati e il tipo di eccezione corrispondente generata chiamando un elemento ThrowIfXxx che la genera per quello stato.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-224">The following table shows the different states and the corresponding exception type thrown by calling a ThrowIfXxx that throws on that state.</span></span>  
  
|<span data-ttu-id="8f0b6-225">Stato</span><span class="sxs-lookup"><span data-stu-id="8f0b6-225">State</span></span>|<span data-ttu-id="8f0b6-226">È stato chiamato Abort?</span><span class="sxs-lookup"><span data-stu-id="8f0b6-226">Has Abort been called?</span></span>|<span data-ttu-id="8f0b6-227">Eccezione</span><span class="sxs-lookup"><span data-stu-id="8f0b6-227">Exception</span></span>|  
|-----------|----------------------------|---------------|  
|<span data-ttu-id="8f0b6-228">Creato</span><span class="sxs-lookup"><span data-stu-id="8f0b6-228">Created</span></span>|<span data-ttu-id="8f0b6-229">N/D</span><span class="sxs-lookup"><span data-stu-id="8f0b6-229">N/A</span></span>|<xref:System.InvalidOperationException?displayProperty=nameWithType>|  
|<span data-ttu-id="8f0b6-230">Apertura</span><span class="sxs-lookup"><span data-stu-id="8f0b6-230">Opening</span></span>|<span data-ttu-id="8f0b6-231">N/D</span><span class="sxs-lookup"><span data-stu-id="8f0b6-231">N/A</span></span>|<xref:System.InvalidOperationException?displayProperty=nameWithType>|  
|<span data-ttu-id="8f0b6-232">Opened</span><span class="sxs-lookup"><span data-stu-id="8f0b6-232">Opened</span></span>|<span data-ttu-id="8f0b6-233">N/D</span><span class="sxs-lookup"><span data-stu-id="8f0b6-233">N/A</span></span>|<xref:System.InvalidOperationException?displayProperty=nameWithType>|  
|<span data-ttu-id="8f0b6-234">Closing</span><span class="sxs-lookup"><span data-stu-id="8f0b6-234">Closing</span></span>|<span data-ttu-id="8f0b6-235">Yes</span><span class="sxs-lookup"><span data-stu-id="8f0b6-235">Yes</span></span>|<xref:System.ServiceModel.CommunicationObjectAbortedException?displayProperty=nameWithType>|  
|<span data-ttu-id="8f0b6-236">Closing</span><span class="sxs-lookup"><span data-stu-id="8f0b6-236">Closing</span></span>|<span data-ttu-id="8f0b6-237">No</span><span class="sxs-lookup"><span data-stu-id="8f0b6-237">No</span></span>|<xref:System.ObjectDisposedException?displayProperty=nameWithType>|  
|<span data-ttu-id="8f0b6-238">Chiuso</span><span class="sxs-lookup"><span data-stu-id="8f0b6-238">Closed</span></span>|<span data-ttu-id="8f0b6-239">Yes</span><span class="sxs-lookup"><span data-stu-id="8f0b6-239">Yes</span></span>|<span data-ttu-id="8f0b6-240"><xref:System.ServiceModel.CommunicationObjectAbortedException?displayProperty=nameWithType> nel caso un oggetto sia stato chiuso da una chiamata precedente ed esplicita ad Abort.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-240"><xref:System.ServiceModel.CommunicationObjectAbortedException?displayProperty=nameWithType> in the case that an object was closed by a previous and explicit call of Abort.</span></span> <span data-ttu-id="8f0b6-241">Se si chiama Close per l'oggetto, viene generata un'eccezione <xref:System.ObjectDisposedException?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-241">If you call Close on the object then an <xref:System.ObjectDisposedException?displayProperty=nameWithType> is thrown.</span></span>|  
|<span data-ttu-id="8f0b6-242">Chiuso</span><span class="sxs-lookup"><span data-stu-id="8f0b6-242">Closed</span></span>|<span data-ttu-id="8f0b6-243">No</span><span class="sxs-lookup"><span data-stu-id="8f0b6-243">No</span></span>|<xref:System.ObjectDisposedException?displayProperty=nameWithType>|  
|<span data-ttu-id="8f0b6-244">Non riuscito</span><span class="sxs-lookup"><span data-stu-id="8f0b6-244">Faulted</span></span>|<span data-ttu-id="8f0b6-245">N/D</span><span class="sxs-lookup"><span data-stu-id="8f0b6-245">N/A</span></span>|<xref:System.ServiceModel.CommunicationObjectFaultedException?displayProperty=nameWithType>|  
  
### <a name="timeouts"></a><span data-ttu-id="8f0b6-246">Timeout</span><span class="sxs-lookup"><span data-stu-id="8f0b6-246">Timeouts</span></span>  
 <span data-ttu-id="8f0b6-247">Molti dei metodi di cui si è parlato accettano parametri di timeout.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-247">Several of the methods we discussed take timeout parameters.</span></span> <span data-ttu-id="8f0b6-248">Questi metodi sono Close, Open (alcuni overload e versioni asincrone), OnClose e OnOpen.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-248">These are Close, Open (certain overloads and asynchronous versions), OnClose and OnOpen.</span></span> <span data-ttu-id="8f0b6-249">Sono progettati in modo da consentire operazioni lunghe (ad esempio, bloccandosi su input/output e chiudendo normalmente una connessione), pertanto il parametro di timeout indica per quanto tempo possono essere eseguite tali operazioni prima di essere interrotte.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-249">These methods are designed to allow for lengthy operations (for example, blocking on input/output while gracefully closing down a connection) so the timeout parameter indicates how long such operations can take before being interrupted.</span></span> <span data-ttu-id="8f0b6-250">Le implementazioni di alcuni di questi metodi devono utilizzare il valore di timeout fornito per assicurare il ritorno al chiamante entro il timeout.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-250">Implementations of any of these methods should use the supplied timeout value to ensure it returns to the caller within that timeout.</span></span> <span data-ttu-id="8f0b6-251">Le implementazioni di altri metodi che non utilizzano un timeout non sono progettate per operazioni lunghe e non devono bloccarsi su input/output.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-251">Implementations of other methods that do not take a timeout are not designed for lengthy operations and should not block on input/output.</span></span>  
  
 <span data-ttu-id="8f0b6-252">Fanno eccezione gli overload di Open() e Close() che non accettano timeout,</span><span class="sxs-lookup"><span data-stu-id="8f0b6-252">The exception are the Open() and Close() overloads that do not take a timeout.</span></span> <span data-ttu-id="8f0b6-253">ma utilizzano un valore di timeout predefinito fornito dalla classe derivata.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-253">These use a default timeout value supplied by the derived class.</span></span> <span data-ttu-id="8f0b6-254"><xref:System.ServiceModel.Channels.CommunicationObject> espone due proprietà astratte protette, denominate <xref:System.ServiceModel.Channels.CommunicationObject.DefaultCloseTimeout%2A> e <xref:System.ServiceModel.Channels.CommunicationObject.DefaultOpenTimeout%2A>, definite come segue:</span><span class="sxs-lookup"><span data-stu-id="8f0b6-254"><xref:System.ServiceModel.Channels.CommunicationObject> exposes two protected abstract properties named <xref:System.ServiceModel.Channels.CommunicationObject.DefaultCloseTimeout%2A> and <xref:System.ServiceModel.Channels.CommunicationObject.DefaultOpenTimeout%2A> defined as:</span></span>  
  
 `protected abstract TimeSpan DefaultCloseTimeout { get; }`  
  
 `protected abstract TimeSpan DefaultOpenTimeout { get; }`  
  
 <span data-ttu-id="8f0b6-255">Una classe derivata implementa queste proprietà per fornire il timeout predefinito per gli overload di Open() e Close() che non accettano un valore di timeout.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-255">A derived class implements these properties to provide the default timeout for the Open() and Close() overloads that do not take a timeout value.</span></span> <span data-ttu-id="8f0b6-256">Le implementazioni di Open() e Close() delegano all'overload che accetta un timeout, passandogli il valore di timeout predefinito, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="8f0b6-256">Then the Open() and Close() implementations delegate to the overload that takes a timeout passing it the default timeout value, for example:</span></span>  
  
 `public void Open()`  
  
 `{`  
  
 `this.Open(this.DefaultOpenTimeout);`  
  
 `}`  
  
#### <a name="idefaultcommunicationtimeouts"></a><span data-ttu-id="8f0b6-257">IDefaultCommunicationTimeouts</span><span class="sxs-lookup"><span data-stu-id="8f0b6-257">IDefaultCommunicationTimeouts</span></span>  
 <span data-ttu-id="8f0b6-258">Questa interfaccia dispone di quattro proprietà di sola lettura per fornire valori di timeout predefiniti per apertura, invio, ricezione e chiusura.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-258">This interface has four read-only properties for providing default timeout values for open, send, receive, and close.</span></span> <span data-ttu-id="8f0b6-259">Ogni implementazione è responsabile di ottenere i valori predefiniti in qualsiasi modo, purché adatto allo scopo.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-259">Each implementation is responsible for obtaining the default values in whatever manner appropriate.</span></span> <span data-ttu-id="8f0b6-260">Per convenzione, <xref:System.ServiceModel.Channels.ChannelFactoryBase> e <xref:System.ServiceModel.Channels.ChannelListenerBase> impostano questi valori su 1 minuto come valore predefinito.</span><span class="sxs-lookup"><span data-stu-id="8f0b6-260">As a convenience, <xref:System.ServiceModel.Channels.ChannelFactoryBase> and <xref:System.ServiceModel.Channels.ChannelListenerBase> default these values to 1 minute each.</span></span>
