---
title: Creazione di associazioni definite dall'utente
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: user-defined bindings [WCF]
ms.assetid: c4960675-d701-4bc9-b400-36a752fdd08b
caps.latest.revision: "19"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: fe9be6ed74569875fd26f9a4913756e0366d757a
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/22/2017
---
# <a name="creating-user-defined-bindings"></a><span data-ttu-id="50624-102">Creazione di associazioni definite dall'utente</span><span class="sxs-lookup"><span data-stu-id="50624-102">Creating User-Defined Bindings</span></span>
<span data-ttu-id="50624-103">Esistono diversi modi per creare associazioni non fornite dal sistema:</span><span class="sxs-lookup"><span data-stu-id="50624-103">There are several ways to create bindings not provided by the system:</span></span>  
  
-   <span data-ttu-id="50624-104">Creare un'associazione personalizzata, basata sulla classe <xref:System.ServiceModel.Channels.CustomBinding>, che è un contenitore riempito con elementi di associazione.</span><span class="sxs-lookup"><span data-stu-id="50624-104">Create a custom binding, based on the <xref:System.ServiceModel.Channels.CustomBinding> class, which is a container that you fill with binding elements.</span></span> <span data-ttu-id="50624-105">L'associazione personalizzata viene quindi aggiunta a un endpoint del servizio.</span><span class="sxs-lookup"><span data-stu-id="50624-105">The custom binding is then added to a service endpoint.</span></span> <span data-ttu-id="50624-106">È possibile creare l'associazione personalizzata a livello di programmazione o in un file di configurazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="50624-106">You can create the custom binding either programmatically or in an application configuration file.</span></span> <span data-ttu-id="50624-107">Per usare un elemento di associazione da un file di configurazione dell'applicazione, è necessario che l'elemento di associazione estenda <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span><span class="sxs-lookup"><span data-stu-id="50624-107">To use a binding element from an application configuration file, the binding element must extend <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="50624-108">associazioni personalizzate, vedere [associazioni personalizzate](../../../../docs/framework/wcf/extending/custom-bindings.md) e <xref:System.ServiceModel.Channels.CustomBinding>.</span><span class="sxs-lookup"><span data-stu-id="50624-108"> custom bindings, see [Custom Bindings](../../../../docs/framework/wcf/extending/custom-bindings.md) and <xref:System.ServiceModel.Channels.CustomBinding>.</span></span>  
  
-   <span data-ttu-id="50624-109">È possibile creare una classe derivata da un'associazione standard.</span><span class="sxs-lookup"><span data-stu-id="50624-109">You can create a class that derives from a standard binding.</span></span> <span data-ttu-id="50624-110">È, ad esempio, possibile derivare una classe da <xref:System.ServiceModel.WSHttpBinding> ed eseguire l'override del metodo <xref:System.ServiceModel.Channels.CustomBinding.CreateBindingElements%2A> per ottenere gli elementi di associazione e inserire un elemento di associazione personalizzato o stabilire un particolare valore per la protezione.</span><span class="sxs-lookup"><span data-stu-id="50624-110">For example, you can derive a class from <xref:System.ServiceModel.WSHttpBinding> and override <xref:System.ServiceModel.Channels.CustomBinding.CreateBindingElements%2A> method to obtain the binding elements and insert a custom binding element or establish a particular value for security.</span></span>  
  
-   <span data-ttu-id="50624-111">È possibile creare un nuovo tipo <xref:System.ServiceModel.Channels.Binding> per controllare completamente l'intera implementazione dell'associazione.</span><span class="sxs-lookup"><span data-stu-id="50624-111">You can create a new <xref:System.ServiceModel.Channels.Binding> type to completely control the entire binding implementation.</span></span>  
  
## <a name="the-order-of-binding-elements"></a><span data-ttu-id="50624-112">Ordine degli elementi di associazione</span><span class="sxs-lookup"><span data-stu-id="50624-112">The Order of Binding Elements</span></span>  
 <span data-ttu-id="50624-113">Ogni elemento di associazione rappresenta una fase di elaborazione durante l'invio o la ricezione di messaggi.</span><span class="sxs-lookup"><span data-stu-id="50624-113">Each binding element represents a processing step when sending or receiving messages.</span></span> <span data-ttu-id="50624-114">In fase di esecuzione, gli elementi di associazione creano i canali e i listener necessari per generare stack di canali in uscita e in ingresso.</span><span class="sxs-lookup"><span data-stu-id="50624-114">At runtime, binding elements create the channels and listeners necessary to build outgoing and incoming channel stacks.</span></span>  
  
 <span data-ttu-id="50624-115">Sono disponibili tre tipi di elementi di associazione: elementi di associazione di protocollo, elementi di associazione di codifica ed elementi di associazione del trasporto.</span><span class="sxs-lookup"><span data-stu-id="50624-115">There are three main types of binding elements: Protocol Binding Elements, Encoding Binding Elements and Transport Binding Elements.</span></span>  
  
 <span data-ttu-id="50624-116">Elementi di associazione di protocollo: rappresentano passaggi di elaborazione di livello superiore che agiscono sui messaggi.</span><span class="sxs-lookup"><span data-stu-id="50624-116">Protocol Binding Elements – These elements represent higher-level processing steps that act on messages.</span></span> <span data-ttu-id="50624-117">I canali e i listener creati da questi elementi di associazione possono aggiungere, rimuovere o modificare il contenuto del messaggio.</span><span class="sxs-lookup"><span data-stu-id="50624-117">Channels and listeners created by these binding elements can add, remove, or modify the message content.</span></span> <span data-ttu-id="50624-118">Una determinata associazione può avere un numero arbitrario di elementi di associazione di protocollo, ognuno dei quali eredita da <xref:System.ServiceModel.Channels.BindingElement>.</span><span class="sxs-lookup"><span data-stu-id="50624-118">A given binding may have an arbitrary number of protocol binding elements, each inheriting from <xref:System.ServiceModel.Channels.BindingElement>.</span></span> [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]<span data-ttu-id="50624-119"> include diversi elementi di associazione di protocollo, tra cui <xref:System.ServiceModel.Channels.ReliableSessionBindingElement> e <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="50624-119"> includes several protocol binding elements, including the <xref:System.ServiceModel.Channels.ReliableSessionBindingElement> and the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>.</span></span>  
  
 <span data-ttu-id="50624-120">Elementi di associazione di codifica: rappresentano trasformazioni tra un messaggio e una codifica pronti per la trasmissione in rete.</span><span class="sxs-lookup"><span data-stu-id="50624-120">Encoding Binding Element – These elements represent transformations between a message and an encoding ready for transmission on the wire.</span></span> <span data-ttu-id="50624-121">Le tipiche associazioni [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] includono esattamente un elemento di associazione di codifica.</span><span class="sxs-lookup"><span data-stu-id="50624-121">Typical [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] bindings include exactly one encoding binding element.</span></span> <span data-ttu-id="50624-122">Tra gli esempi di elementi di associazione di codifica sono inclusi <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement> e <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="50624-122">Examples of encoding binding elements include the <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, and the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>.</span></span> <span data-ttu-id="50624-123">Se non viene specificato alcun elemento di associazione di codifica per un'associazione, viene usata la codifica predefinita.</span><span class="sxs-lookup"><span data-stu-id="50624-123">If an encoding binding element is not specified for a binding, a default encoding is used.</span></span> <span data-ttu-id="50624-124">L'impostazione predefinita corrisponde a "testo", se il trasporto è HTTP, altrimenti a "binaria".</span><span class="sxs-lookup"><span data-stu-id="50624-124">The default is text when the transport is HTTP and binary otherwise.</span></span>  
  
 <span data-ttu-id="50624-125">Elementi di associazione del trasporto: rappresentano la trasmissione di un messaggio di codifica su un protocollo di trasporto.</span><span class="sxs-lookup"><span data-stu-id="50624-125">Transport Binding Element – These elements represent the transmission of an encoding message on a transport protocol.</span></span> <span data-ttu-id="50624-126">Le tipiche associazioni [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] includono esattamente un elemento di associazione del trasporto, che eredita da <xref:System.ServiceModel.Channels.TransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="50624-126">Typical [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] bindings include exactly one transport binding element, which inherits from <xref:System.ServiceModel.Channels.TransportBindingElement>.</span></span> <span data-ttu-id="50624-127">Tra gli esempi di elementi di associazione del trasporto sono inclusi <xref:System.ServiceModel.Channels.TcpTransportBindingElement>, <xref:System.ServiceModel.Channels.HttpTransportBindingElement> e <xref:System.ServiceModel.Channels.NamedPipeTransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="50624-127">Examples of transport binding elements include the <xref:System.ServiceModel.Channels.TcpTransportBindingElement>, the <xref:System.ServiceModel.Channels.HttpTransportBindingElement>, and the <xref:System.ServiceModel.Channels.NamedPipeTransportBindingElement>.</span></span>  
  
 <span data-ttu-id="50624-128">Quando si creano nuove associazioni, l'ordine degli elementi di associazione aggiunti è importante.</span><span class="sxs-lookup"><span data-stu-id="50624-128">When creating new bindings, the order of the added binding elements is important.</span></span> <span data-ttu-id="50624-129">Aggiungere sempre gli elementi di associazione nell'ordine seguente:</span><span class="sxs-lookup"><span data-stu-id="50624-129">Always add binding elements in the following order:</span></span>  
  
|<span data-ttu-id="50624-130">Livello</span><span class="sxs-lookup"><span data-stu-id="50624-130">Layer</span></span>|<span data-ttu-id="50624-131">Opzioni</span><span class="sxs-lookup"><span data-stu-id="50624-131">Options</span></span>|<span data-ttu-id="50624-132">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="50624-132">Required</span></span>|  
|-----------|-------------|--------------|  
|<span data-ttu-id="50624-133">Flusso transazioni</span><span class="sxs-lookup"><span data-stu-id="50624-133">Transaction Flow</span></span>|<xref:System.ServiceModel.Channels.TransactionFlowBindingElement?displayProperty=nameWithType>|<span data-ttu-id="50624-134">No</span><span class="sxs-lookup"><span data-stu-id="50624-134">No</span></span>|  
|<span data-ttu-id="50624-135">Affidabilità</span><span class="sxs-lookup"><span data-stu-id="50624-135">Reliability</span></span>|<xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType>|<span data-ttu-id="50624-136">No</span><span class="sxs-lookup"><span data-stu-id="50624-136">No</span></span>|  
|<span data-ttu-id="50624-137">Sicurezza</span><span class="sxs-lookup"><span data-stu-id="50624-137">Security</span></span>|<xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType>|<span data-ttu-id="50624-138">No</span><span class="sxs-lookup"><span data-stu-id="50624-138">No</span></span>|  
|<span data-ttu-id="50624-139">Duplex composito</span><span class="sxs-lookup"><span data-stu-id="50624-139">Composite Duplex</span></span>|<xref:System.ServiceModel.Channels.CompositeDuplexBindingElement?displayProperty=nameWithType>|<span data-ttu-id="50624-140">No</span><span class="sxs-lookup"><span data-stu-id="50624-140">No</span></span>|  
|<span data-ttu-id="50624-141">Codifica</span><span class="sxs-lookup"><span data-stu-id="50624-141">Encoding</span></span>|<span data-ttu-id="50624-142">Testo, binario, MTOM, personalizzata</span><span class="sxs-lookup"><span data-stu-id="50624-142">Text, Binary, MTOM, Custom</span></span>|<span data-ttu-id="50624-143">Sì*</span><span class="sxs-lookup"><span data-stu-id="50624-143">Yes*</span></span>|  
|<span data-ttu-id="50624-144">Trasporto</span><span class="sxs-lookup"><span data-stu-id="50624-144">Transport</span></span>|<span data-ttu-id="50624-145">TCP, named pipe, HTTP, HTTPS, MSMQ, personalizzato</span><span class="sxs-lookup"><span data-stu-id="50624-145">TCP, Named Pipes, HTTP, HTTPS, MSMQ, Custom</span></span>|<span data-ttu-id="50624-146">Sì</span><span class="sxs-lookup"><span data-stu-id="50624-146">Yes</span></span>|  
  
 <span data-ttu-id="50624-147">*Dato che per ogni associazione è necessaria una codifica, se non viene specificata alcuna codifica, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ne aggiunge automaticamente una predefinita.</span><span class="sxs-lookup"><span data-stu-id="50624-147">*Because an encoding is required for each binding, if an encoding is not specified, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] adds a default encoding for you.</span></span> <span data-ttu-id="50624-148">L'impostazione predefinita è Text/XML per i trasporti HTTP e HTTPS e Binary per gli altri trasporti.</span><span class="sxs-lookup"><span data-stu-id="50624-148">The default is Text/XML for the HTTP and HTTPS transports, and Binary otherwise.</span></span>  
  
## <a name="creating-a-new-binding-element"></a><span data-ttu-id="50624-149">Creazione di un nuovo elemento di associazione</span><span class="sxs-lookup"><span data-stu-id="50624-149">Creating a new Binding Element</span></span>  
 <span data-ttu-id="50624-150">Oltre ai tipi derivati da <xref:System.ServiceModel.Channels.BindingElement> forniti da [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], è possibile creare propri elementi di associazione.</span><span class="sxs-lookup"><span data-stu-id="50624-150">In addition to the types derived from <xref:System.ServiceModel.Channels.BindingElement> that are provided by [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], you can create your own binding elements.</span></span> <span data-ttu-id="50624-151">Questo consente di personalizzare la modalità di creazione dello stack di associazioni e di specificare i componenti in esso inclusi creando un proprio <xref:System.ServiceModel.Channels.BindingElement> che può essere composto con gli altri tipi forniti dal sistema nello stack.</span><span class="sxs-lookup"><span data-stu-id="50624-151">This lets you customize the way the stack of bindings is created and the components that go in it by creating your own <xref:System.ServiceModel.Channels.BindingElement> that can be composed with the other system-provided types in the stack.</span></span>  
  
 <span data-ttu-id="50624-152">Ad esempio, se si implementa un `LoggingBindingElement` che offre la possibilità di registrare il messaggio in un database, è necessario posizionare tale elemento sopra un canale di trasporto nello stack di canali.</span><span class="sxs-lookup"><span data-stu-id="50624-152">For example, if you implement a `LoggingBindingElement` that provides the ability to log the message to a database, you must place it above a transport channel in the channel stack.</span></span> <span data-ttu-id="50624-153">In questo caso, l'applicazione crea un'associazione personalizzata che compone `LoggingBindingElement` con `TcpTransportBindingElement`, come nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="50624-153">In this case, the application creates a custom binding that composed the `LoggingBindingElement` with `TcpTransportBindingElement`, as in the following example.</span></span>  
  
```csharp  
Binding customBinding = new CustomBinding(  
  new LoggingBindingElement(),   
  new TcpTransportBindingElement()  
);  
```  
  
 <span data-ttu-id="50624-154">La modalità di scrittura del nuovo elemento di associazione dipende dalla funzionalità esatta.</span><span class="sxs-lookup"><span data-stu-id="50624-154">How you write your new binding element depends on its exact functionality.</span></span> <span data-ttu-id="50624-155">Uno degli esempi di [trasporto: UDP](../../../../docs/framework/wcf/samples/transport-udp.md), fornisce una descrizione dettagliata di come implementare un tipo di elemento di associazione.</span><span class="sxs-lookup"><span data-stu-id="50624-155">One of the samples, [Transport: UDP](../../../../docs/framework/wcf/samples/transport-udp.md), provides a detailed description of how to implement one kind of binding element.</span></span>  
  
## <a name="creating-a-new-binding"></a><span data-ttu-id="50624-156">Creazione di una nuova associazione</span><span class="sxs-lookup"><span data-stu-id="50624-156">Creating a New Binding</span></span>  
 <span data-ttu-id="50624-157">Un elemento di associazione creato dall'utente può essere usato in due modi.</span><span class="sxs-lookup"><span data-stu-id="50624-157">A user-created binding element can be used in two ways.</span></span> <span data-ttu-id="50624-158">Nella sezione precedente è stato illustrato il primo modo, ovvero tramite un'associazione personalizzata.</span><span class="sxs-lookup"><span data-stu-id="50624-158">The previous section illustrates the first way: through a custom binding.</span></span> <span data-ttu-id="50624-159">Un'associazione personalizzata consente all'utente di creare una propria associazione basata su un set arbitrario di elementi di associazione, inclusi quelli creati dall'utente.</span><span class="sxs-lookup"><span data-stu-id="50624-159">A custom binding allows the user to create their own binding based on an arbitrary set of binding elements, including user-created ones.</span></span>  
  
 <span data-ttu-id="50624-160">Se si usa l'associazione in più di un'applicazione, creare la propria associazione ed estendere <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="50624-160">If you use the binding in more than one application, create your own binding and extend the <xref:System.ServiceModel.Channels.Binding>.</span></span> <span data-ttu-id="50624-161">Questo evita di creare manualmente un'associazione personalizzata ogni volta che si desidera usarla.</span><span class="sxs-lookup"><span data-stu-id="50624-161">This avoids manually creating a custom binding every time you want to use it.</span></span> <span data-ttu-id="50624-162">Un'associazione definita dall'utente consente di definire il comportamento dell'associazione e includere elementi di associazione definiti dall'utente.</span><span class="sxs-lookup"><span data-stu-id="50624-162">A user-defined binding allows you to define the binding’s behavior and include user-defined binding elements.</span></span> <span data-ttu-id="50624-163">Ed è *preconfezionata*: non è necessario ricreare l'associazione ogni volta che si usa.</span><span class="sxs-lookup"><span data-stu-id="50624-163">And it is *pre-packaged*: you do not have to rebuild the binding every time you use it.</span></span>  
  
 <span data-ttu-id="50624-164">Un'associazione definita dall'utente deve implementare almeno il metodo <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> e la proprietà <xref:System.ServiceModel.Channels.Binding.Scheme%2A>.</span><span class="sxs-lookup"><span data-stu-id="50624-164">At a minimum, a user-defined binding must implement the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method and the <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property.</span></span>  
  
 <span data-ttu-id="50624-165">Il metodo <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> restituisce una nuova classe <xref:System.ServiceModel.Channels.BindingElementCollection> contenente gli elementi di associazione per l'associazione.</span><span class="sxs-lookup"><span data-stu-id="50624-165">The <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method returns a new <xref:System.ServiceModel.Channels.BindingElementCollection> that contains the binding elements for the binding.</span></span> <span data-ttu-id="50624-166">La raccolta è ordinata e deve contenere prima gli elementi di associazione di protocollo, seguiti dall'elemento di associazione di codifica, seguito dall'elemento di associazione del trasporto.</span><span class="sxs-lookup"><span data-stu-id="50624-166">The collection is ordered, and should contain the protocol binding elements first, followed by the encoding binding element, followed by the transport binding element.</span></span> <span data-ttu-id="50624-167">Quando si utilizza il [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] gli elementi di associazione fornita dal sistema, è necessario seguire l'elemento di associazione ordinamento alle regole specificate nella [associazioni personalizzate](../../../../docs/framework/wcf/extending/custom-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="50624-167">When using the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] system-provided binding elements, you must follow the binding element ordering rules specified in [Custom Bindings](../../../../docs/framework/wcf/extending/custom-bindings.md).</span></span> <span data-ttu-id="50624-168">Questa raccolta non deve mai fare riferimento a oggetti a cui si fa riferimento nella classe di associazioni definite dall'utente; gli autori delle associazioni devono pertanto restituire un `Clone()` di <xref:System.ServiceModel.Channels.BindingElementCollection> in ogni chiamata a <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A>.</span><span class="sxs-lookup"><span data-stu-id="50624-168">This collection should never reference objects referenced within the user-defined binding class; consequently, binding authors must return a `Clone()` of the <xref:System.ServiceModel.Channels.BindingElementCollection> on each call to <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A>.</span></span>  
  
 <span data-ttu-id="50624-169">La proprietà <xref:System.ServiceModel.Channels.Binding.Scheme%2A> rappresenta lo schema URI del protocollo di trasporto in uso nell'associazione.</span><span class="sxs-lookup"><span data-stu-id="50624-169">The <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property represents the URI scheme for the transport protocol in use on the binding.</span></span> <span data-ttu-id="50624-170">Ad esempio, il *WSHttpBinding* e *NetTcpBinding* restituiscono "http" e "net.tcp" dalle rispettive <xref:System.ServiceModel.Channels.Binding.Scheme%2A> proprietà.</span><span class="sxs-lookup"><span data-stu-id="50624-170">For example, the *WSHttpBinding* and the *NetTcpBinding* return "http" and "net.tcp" from their respective <xref:System.ServiceModel.Channels.Binding.Scheme%2A> properties.</span></span>  
  
 <span data-ttu-id="50624-171">Per un elenco completo delle proprietà e dei metodi facoltativi per le associazioni definite dall'utente, vedere <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="50624-171">For a complete list of optional methods and properties for user-defined bindings, see <xref:System.ServiceModel.Channels.Binding>.</span></span>  
  
### <a name="example"></a><span data-ttu-id="50624-172">Esempio</span><span class="sxs-lookup"><span data-stu-id="50624-172">Example</span></span>  
 <span data-ttu-id="50624-173">In questo esempio viene implementata un'associazione di profilo in `SampleProfileUdpBinding`, che deriva da <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="50624-173">This example implements profile binding in `SampleProfileUdpBinding`, which derives from <xref:System.ServiceModel.Channels.Binding>.</span></span> <span data-ttu-id="50624-174">Il `SampleProfileUdpBinding` contiene fino a quattro elementi di associazione: uno creato dall'utente `UdpTransportBindingElement`; e tre forniti dal sistema: `TextMessageEncodingBindingElement`, `CompositeDuplexBindingElement`, e `ReliableSessionBindingElement`.</span><span class="sxs-lookup"><span data-stu-id="50624-174">The `SampleProfileUdpBinding` contains up to four binding elements within it: one user-created `UdpTransportBindingElement`; and three system-provided: `TextMessageEncodingBindingElement`, `CompositeDuplexBindingElement`, and `ReliableSessionBindingElement`.</span></span>  
  
```  
public override BindingElementCollection CreateBindingElements()  
{     
    BindingElementCollection bindingElements = new BindingElementCollection();  
    if (ReliableSessionEnabled)  
    {  
        bindingElements.Add(session);  
        bindingElements.Add(compositeDuplex);  
    }  
    bindingElements.Add(encoding);  
    bindingElements.Add(transport);  
    return bindingElements.Clone();  
}  
```  
  
## <a name="security-restrictions-with-duplex-contracts"></a><span data-ttu-id="50624-175">Restrizioni di sicurezza con i contratti duplex</span><span class="sxs-lookup"><span data-stu-id="50624-175">Security Restrictions with Duplex Contracts</span></span>  
 <span data-ttu-id="50624-176">Non tutti gli elementi di associazione sono reciprocamente compatibili.</span><span class="sxs-lookup"><span data-stu-id="50624-176">Not all binding elements are compatible with each other.</span></span> <span data-ttu-id="50624-177">In particolare, esistono alcune restrizioni sugli elementi di associazione di sicurezza, se usati con contratti duplex.</span><span class="sxs-lookup"><span data-stu-id="50624-177">In particular, there are some restrictions on security binding elements when used with duplex contracts.</span></span>  
  
### <a name="one-shot-security"></a><span data-ttu-id="50624-178">Protezione monofase</span><span class="sxs-lookup"><span data-stu-id="50624-178">One-Shot Security</span></span>  
 <span data-ttu-id="50624-179">È possibile implementare la sicurezza "monofase", in cui tutte le credenziali di sicurezza necessarie vengono inviate in un singolo messaggio, impostando il `negotiateServiceCredential` attributo del \<messaggio > elemento di configurazione `false`.</span><span class="sxs-lookup"><span data-stu-id="50624-179">You can implement "one-shot" security, where all the necessary security credentials are sent in a single message, by setting the `negotiateServiceCredential` attribute of the \<message> configuration element to `false`.</span></span>  
  
 <span data-ttu-id="50624-180">L'autenticazione monofase non funziona con i contratti duplex.</span><span class="sxs-lookup"><span data-stu-id="50624-180">One-shot authentication does not work with duplex contracts.</span></span>  
  
 <span data-ttu-id="50624-181">Per i contratti request/reply, l'autenticazione monofase funziona solo se lo stack di associazioni sotto l'elemento di associazione di sicurezza supporta la creazione di istanze di <xref:System.ServiceModel.Channels.IRequestChannel> o <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="50624-181">For Request-Reply contracts, one-shot authentication works only if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="50624-182">Per i contratti unidirezionali, l'autenticazione monofase funziona se lo stack di associazioni sotto l'elemento di associazione di sicurezza supporta la creazione di istanze di <xref:System.ServiceModel.Channels.IRequestChannel>, <xref:System.ServiceModel.Channels.IRequestSessionChannel>, <xref:System.ServiceModel.Channels.IOutputChannel> o <xref:System.ServiceModel.Channels.IOutputSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="50624-182">For one-way contracts, one-shot authentication works if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel>, <xref:System.ServiceModel.Channels.IRequestSessionChannel>, <xref:System.ServiceModel.Channels.IOutputChannel> or <xref:System.ServiceModel.Channels.IOutputSessionChannel> instances.</span></span>  
  
### <a name="cookie-mode-security-context-tokens"></a><span data-ttu-id="50624-183">Token del contesto di sicurezza in modalità cookie</span><span class="sxs-lookup"><span data-stu-id="50624-183">Cookie-mode Security Context Tokens</span></span>  
 <span data-ttu-id="50624-184">I token del contesto di sicurezza in modalità cookie non possono essere usati con contratti duplex.</span><span class="sxs-lookup"><span data-stu-id="50624-184">Cookie mode security context tokens cannot be used with duplex contracts.</span></span>  
  
 <span data-ttu-id="50624-185">Per i contratti request/reply, i token del contesto di sicurezza in modalità cookie funzionano solo se lo stack di associazioni sotto l'elemento di associazione di sicurezza supporta la creazione di istanze di <xref:System.ServiceModel.Channels.IRequestChannel> o <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="50624-185">For Request-Reply contracts, cookie-mode security context tokens work only if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="50624-186">Per i contratti unidirezionali, i token del contesto di sicurezza in modalità cookie funzionano se lo stack di associazioni sotto l'elemento di associazione di sicurezza supporta la creazione di istanze di <xref:System.ServiceModel.Channels.IRequestChannel> o <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="50624-186">For one-way contracts, cookie-mode security context tokens works if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
### <a name="session-mode-security-context-tokens"></a><span data-ttu-id="50624-187">Token del contesto di sicurezza in modalità sessione</span><span class="sxs-lookup"><span data-stu-id="50624-187">Session-mode Security Context Tokens</span></span>  
 <span data-ttu-id="50624-188">I token del contesto di sicurezza (SCT) in modalità sessione funzionano per i contratti duplex se lo stack di associazioni sotto l'elemento di associazione di sicurezza supporta la creazione di istanze di <xref:System.ServiceModel.Channels.IDuplexChannel> o <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="50624-188">Session mode SCT works for duplex contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel> or <xref:System.ServiceModel.Channels.IDuplexSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="50624-189">I token del contesto di sicurezza (SCT) in modalità sessione funzionano per i contratti request/reply se lo stack di associazioni sotto l'elemento di associazione di sicurezza supporta la creazione di istanze di <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> o <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="50624-189">Session mode SCT works for Request-Reply contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel>, instances.</span></span>  
  
 <span data-ttu-id="50624-190">I token del contesto di sicurezza (SCT) in modalità sessione funzionano per i contratti unidirezionali se lo stack di associazioni sotto l'elemento di associazione di sicurezza supporta la creazione di istanze di <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> o <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="50624-190">Session mode SCT works for 1-way contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
## <a name="deriving-from-a-standard-binding"></a><span data-ttu-id="50624-191">Derivazione da un'associazione standard</span><span class="sxs-lookup"><span data-stu-id="50624-191">Deriving from a Standard Binding</span></span>  
 <span data-ttu-id="50624-192">Invece di creare una classe di associazioni completamente nuova, è possibile estendere una delle associazioni fornite dal sistema esistenti.</span><span class="sxs-lookup"><span data-stu-id="50624-192">Instead of creating an entirely new binding class, it may be possible for you to extend one of the existing system-provided bindings.</span></span> <span data-ttu-id="50624-193">Analogamente al caso precedente, è necessario eseguire l'override del metodo <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> e della proprietà <xref:System.ServiceModel.Channels.Binding.Scheme%2A>.</span><span class="sxs-lookup"><span data-stu-id="50624-193">Much like the preceding case, you must override the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method and the <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="50624-194">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="50624-194">See Also</span></span>  
 <xref:System.ServiceModel.Channels.Binding>  
 [<span data-ttu-id="50624-195">Associazioni personalizzate</span><span class="sxs-lookup"><span data-stu-id="50624-195">Custom Bindings</span></span>](../../../../docs/framework/wcf/extending/custom-bindings.md)
