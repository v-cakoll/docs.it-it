---
title: Progettazione dei contratti di servizio
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- service contracts [WCF]
ms.assetid: 8e89cbb9-ac84-4f0d-85ef-0eb6be0022fd
ms.openlocfilehash: 37723011d69e8ea2ead3f7a30a30898dede054cb
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/12/2020
ms.locfileid: "79176682"
---
# <a name="designing-service-contracts"></a><span data-ttu-id="55797-102">Progettazione dei contratti di servizio</span><span class="sxs-lookup"><span data-stu-id="55797-102">Designing Service Contracts</span></span>
<span data-ttu-id="55797-103">In questo argomento vengono descritti i contratti di servizio, la relativa modalità di definizione, le operazioni disponibili (e le implicazioni per gli scambi di messaggi sottostanti), i tipi di dati utilizzati e altri temi che consentono di progettare operazioni in linea con i requisiti del proprio scenario.</span><span class="sxs-lookup"><span data-stu-id="55797-103">This topic describes what service contracts are, how they are defined, what operations are available (and the implications for the underlying message exchanges), what data types are used, and other issues that help you design operations that satisfy the requirements of your scenario.</span></span>  
  
## <a name="creating-a-service-contract"></a><span data-ttu-id="55797-104">Creazione di un contratto di servizio</span><span class="sxs-lookup"><span data-stu-id="55797-104">Creating a Service Contract</span></span>  
 <span data-ttu-id="55797-105">I servizi espongono una serie di operazioni.</span><span class="sxs-lookup"><span data-stu-id="55797-105">Services expose a number of operations.</span></span> <span data-ttu-id="55797-106">Nelle applicazioni Windows Communication Foundation (WCF) definire le operazioni creando <xref:System.ServiceModel.OperationContractAttribute> un metodo e contrassegnandolo con l'attributo .</span><span class="sxs-lookup"><span data-stu-id="55797-106">In Windows Communication Foundation (WCF) applications, define the operations by creating a method and marking it with the <xref:System.ServiceModel.OperationContractAttribute> attribute.</span></span> <span data-ttu-id="55797-107">Quindi, per creare un contratto di servizio, si raggruppano le operazioni, dichiarandole all'interno di un'interfaccia contrassegnata con l'attributo <xref:System.ServiceModel.ServiceContractAttribute> oppure definendole in una classe contrassegnata con lo stesso attributo.</span><span class="sxs-lookup"><span data-stu-id="55797-107">Then, to create a service contract, group together your operations, either by declaring them within an interface marked with the <xref:System.ServiceModel.ServiceContractAttribute> attribute, or by defining them in a class marked with the same attribute.</span></span> <span data-ttu-id="55797-108">Per un esempio di base, vedere [Procedura: definire un contratto](how-to-define-a-wcf-service-contract.md)di assistenza.</span><span class="sxs-lookup"><span data-stu-id="55797-108">(For a basic example, see [How to: Define a Service Contract](how-to-define-a-wcf-service-contract.md).)</span></span>  
  
 <span data-ttu-id="55797-109">Tutti i metodi che <xref:System.ServiceModel.OperationContractAttribute> non dispongono di un attributo non sono operazioni del servizio e non sono esposti dai servizi WCF.</span><span class="sxs-lookup"><span data-stu-id="55797-109">Any methods that do not have a <xref:System.ServiceModel.OperationContractAttribute> attribute are not service operations and are not exposed by WCF services.</span></span>  
  
 <span data-ttu-id="55797-110">In questo argomento vengono descritte le decisioni seguenti da prendere durante la progettazione di un contratto di servizio:</span><span class="sxs-lookup"><span data-stu-id="55797-110">This topic describes the following decision points when designing a service contract:</span></span>  
  
- <span data-ttu-id="55797-111">Utilizzo di classi o interfacce.</span><span class="sxs-lookup"><span data-stu-id="55797-111">Whether to use classes or interfaces.</span></span>  
  
- <span data-ttu-id="55797-112">Modalità di indicazione dei tipi di dati che si desidera scambiare.</span><span class="sxs-lookup"><span data-stu-id="55797-112">How to specify the data types you want to exchange.</span></span>  
  
- <span data-ttu-id="55797-113">Tipi di modello di scambio che è possibile usare.</span><span class="sxs-lookup"><span data-stu-id="55797-113">The types of exchange patterns you can use.</span></span>  
  
- <span data-ttu-id="55797-114">Possibilità di inserimento nel contratto di requisiti di sicurezza espliciti.</span><span class="sxs-lookup"><span data-stu-id="55797-114">Whether you can make explicit security requirements part of the contract.</span></span>  
  
- <span data-ttu-id="55797-115">Restrizioni per input e output dell'operazione.</span><span class="sxs-lookup"><span data-stu-id="55797-115">The restrictions for operation inputs and outputs.</span></span>  
  
## <a name="classes-or-interfaces"></a><span data-ttu-id="55797-116">Classi o interfacce</span><span class="sxs-lookup"><span data-stu-id="55797-116">Classes or Interfaces</span></span>  
 <span data-ttu-id="55797-117">Sia le classi che le interfacce rappresentano un raggruppamento di funzionalità e, pertanto, entrambi possono essere utilizzati per definire un contratto di servizio WCF.</span><span class="sxs-lookup"><span data-stu-id="55797-117">Both classes and interfaces represent a grouping of functionality and, therefore, both can be used to define a WCF service contract.</span></span> <span data-ttu-id="55797-118">È tuttavia consigliabile utilizzare le interfacce dal momento che modellano direttamente i contratti di servizio.</span><span class="sxs-lookup"><span data-stu-id="55797-118">However, it is recommended that you use interfaces because they directly model service contracts.</span></span> <span data-ttu-id="55797-119">Senza implementazione, le interfacce si limitano a definire un raggruppamento di metodi con determinate firme.</span><span class="sxs-lookup"><span data-stu-id="55797-119">Without an implementation, interfaces do no more than define a grouping of methods with certain signatures.</span></span> <span data-ttu-id="55797-120">Implementare un'interfaccia del contratto di servizio ed è stato implementato un servizio WCF.</span><span class="sxs-lookup"><span data-stu-id="55797-120">Implement a service contract interface and you have implemented a WCF service.</span></span>  
  
 <span data-ttu-id="55797-121">Le interfacce del contratto di servizio assumono tutti i vantaggi delle interfacce gestite:</span><span class="sxs-lookup"><span data-stu-id="55797-121">All the benefits of managed interfaces apply to service contract interfaces:</span></span>  
  
- <span data-ttu-id="55797-122">Le interfacce del contratto di servizio possono estendere un numero qualsiasi di altre interfacce del contratto di servizio.</span><span class="sxs-lookup"><span data-stu-id="55797-122">Service contract interfaces can extend any number of other service contract interfaces.</span></span>  
  
- <span data-ttu-id="55797-123">Una sola classe è in grado di implementare più contratti di servizio implementandone le interfacce.</span><span class="sxs-lookup"><span data-stu-id="55797-123">A single class can implement any number of service contracts by implementing those service contract interfaces.</span></span>  
  
- <span data-ttu-id="55797-124">È possibile modificare l'implementazione di un contratto di servizio modificando l'implementazione dell'interfaccia mentre il contratto di servizio rimane lo stesso.</span><span class="sxs-lookup"><span data-stu-id="55797-124">You can modify the implementation of a service contract by changing the interface implementation, while the service contract remains the same.</span></span>  
  
- <span data-ttu-id="55797-125">È possibile modificare la versione del servizio implementando l'interfaccia obsoleta e l'interfaccia nuova.</span><span class="sxs-lookup"><span data-stu-id="55797-125">You can version your service by implementing the old interface and the new one.</span></span> <span data-ttu-id="55797-126">I client obsoleti si connettono alla versione originale mentre i client più recenti possono connettersi alla versione nuova.</span><span class="sxs-lookup"><span data-stu-id="55797-126">Old clients connect to the original version, while newer clients can connect to the newer version.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="55797-127">Quando si eredita da altre interfacce del contratto di servizio, non è possibile eseguire l'override delle proprietà dell'operazione, ad esempio il nome o lo spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="55797-127">When inheriting from other service contract interfaces, you cannot override operation properties, such as the name or namespace.</span></span> <span data-ttu-id="55797-128">Se si tenta di farlo, si crea una nuova operazione nel contratto di servizio corrente.</span><span class="sxs-lookup"><span data-stu-id="55797-128">If you attempt to do so, you create a new operation in the current service contract.</span></span>  
  
 <span data-ttu-id="55797-129">Per un esempio di utilizzo di un'interfaccia per creare un contratto di servizio, vedere [Procedura: creare un servizio con un'interfaccia del contratto](./feature-details/how-to-create-a-service-with-a-contract-interface.md).</span><span class="sxs-lookup"><span data-stu-id="55797-129">For an example of using an interface to create a service contract, see [How to: Create a Service with a Contract Interface](./feature-details/how-to-create-a-service-with-a-contract-interface.md).</span></span>  
  
 <span data-ttu-id="55797-130">È tuttavia possibile utilizzare una classe per definire un contratto di servizio e contemporaneamente implementare il contratto.</span><span class="sxs-lookup"><span data-stu-id="55797-130">You can, however, use a class to define a service contract and implement that contract at the same time.</span></span> <span data-ttu-id="55797-131">Il vantaggio della creazione dei servizi applicando direttamente <xref:System.ServiceModel.ServiceContractAttribute> e <xref:System.ServiceModel.OperationContractAttribute> rispettivamente alla classe e ai metodi della classe è rappresentano dalla velocità e dalla semplicità.</span><span class="sxs-lookup"><span data-stu-id="55797-131">The advantage of creating your services by applying <xref:System.ServiceModel.ServiceContractAttribute> and <xref:System.ServiceModel.OperationContractAttribute> directly to the class and the methods on the class, respectively, is speed and simplicity.</span></span> <span data-ttu-id="55797-132">Gli svantaggi consistono nel fatto che le classi gestite non supportano l'ereditarietà multipla e di conseguenza possono implementare solo un contratto di servizio alla volta.</span><span class="sxs-lookup"><span data-stu-id="55797-132">The disadvantages are that managed classes do not support multiple inheritance, and as a result they can only implement one service contract at a time.</span></span> <span data-ttu-id="55797-133">Qualsiasi modifica alle firme della classe o del metodo, inoltre, modifica il contratto pubblico per quel servizio impedendo potenzialmente ai client non modificati di utilizzare il servizio.</span><span class="sxs-lookup"><span data-stu-id="55797-133">In addition, any modification to the class or method signatures modifies the public contract for that service, which can prevent unmodified clients from using your service.</span></span> <span data-ttu-id="55797-134">Per ulteriori informazioni, vedere [Implementazione di contratti](implementing-service-contracts.md)di servizio .</span><span class="sxs-lookup"><span data-stu-id="55797-134">For more information, see [Implementing Service Contracts](implementing-service-contracts.md).</span></span>  
  
 <span data-ttu-id="55797-135">Per un esempio in cui viene utilizzata una classe per creare un contratto di servizio e implementarlo contemporaneamente, vedere [Procedura: creare un servizio con una classe Contract](./feature-details/how-to-create-a-wcf-contract-with-a-class.md).</span><span class="sxs-lookup"><span data-stu-id="55797-135">For an example that uses a class to create a service contract and implements it at the same time, see [How to: Create a Service with a Contract Class](./feature-details/how-to-create-a-wcf-contract-with-a-class.md).</span></span>  
  
 <span data-ttu-id="55797-136">A questo punto è necessario capire la differenza tra definire il contratto di servizio utilizzando un'interfaccia e utilizzare una classe.</span><span class="sxs-lookup"><span data-stu-id="55797-136">At this point, you should understand the difference between defining your service contract by using an interface and by using a class.</span></span> <span data-ttu-id="55797-137">Il passaggio successivo consiste nel decidere quali dati possono essere scambiati tra un servizio e i relativi client.</span><span class="sxs-lookup"><span data-stu-id="55797-137">The next step is deciding what data can be passed back and forth between a service and its clients.</span></span>  
  
## <a name="parameters-and-return-values"></a><span data-ttu-id="55797-138">Parametri e valori restituiti</span><span class="sxs-lookup"><span data-stu-id="55797-138">Parameters and Return Values</span></span>  
 <span data-ttu-id="55797-139">Ogni operazione presenta un valore restituito e un parametro, anche se soltanto `void`.</span><span class="sxs-lookup"><span data-stu-id="55797-139">Each operation has a return value and a parameter, even if these are `void`.</span></span> <span data-ttu-id="55797-140">Diversamente da un metodo locale, tuttavia, nel quale è possibile passare riferimenti a oggetti da un oggetto all'altro, le operazioni del servizio non passano riferimenti agli oggetti.</span><span class="sxs-lookup"><span data-stu-id="55797-140">However, unlike a local method, in which you can pass references to objects from one object to another, service operations do not pass references to objects.</span></span> <span data-ttu-id="55797-141">In realtà passano copie degli oggetti.</span><span class="sxs-lookup"><span data-stu-id="55797-141">Instead, they pass copies of the objects.</span></span>  
  
 <span data-ttu-id="55797-142">Ciò è significativo poiché ogni tipo utilizzato in un parametro o valore restituito deve essere serializzabile, ovvero deve essere possibile convertire un oggetto di quel tipo in un flusso di byte e un flusso di byte in un oggetto.</span><span class="sxs-lookup"><span data-stu-id="55797-142">This is significant because each type used in a parameter or return value must be serializable; that is, it must be possible to convert an object of that type into a stream of bytes and from a stream of bytes into an object.</span></span>  
  
 <span data-ttu-id="55797-143">I tipi primitivi sono serializzabili per impostazione predefinita, come molti tipi in .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="55797-143">Primitive types are serializable by default, as are many types in the .NET Framework.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="55797-144">Il valore dei nomi di parametro nella firma dell'operazione fa parte del contratto e supporta la distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="55797-144">The value of the parameter names in the operation signature are part of the contract and are case sensitive.</span></span> <span data-ttu-id="55797-145">Se si desidera utilizzare localmente lo stesso nome di parametro ma modificarlo nei metadati pubblicati, vedere <xref:System.ServiceModel.MessageParameterAttribute?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="55797-145">If you want to use the same parameter name locally but modify the name in the published metadata, see the <xref:System.ServiceModel.MessageParameterAttribute?displayProperty=nameWithType>.</span></span>  
  
#### <a name="data-contracts"></a><span data-ttu-id="55797-146">Contratti dati</span><span class="sxs-lookup"><span data-stu-id="55797-146">Data Contracts</span></span>  
 <span data-ttu-id="55797-147">Le applicazioni orientate ai servizi come le applicazioni Windows Communication Foundation (WCF) sono progettate per interagire con il maggior numero possibile di applicazioni client su piattaforme Microsoft e non Microsoft.</span><span class="sxs-lookup"><span data-stu-id="55797-147">Service-oriented applications like Windows Communication Foundation (WCF) applications are designed to interoperate with the widest possible number of client applications on both Microsoft and non-Microsoft platforms.</span></span> <span data-ttu-id="55797-148">Poiché l'interazione sia la più ampia possibile, è consigliabile contrassegnare i tipi con gli attributi <xref:System.Runtime.Serialization.DataContractAttribute> e <xref:System.Runtime.Serialization.DataMemberAttribute> per creare un contratto dati, parte del contratto di servizio che descrive i dati scambiati nelle operazioni del servizio.</span><span class="sxs-lookup"><span data-stu-id="55797-148">For the widest possible interoperability, it is recommended that you mark your types with the <xref:System.Runtime.Serialization.DataContractAttribute> and <xref:System.Runtime.Serialization.DataMemberAttribute> attributes to create a data contract, which is the portion of the service contract that describes the data that your service operations exchange.</span></span>  
  
 <span data-ttu-id="55797-149">I contratti dati sono contratti di tipo con consenso esplicito: nessun tipo o membro dati viene serializzato a meno che non si applichi in modo esplicito l'attributo del contratto dati.</span><span class="sxs-lookup"><span data-stu-id="55797-149">Data contracts are opt-in style contracts: No type or data member is serialized unless you explicitly apply the data contract attribute.</span></span> <span data-ttu-id="55797-150">I contratti dati non sono correlati all'ambito di accesso del codice gestito: i membri dati privati possono essere serializzati e inviati altrove perché vi si possa accedere pubblicamente.</span><span class="sxs-lookup"><span data-stu-id="55797-150">Data contracts are unrelated to the access scope of the managed code: Private data members can be serialized and sent elsewhere to be accessed publicly.</span></span> <span data-ttu-id="55797-151">Per un esempio di base di un contratto dati, vedere [Procedura: creare un contratto dati di base per una classe o](./feature-details/how-to-create-a-basic-data-contract-for-a-class-or-structure.md)una struttura. WCF gestisce la definizione dei messaggi SOAP sottostanti che abilitano la funzionalità dell'operazione, nonché la serializzazione dei tipi di dati all'esterno e all'esterno del corpo dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="55797-151">(For a basic example of a data contract, see [How to: Create a Basic Data Contract for a Class or Structure](./feature-details/how-to-create-a-basic-data-contract-for-a-class-or-structure.md).) WCF handles the definition of the underlying SOAP messages that enable the operation's functionality as well as the serialization of your data types into and out of the body of the messages.</span></span> <span data-ttu-id="55797-152">Purché i tipi di dati siano serializzabili, non è necessario occuparsi dell'infrastruttura dello scambio di messaggi sottostante durante la progettazione delle operazioni.</span><span class="sxs-lookup"><span data-stu-id="55797-152">As long as your data types are serializable, you do not need to think about the underlying message exchange infrastructure when designing your operations.</span></span>  
  
 <span data-ttu-id="55797-153">Anche se l'applicazione <xref:System.Runtime.Serialization.DataContractAttribute> <xref:System.Runtime.Serialization.DataMemberAttribute> WCF tipica utilizza gli attributi e per creare contratti dati per le operazioni, è possibile usare altri meccanismi di serializzazione.</span><span class="sxs-lookup"><span data-stu-id="55797-153">Although the typical WCF application uses the <xref:System.Runtime.Serialization.DataContractAttribute> and <xref:System.Runtime.Serialization.DataMemberAttribute> attributes to create data contracts for operations, you can use other serialization mechanisms.</span></span> <span data-ttu-id="55797-154">I meccanismi <xref:System.Runtime.Serialization.ISerializable>, <xref:System.SerializableAttribute> e <xref:System.Xml.Serialization.IXmlSerializable> standard gestiscono tutti la serializzazione dei tipi di dati nei messaggi SOAP sottostanti che li trasportano da un'applicazione all'altra.</span><span class="sxs-lookup"><span data-stu-id="55797-154">The standard <xref:System.Runtime.Serialization.ISerializable>, <xref:System.SerializableAttribute> and <xref:System.Xml.Serialization.IXmlSerializable> mechanisms all work to handle the serialization of your data types into the underlying SOAP messages that carry them from one application to another.</span></span> <span data-ttu-id="55797-155">È possibile utilizzare più strategie di serializzazione se i tipi di dati richiedono un supporto speciale.</span><span class="sxs-lookup"><span data-stu-id="55797-155">You can employ more serialization strategies if your data types require special support.</span></span> <span data-ttu-id="55797-156">Per altre informazioni sulle opzioni per la serializzazione dei tipi di dati nelle applicazioni WCF, vedere Specifica del trasferimento dei [dati nei contratti](./feature-details/specifying-data-transfer-in-service-contracts.md)di servizio .</span><span class="sxs-lookup"><span data-stu-id="55797-156">For more information about the choices for serialization of data types in WCF applications, see [Specifying Data Transfer in Service Contracts](./feature-details/specifying-data-transfer-in-service-contracts.md).</span></span>  
  
#### <a name="mapping-parameters-and-return-values-to-message-exchanges"></a><span data-ttu-id="55797-157">Esecuzione del mapping di parametri e valori restituiti agli scambi di messaggi</span><span class="sxs-lookup"><span data-stu-id="55797-157">Mapping Parameters and Return Values to Message Exchanges</span></span>  
 <span data-ttu-id="55797-158">Le operazioni del servizio sono supportate da uno scambio sottostante di messaggi SOAP che trasferiscono i dati dell'applicazione avanti e indietro, oltre ai dati necessari per l'applicazione per supportare alcune funzionalità standard di sicurezza, transazione e correlate alla sessione.</span><span class="sxs-lookup"><span data-stu-id="55797-158">Service operations are supported by an underlying exchange of SOAP messages that transfer application data back and forth, in addition to the data required by the application to support certain standard security, transaction, and session-related features.</span></span> <span data-ttu-id="55797-159">Poiché questo è il caso, la firma di un'operazione del servizio determina un determinato modello di *scambio* di messaggi sottostante (MEP) che può supportare il trasferimento dei dati e le funzionalità richieste da un'operazione.</span><span class="sxs-lookup"><span data-stu-id="55797-159">Because this is the case, the signature of a service operation dictates a certain underlying *message exchange pattern* (MEP) that can support the data transfer and the features an operation requires.</span></span> <span data-ttu-id="55797-160">È possibile specificare tre modelli nel modello di programmazione WCF: modelli di messaggio di richiesta/risposta, unidirezionali e duplex.</span><span class="sxs-lookup"><span data-stu-id="55797-160">You can specify three patterns in the WCF programming model: request/reply, one-way, and duplex message patterns.</span></span>  
  
##### <a name="requestreply"></a><span data-ttu-id="55797-161">Request/Reply</span><span class="sxs-lookup"><span data-stu-id="55797-161">Request/Reply</span></span>  
 <span data-ttu-id="55797-162">Nel modello Request/Reply il mittente di una richiesta (un'applicazione client) riceve una risposta alla quale è correlata la richiesta.</span><span class="sxs-lookup"><span data-stu-id="55797-162">A request/reply pattern is one in which a request sender (a client application) receives a reply with which the request is correlated.</span></span> <span data-ttu-id="55797-163">Si tratta del modello di scambio dei messaggi predefinito perché supporta un'operazione in cui uno o più parametri vengono passati all'operazione e un valore restituito viene passato di nuovo al chiamante.</span><span class="sxs-lookup"><span data-stu-id="55797-163">This is the default MEP because it supports an operation in which one or more parameters are passed to the operation and a return value is passed back to the caller.</span></span> <span data-ttu-id="55797-164">Nell'esempio di codice C# seguente viene illustrata un'operazione di base del servizio che accetta una stringa e restituisce una stringa.</span><span class="sxs-lookup"><span data-stu-id="55797-164">For example, the following C# code example shows a basic service operation that takes one string and returns a string.</span></span>  
  
```csharp  
[OperationContractAttribute]  
string Hello(string greeting);  
```  
  
 <span data-ttu-id="55797-165">Il codice seguente è l'equivalente del codice Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="55797-165">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<OperationContractAttribute()>  
Function Hello (ByVal greeting As String) As String  
```  
  
 <span data-ttu-id="55797-166">Questa firma dell'operazione determina la forma dello scambio di messaggi sottostante.</span><span class="sxs-lookup"><span data-stu-id="55797-166">This operation signature dictates the form of underlying message exchange.</span></span> <span data-ttu-id="55797-167">Se non esisteva alcuna correlazione, WCF non è in grado di determinare per quale operazione è destinato il valore restituito.</span><span class="sxs-lookup"><span data-stu-id="55797-167">If no correlation existed, WCF cannot determine for which operation the return value is intended.</span></span>  
  
 <span data-ttu-id="55797-168">Si noti che, a meno che non `void` si`Nothing` specifichi un modello di messaggio sottostante diverso, anche le operazioni del servizio che restituiscono ( in Visual Basic) sono scambi di messaggi di richiesta/risposta.</span><span class="sxs-lookup"><span data-stu-id="55797-168">Note that unless you specify a different underlying message pattern, even service operations that return `void` (`Nothing` in Visual Basic) are request/reply message exchanges.</span></span> <span data-ttu-id="55797-169">Il risultato per l'operazione è che, a meno che un client non richiami l'operazione in modo asincrono, il client interrompe l'elaborazione fino alla ricezione del messaggio di risposta, anche se normalmente si tratta di un messaggio vuoto.</span><span class="sxs-lookup"><span data-stu-id="55797-169">The result for your operation is that unless a client invokes the operation asynchronously, the client stops processing until the return message is received, even though that message is empty in the normal case.</span></span> <span data-ttu-id="55797-170">Nell'esempio di codice di C# seguente viene illustrata un'operazione che restituisce un risultato solo dopo che il client ha ricevuto un messaggio di risposta vuoto.</span><span class="sxs-lookup"><span data-stu-id="55797-170">The following C# code example shows an operation that does not return until the client has received an empty message in response.</span></span>  
  
```csharp  
[OperationContractAttribute]  
void Hello(string greeting);  
```  
  
 <span data-ttu-id="55797-171">Il codice seguente è l'equivalente del codice Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="55797-171">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<OperationContractAttribute()>  
Sub Hello (ByVal greeting As String)  
```  
  
 <span data-ttu-id="55797-172">L'esempio precedente può rallentare le prestazioni e la velocità di risposta del client se l'esecuzione dell'operazione richiede molto tempo, tuttavia le operazioni Request/Reply presentano vantaggi anche quando restituiscono `void`.</span><span class="sxs-lookup"><span data-stu-id="55797-172">The preceding example can slow client performance and responsiveness if the operation takes a long time to perform, but there are advantages to request/reply operations even when they return `void`.</span></span> <span data-ttu-id="55797-173">Il vantaggio più ovvio consiste nel fatto che gli errori SOAP possono essere restituiti nel messaggio di risposta, a indicare che si è verificata una condizione di errore correlata al servizio, nella comunicazione o nell'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="55797-173">The most obvious one is that SOAP faults can be returned in the response message, which indicates that some service-related error condition has occurred, whether in communication or processing.</span></span> <span data-ttu-id="55797-174">Gli errori SOAP specificati in un contratto di servizio vengono passati all'applicazione client sotto forma di oggetto <xref:System.ServiceModel.FaultException%601>, dove il parametro tipo è il tipo specificato nel contratto di servizio.</span><span class="sxs-lookup"><span data-stu-id="55797-174">SOAP faults that are specified in a service contract are passed to the client application as a <xref:System.ServiceModel.FaultException%601> object, where the type parameter is the type specified in the service contract.</span></span> <span data-ttu-id="55797-175">In questo modo la notifica ai client sulle condizioni di errore nei servizi WCF è semplice.</span><span class="sxs-lookup"><span data-stu-id="55797-175">This makes notifying clients about error conditions in WCF services easy.</span></span> <span data-ttu-id="55797-176">Per ulteriori informazioni sulle eccezioni, gli errori SOAP e la gestione degli errori, vedere [Specifica e gestione degli errori in contratti e servizi](specifying-and-handling-faults-in-contracts-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="55797-176">For more information about exceptions, SOAP faults, and error handling, see [Specifying and Handling Faults in Contracts and Services](specifying-and-handling-faults-in-contracts-and-services.md).</span></span> <span data-ttu-id="55797-177">Per un esempio di servizio e client di richiesta/risposta, vedere [Procedura: creare un contratto di richiesta-risposta](./feature-details/how-to-create-a-request-reply-contract.md).</span><span class="sxs-lookup"><span data-stu-id="55797-177">To see an example of a request/reply service and client, see [How to: Create a Request-Reply Contract](./feature-details/how-to-create-a-request-reply-contract.md).</span></span> <span data-ttu-id="55797-178">Per ulteriori informazioni sui problemi relativi al modello di richiesta-risposta, vedere [Servizi di richiesta-risposta](./feature-details/request-reply-services.md).</span><span class="sxs-lookup"><span data-stu-id="55797-178">For more information about issues with the request-reply pattern, see [Request-Reply Services](./feature-details/request-reply-services.md).</span></span>  
  
##### <a name="one-way"></a><span data-ttu-id="55797-179">Unidirezionale</span><span class="sxs-lookup"><span data-stu-id="55797-179">One-way</span></span>  
 <span data-ttu-id="55797-180">Se il client di un'applicazione di servizio WCF non deve attendere il completamento dell'operazione e non elabora errori SOAP, l'operazione può specificare un modello di messaggio unidirezionale.</span><span class="sxs-lookup"><span data-stu-id="55797-180">If the client of a WCF service application should not wait for the operation to complete and does not process SOAP faults, the operation can specify a one-way message pattern.</span></span> <span data-ttu-id="55797-181">Un'operazione unidirezionale è un'operazione in cui un client richiama un'operazione e continua l'elaborazione dopo che WCF scrive il messaggio nella rete.</span><span class="sxs-lookup"><span data-stu-id="55797-181">A one-way operation is one in which a client invokes an operation and continues processing after WCF writes the message to the network.</span></span> <span data-ttu-id="55797-182">In genere ciò significa che, a meno che le dimensioni dei dati inviati nel messaggio in uscita non siano eccessive, il client continua l'esecuzione quasi immediatamente (purché non si verifichi un errore durante l'invio dei dati).</span><span class="sxs-lookup"><span data-stu-id="55797-182">Typically this means that unless the data being sent in the outbound message is extremely large the client continues running almost immediately (unless there is an error sending the data).</span></span> <span data-ttu-id="55797-183">Questo tipo di modello di scambio dei messaggi supporta il comportamento simile a quello degli eventi da un client a un'applicazione di servizio.</span><span class="sxs-lookup"><span data-stu-id="55797-183">This type of message exchange pattern supports event-like behavior from a client to a service application.</span></span>  
  
 <span data-ttu-id="55797-184">Uno scambio di messaggi in cui un messaggio viene inviato e non ne viene ricevuto nessuno non è in grado di supportare un'operazione del servizio che specifichi un valore restituito diverso da `void`, nel quale caso viene generata un'eccezione <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="55797-184">A message exchange in which one message is sent and none are received cannot support a service operation that specifies a return value other than `void`; in this case an <xref:System.InvalidOperationException> exception is thrown.</span></span>  
  
 <span data-ttu-id="55797-185">L'assenza di messaggi di risposta implica inoltre che non verranno restituite segnalazioni SOAP per indicare eventuali errori durante l'elaborazione o la comunicazione</span><span class="sxs-lookup"><span data-stu-id="55797-185">No return message also means that there can be no SOAP fault returned to indicate any errors in processing or communication.</span></span> <span data-ttu-id="55797-186">(la comunicazione di informazioni sull'errore quando le operazioni sono unidirezionali richiede un modello di scambio dei messaggi duplex).</span><span class="sxs-lookup"><span data-stu-id="55797-186">(Communicating error information when operations are one-way operations requires a duplex message exchange pattern.)</span></span>  
  
 <span data-ttu-id="55797-187">Per specificare uno scambio di messaggi unidirezionale per un'operazione che restituisce `void`, impostare la proprietà <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> su `true`, come nell'esempio di codice C# seguente.</span><span class="sxs-lookup"><span data-stu-id="55797-187">To specify a one-way message exchange for an operation that returns `void`, set the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property to `true`, as in the following C# code example.</span></span>  
  
```csharp  
[OperationContractAttribute(IsOneWay=true)]  
void Hello(string greeting);  
```  
  
 <span data-ttu-id="55797-188">Il codice seguente è l'equivalente del codice Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="55797-188">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<OperationContractAttribute(IsOneWay := True)>  
Sub Hello (ByVal greeting As String)  
```  
  
 <span data-ttu-id="55797-189">Questo metodo è identico all'esempio Request/Reply precedente ma impostare la proprietà <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> su `true` implica che sebbene il metodo sia identico, l'operazione del servizio non invia un messaggio di risposta e i client rispondono immediatamente dopo l'invio del messaggio in uscita al livello del canale.</span><span class="sxs-lookup"><span data-stu-id="55797-189">This method is identical to the preceding request/reply example, but setting the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property to `true` means that although the method is identical, the service operation does not send a return message and clients return immediately once the outbound message has been handed to the channel layer.</span></span> <span data-ttu-id="55797-190">Per un esempio, vedere [Procedura: creare un contratto unidirezionale](./feature-details/how-to-create-a-one-way-contract.md).</span><span class="sxs-lookup"><span data-stu-id="55797-190">For an example, see [How to: Create a One-Way Contract](./feature-details/how-to-create-a-one-way-contract.md).</span></span> <span data-ttu-id="55797-191">Per ulteriori informazioni sul modello unidirezionale, vedere [Servizi unidirezionali](./feature-details/one-way-services.md).</span><span class="sxs-lookup"><span data-stu-id="55797-191">For more information about the one-way pattern, see [One-Way Services](./feature-details/one-way-services.md).</span></span>  
  
##### <a name="duplex"></a><span data-ttu-id="55797-192">Duplex</span><span class="sxs-lookup"><span data-stu-id="55797-192">Duplex</span></span>  
 <span data-ttu-id="55797-193">Un modello duplex è caratterizzato dalla possibilità del servizio e del client di inviarsi reciprocamente messaggi indipendentemente dal modello usato, unidirezionale o Request/Reply.</span><span class="sxs-lookup"><span data-stu-id="55797-193">A duplex pattern is characterized by the ability of both the service and the client to send messages to each other independently whether using one-way or request/reply messaging.</span></span> <span data-ttu-id="55797-194">Questa forma di comunicazione bidirezionale è utile per i servizi con la necessità di comunicare direttamente con il client o per consentire un'esperienza asincrona a entrambe le estremità dello scambio di messaggi, compreso il comportamento simile a quello degli eventi.</span><span class="sxs-lookup"><span data-stu-id="55797-194">This form of two-way communication is useful for services that must communicate directly to the client or for providing an asynchronous experience to either side of a message exchange, including event-like behavior.</span></span>  
  
 <span data-ttu-id="55797-195">Il modello duplex è leggermente più complesso del modello Request/Reply o del modello unidirezionale a causa del meccanismo supplementare di comunicazione con il client.</span><span class="sxs-lookup"><span data-stu-id="55797-195">The duplex pattern is slightly more complex than the request/reply or one-way patterns because of the additional mechanism for communicating with the client.</span></span>  
  
 <span data-ttu-id="55797-196">Per progettare un contratto duplex, è inoltre necessario progettare un contratto callback e assegnare il tipo di tale contratto callback alla proprietà <xref:System.ServiceModel.ServiceContractAttribute.CallbackContract%2A> dell'attributo <xref:System.ServiceModel.ServiceContractAttribute> che contrassegna il contratto di servizio.</span><span class="sxs-lookup"><span data-stu-id="55797-196">To design a duplex contract, you must also design a callback contract and assign the type of that callback contract to the <xref:System.ServiceModel.ServiceContractAttribute.CallbackContract%2A> property of the <xref:System.ServiceModel.ServiceContractAttribute> attribute that marks your service contract.</span></span>  
  
 <span data-ttu-id="55797-197">Per implementare un modello duplex è necessario creare una seconda interfaccia contenente le dichiarazioni del metodo chiamate sul client.</span><span class="sxs-lookup"><span data-stu-id="55797-197">To implement a duplex pattern, you must create a second interface that contains the method declarations that are called on the client.</span></span>  
  
 <span data-ttu-id="55797-198">Per un esempio di creazione di un servizio e un client che accede a tale servizio, vedere [Procedura: creare un contratto duplex](./feature-details/how-to-create-a-duplex-contract.md) e [Procedura: accedere ai servizi con un contratto duplex](./feature-details/how-to-access-services-with-a-duplex-contract.md).</span><span class="sxs-lookup"><span data-stu-id="55797-198">For an example of creating a service, and a client that accesses that service, see [How to: Create a Duplex Contract](./feature-details/how-to-create-a-duplex-contract.md) and [How to: Access Services with a Duplex Contract](./feature-details/how-to-access-services-with-a-duplex-contract.md).</span></span> <span data-ttu-id="55797-199">Per un esempio di lavoro, vedere [Duplex](./samples/duplex.md).</span><span class="sxs-lookup"><span data-stu-id="55797-199">For a working sample, see [Duplex](./samples/duplex.md).</span></span> <span data-ttu-id="55797-200">Per ulteriori informazioni sui problemi relativi all'utilizzo di contratti duplex, vedere [Servizi duplex](./feature-details/duplex-services.md).</span><span class="sxs-lookup"><span data-stu-id="55797-200">For more information about issues using duplex contracts, see [Duplex Services](./feature-details/duplex-services.md).</span></span>  
  
> [!CAUTION]
> <span data-ttu-id="55797-201">Quando un servizio riceve un messaggio duplex, analizza l'elemento `ReplyTo` contenuto nel messaggio in arrivo per stabilire dove inviare la replica.</span><span class="sxs-lookup"><span data-stu-id="55797-201">When a service receives a duplex message, it looks at the `ReplyTo` element in that incoming message to determine where to send the reply.</span></span> <span data-ttu-id="55797-202">Se il canale utilizzato per ricevere il messaggio non è protetto, un client non attendibile potrebbe inviare un messaggio dannoso con un `ReplyTo` di un computer di destinazione, sfociando in un Denial of Service (DoS) del computer di destinazione.</span><span class="sxs-lookup"><span data-stu-id="55797-202">If the channel that is used to receive the message is not secured, then an untrusted client could send a malicious message with a target machine's `ReplyTo`, leading to a denial of service (DOS) of that target machine.</span></span>  
  
##### <a name="out-and-ref-parameters"></a><span data-ttu-id="55797-203">Parametri Out e Ref</span><span class="sxs-lookup"><span data-stu-id="55797-203">Out and Ref Parameters</span></span>  
 <span data-ttu-id="55797-204">Nella maggior parte dei `in` casi, è possibile `out` `ref` utilizzare`ByRef` parametri (`ByVal` in Visual Basic) e parametri ( in Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="55797-204">In most cases, you can use `in` parameters (`ByVal` in Visual Basic) and `out` and `ref` parameters (`ByRef` in Visual Basic).</span></span> <span data-ttu-id="55797-205">Poiché i parametri `out` e `ref` indicano entrambi che un'operazione restituisce dati, una firma dell'operazione come la seguente specifica che un'operazione Request/Reply è necessaria anche se la firma dell'operazione restituisce `void`.</span><span class="sxs-lookup"><span data-stu-id="55797-205">Because both `out` and `ref` parameters indicate that data is returned from an operation, an operation signature such as the following specifies that a request/reply operation is required even though the operation signature returns `void`.</span></span>  
  
```csharp  
[ServiceContractAttribute]  
public interface IMyContract  
{  
  [OperationContractAttribute]  
  public void PopulateData(ref CustomDataType data);  
}  
```  
  
 <span data-ttu-id="55797-206">Il codice seguente è l'equivalente del codice Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="55797-206">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<ServiceContractAttribute()> _  
Public Interface IMyContract  
  <OperationContractAttribute()> _  
  Public Sub PopulateData(ByRef data As CustomDataType)  
End Interface  
```  
  
 <span data-ttu-id="55797-207">Le uniche eccezioni sono costituite dai casi in cui la firma presenta una struttura particolare.</span><span class="sxs-lookup"><span data-stu-id="55797-207">The only exceptions are those cases in which your signature has a particular structure.</span></span> <span data-ttu-id="55797-208">È ad esempio possibile utilizzare l'associazione <xref:System.ServiceModel.NetMsmqBinding> per comunicare con i client solo se il metodo utilizzato per dichiarare un'operazione restituisce `void`. Non sono possibili valori di output, che si tratti di un valore restituito o di un parametro `ref` o `out`.</span><span class="sxs-lookup"><span data-stu-id="55797-208">For example, you can use the <xref:System.ServiceModel.NetMsmqBinding> binding to communicate with clients only if the method used to declare an operation returns `void`; there can be no output value, whether it is a return value, `ref`, or `out` parameter.</span></span>  
  
 <span data-ttu-id="55797-209">Utilizzando il parametro `out` o `ref`, inoltre, è necessario che l'operazione disponga di un messaggio di risposta sottostante per trasportare di nuovo l'oggetto modificato.</span><span class="sxs-lookup"><span data-stu-id="55797-209">In addition, using `out` or `ref` parameters requires that the operation have an underlying response message to carry back the modified object.</span></span> <span data-ttu-id="55797-210">Se l'operazione è unidirezionale, in fase di esecuzione viene generata un'eccezione <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="55797-210">If your operation is a one-way operation, an <xref:System.InvalidOperationException> exception is thrown at runtime.</span></span>  
  
### <a name="specify-message-protection-level-on-the-contract"></a><span data-ttu-id="55797-211">Specificare il livello di sicurezza del messaggio sul contratto</span><span class="sxs-lookup"><span data-stu-id="55797-211">Specify Message Protection Level on the Contract</span></span>  
 <span data-ttu-id="55797-212">Durante la progettazione del contratto è inoltre necessario decidere il livello di sicurezza del messaggio dei servizi che implementano il contratto.</span><span class="sxs-lookup"><span data-stu-id="55797-212">When designing your contract, you must also decide the message protection level of services that implement your contract.</span></span> <span data-ttu-id="55797-213">È necessario solo se la protezione del messaggio è applicata all'associazione nell'endpoint del contratto.</span><span class="sxs-lookup"><span data-stu-id="55797-213">This is necessary only if message security is applied to the binding in the contract's endpoint.</span></span> <span data-ttu-id="55797-214">Se nell'associazione la protezione è disattivata (ovvero se l'associazione fornita dal sistema imposta <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType> sul valore <xref:System.ServiceModel.SecurityMode.None?displayProperty=nameWithType>), non è necessario formulare una decisione sul livello di sicurezza del messaggio per il contratto.</span><span class="sxs-lookup"><span data-stu-id="55797-214">If the binding has security turned off (that is, if the system-provided binding sets the <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType> to the value <xref:System.ServiceModel.SecurityMode.None?displayProperty=nameWithType>) then you do not have to decide on the message protection level for the contract.</span></span> <span data-ttu-id="55797-215">Nella maggior parte dei casi le associazioni fornite dal sistema in cui è applicata la protezione a livello di messaggio forniscono un livello di sicurezza sufficiente e non è necessario prendere in considerazione il livello di sicurezza per operazione o per messaggio.</span><span class="sxs-lookup"><span data-stu-id="55797-215">In most cases, system-provided bindings with message-level security applied provide a sufficient protection level and you do not have to consider the protection level for each operation or for each message.</span></span>  
  
 <span data-ttu-id="55797-216">Il livello di sicurezza è un valore che specifica se i messaggi (o parti del messaggio) che supportano un servizio sono firmati, firmati e crittografati o inviati senza firma né crittografia.</span><span class="sxs-lookup"><span data-stu-id="55797-216">The protection level is a value that specifies whether the messages (or message parts) that support a service are signed, signed and encrypted, or sent without signatures or encryption.</span></span> <span data-ttu-id="55797-217">Il livello di sicurezza può essere impostato su vari ambiti: a livello di servizio, per un'operazione in particolare, per un messaggio all'interno dell'operazione o per una parte del messaggio.</span><span class="sxs-lookup"><span data-stu-id="55797-217">The protection level can be set at various scopes: At the service level, for a particular operation, for a message within that operation, or a message part.</span></span> <span data-ttu-id="55797-218">I valori impostati in un ambito diventano predefiniti per ambiti più ristretti, tranne quando sono sottoposti a override in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="55797-218">Values set at one scope become the default value for smaller scopes unless explicitly overridden.</span></span> <span data-ttu-id="55797-219">Se la configurazione di un'associazione non è in grado di fornire il livello di sicurezza minimo necessario per il contratto, viene generata un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="55797-219">If a binding configuration cannot provide the required minimum protection level for the contract, an exception is thrown.</span></span> <span data-ttu-id="55797-220">Quando, inoltre, nessun valore del livello di sicurezza è impostato in modo esplicito nel contratto, la configurazione dell'associazione controlla il livello di sicurezza per tutti i messaggi, se l'associazione dispone della protezione dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="55797-220">And when no protection level values are explicitly set on the contract, the binding configuration controls the protection level for all messages if the binding has message security.</span></span> <span data-ttu-id="55797-221">Questo è il comportamento predefinito.</span><span class="sxs-lookup"><span data-stu-id="55797-221">This is the default behavior.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="55797-222">Decidere se impostare in modo esplicito i vari ambiti di un contratto su una protezione di <xref:System.Net.Security.ProtectionLevel.EncryptAndSign?displayProperty=nameWithType> di livello inferiore rispetto alla protezione completa, equivale solitamente a cercare un compromesso tra un certo grado di sicurezza e prestazioni maggiori.</span><span class="sxs-lookup"><span data-stu-id="55797-222">Deciding whether to explicitly set various scopes of a contract to less than the full protection level of <xref:System.Net.Security.ProtectionLevel.EncryptAndSign?displayProperty=nameWithType> is generally a decision that trades some degree of security for increased performance.</span></span> <span data-ttu-id="55797-223">In questi casi le decisioni dipendono dalle operazioni e dal valore dei dati scambiati.</span><span class="sxs-lookup"><span data-stu-id="55797-223">In these cases, your decisions must revolve around your operations and the value of the data they exchange.</span></span> <span data-ttu-id="55797-224">Per ulteriori informazioni, vedere [Protezione dei servizi](securing-services.md).</span><span class="sxs-lookup"><span data-stu-id="55797-224">For more information, see [Securing Services](securing-services.md).</span></span>  
  
 <span data-ttu-id="55797-225">Nell'esempio di codice seguente non viene impostata nel contratto né la proprietà <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> né la proprietà <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A>.</span><span class="sxs-lookup"><span data-stu-id="55797-225">For example, the following code example does not set either the <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> or the <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> property on the contract.</span></span>  
  
```csharp  
[ServiceContract]  
public interface ISampleService  
{  
  [OperationContractAttribute]  
  public string GetString();  
  
  [OperationContractAttribute]  
  public int GetInt();
}  
```  
  
 <span data-ttu-id="55797-226">Il codice seguente è l'equivalente del codice Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="55797-226">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<ServiceContractAttribute()> _  
Public Interface ISampleService  
  
  <OperationContractAttribute()> _  
  Public Function GetString()As String  
  
  <OperationContractAttribute()> _  
  Public Function GetData() As Integer  
  
End Interface  
```  
  
 <span data-ttu-id="55797-227">Durante l'interazione con un'implementazione `ISampleService` in un endpoint con un <xref:System.ServiceModel.WSHttpBinding> predefinito (l'elemento <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType> predefinito, ovvero <xref:System.ServiceModel.SecurityMode.Message>), tutti i messaggi sono crittografati e firmati poiché questo è il livello di sicurezza predefinito.</span><span class="sxs-lookup"><span data-stu-id="55797-227">When interacting with an `ISampleService` implementation in an endpoint with a default <xref:System.ServiceModel.WSHttpBinding> (the default <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType>, which is <xref:System.ServiceModel.SecurityMode.Message>), all messages are encrypted and signed because this is the default protection level.</span></span> <span data-ttu-id="55797-228">Tuttavia, quando un servizio `ISampleService` viene utilizzato con un oggetto <xref:System.ServiceModel.BasicHttpBinding> predefinito (l'oggetto <xref:System.ServiceModel.SecurityMode> predefinito, ovvero <xref:System.ServiceModel.SecurityMode.None>), tutti i messaggi vengono inviati come testo poiché non è disponibile alcuna protezione per questa associazione, di conseguenza il livello di sicurezza viene ignorato (ovvero i messaggi non vengono crittografati né firmati).</span><span class="sxs-lookup"><span data-stu-id="55797-228">However, when an `ISampleService` service is used with a default <xref:System.ServiceModel.BasicHttpBinding> (the default <xref:System.ServiceModel.SecurityMode>, which is <xref:System.ServiceModel.SecurityMode.None>), all messages are sent as text because there is no security for this binding and so the protection level is ignored (that is, the messages are neither encrypted nor signed).</span></span> <span data-ttu-id="55797-229">Se l'elemento <xref:System.ServiceModel.SecurityMode> fosse impostato su <xref:System.ServiceModel.SecurityMode.Message>, i messaggi verrebbero crittografati e firmati (perché tale sarebbe il livello di sicurezza predefinito dell'associazione).</span><span class="sxs-lookup"><span data-stu-id="55797-229">If the <xref:System.ServiceModel.SecurityMode> was changed to <xref:System.ServiceModel.SecurityMode.Message>, then these messages would be encrypted and signed (because that would now be the binding's default protection level).</span></span>  
  
 <span data-ttu-id="55797-230">Se si desidera regolare o specificare in modo esplicito i requisiti di sicurezza per il contratto, impostare la proprietà <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> (o una qualsiasi delle proprietà `ProtectionLevel` in un ambito più ristretto) sul livello necessario per il contratto di servizio in questione.</span><span class="sxs-lookup"><span data-stu-id="55797-230">If you want to explicitly specify or adjust the protection requirements for your contract, set the <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> property (or any of the `ProtectionLevel` properties at a smaller scope) to the level your service contract requires.</span></span> <span data-ttu-id="55797-231">In questo caso, l'utilizzo di un'impostazione esplicita impone all'associazione di supportare tale impostazione almeno per l'ambito utilizzato.</span><span class="sxs-lookup"><span data-stu-id="55797-231">In this case, using an explicit setting requires the binding to support that setting at a minimum for the scope used.</span></span> <span data-ttu-id="55797-232">Nell'esempio di codice seguente viene specificato un valore <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> esplicitamente, per l'operazione `GetGuid`.</span><span class="sxs-lookup"><span data-stu-id="55797-232">For example, the following code example specifies one <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> value explicitly, for the `GetGuid` operation.</span></span>  
  
```csharp  
[ServiceContract]  
public interface IExplicitProtectionLevelSampleService  
{  
  [OperationContractAttribute]  
  public string GetString();  
  
  [OperationContractAttribute(ProtectionLevel=ProtectionLevel.None)]  
  public int GetInt();
  [OperationContractAttribute(ProtectionLevel=ProtectionLevel.EncryptAndSign)]  
  public int GetGuid();
}  
```  
  
 <span data-ttu-id="55797-233">Il codice seguente è l'equivalente del codice Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="55797-233">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<ServiceContract()> _
Public Interface IExplicitProtectionLevelSampleService
    <OperationContract()> _
    Public Function GetString() As String
    End Function
  
    <OperationContract(ProtectionLevel := ProtectionLevel.None)> _
    Public Function GetInt() As Integer
    End Function
  
    <OperationContractAttribute(ProtectionLevel := ProtectionLevel.EncryptAndSign)> _
    Public Function GetGuid() As Integer
    End Function
  
End Interface  
```  
  
 <span data-ttu-id="55797-234">Un servizio che implementa questo contratto `IExplicitProtectionLevelSampleService` e dispone di un endpoint che utilizza l'elemento <xref:System.ServiceModel.WSHttpBinding> predefinito (l'elemento <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType> predefinito, ovvero <xref:System.ServiceModel.SecurityMode.Message>) presenta il comportamento seguente:</span><span class="sxs-lookup"><span data-stu-id="55797-234">A service that implements this `IExplicitProtectionLevelSampleService` contract and has an endpoint that uses the default <xref:System.ServiceModel.WSHttpBinding> (the default <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType>, which is <xref:System.ServiceModel.SecurityMode.Message>) has the following behavior:</span></span>  
  
- <span data-ttu-id="55797-235">I messaggi dell'operazione `GetString` sono crittografati e firmati.</span><span class="sxs-lookup"><span data-stu-id="55797-235">The `GetString` operation messages are encrypted and signed.</span></span>  
  
- <span data-ttu-id="55797-236">I messaggi dell'operazione `GetInt` sono inviati come testo non crittografato né firmato, ovvero come testo normale.</span><span class="sxs-lookup"><span data-stu-id="55797-236">The `GetInt` operation messages are sent as unencrypted and unsigned (that is, plain) text.</span></span>  
  
- <span data-ttu-id="55797-237">L'elemento `GetGuid` dell'operazione <xref:System.Guid?displayProperty=nameWithType> viene restituito in un messaggio crittografato e firmato.</span><span class="sxs-lookup"><span data-stu-id="55797-237">The `GetGuid` operation <xref:System.Guid?displayProperty=nameWithType> is returned in a message that is encrypted and signed.</span></span>  
  
 <span data-ttu-id="55797-238">Per ulteriori informazioni sui livelli di protezione e su come utilizzarli, vedere [Informazioni sui livelli](understanding-protection-level.md)di protezione .</span><span class="sxs-lookup"><span data-stu-id="55797-238">For more information about protection levels and how to use them, see [Understanding Protection Level](understanding-protection-level.md).</span></span> <span data-ttu-id="55797-239">Per ulteriori informazioni sulla sicurezza, vedere [Protezione dei servizi](securing-services.md).</span><span class="sxs-lookup"><span data-stu-id="55797-239">For more information about security, see [Securing Services](securing-services.md).</span></span>  
  
##### <a name="other-operation-signature-requirements"></a><span data-ttu-id="55797-240">Altri requisiti per la firma di un'operazione</span><span class="sxs-lookup"><span data-stu-id="55797-240">Other Operation Signature Requirements</span></span>  
 <span data-ttu-id="55797-241">Alcune funzionalità dell'applicazione richiedono un tipo particolare di firma dell'operazione.</span><span class="sxs-lookup"><span data-stu-id="55797-241">Some application features require a particular kind of operation signature.</span></span> <span data-ttu-id="55797-242">L'associazione <xref:System.ServiceModel.NetMsmqBinding>, ad esempio, supporta servizi e client durevoli in cui è possibile per un'applicazione riavviarsi durante la comunicazione e riprendere da dove era stata interrotta senza perdere messaggi.</span><span class="sxs-lookup"><span data-stu-id="55797-242">For example, the <xref:System.ServiceModel.NetMsmqBinding> binding supports durable services and clients, in which an application can restart in the middle of communication and pick up where it left off without missing any messages.</span></span> <span data-ttu-id="55797-243">(Per altre informazioni, vedere [code in WCF](./feature-details/queues-in-wcf.md).) Tuttavia, le operazioni `in` durevoli devono accettare un solo parametro e non avere alcun valore restituito.</span><span class="sxs-lookup"><span data-stu-id="55797-243">(For more information, see [Queues in WCF](./feature-details/queues-in-wcf.md).) However, durable operations must take only one `in` parameter and have no return value.</span></span>  
  
 <span data-ttu-id="55797-244">Un altro esempio è l'utilizzo di tipi <xref:System.IO.Stream> nelle operazioni.</span><span class="sxs-lookup"><span data-stu-id="55797-244">Another example is the use of <xref:System.IO.Stream> types in operations.</span></span> <span data-ttu-id="55797-245">Poiché il parametro <xref:System.IO.Stream> comprende l'intero corpo del messaggio, se un input o un output (ovvero il parametro `ref`, il parametro `out` o il valore restituito) è di tipo <xref:System.IO.Stream>, deve essere l'unico l'input o l'unico l'output specificato nell'operazione.</span><span class="sxs-lookup"><span data-stu-id="55797-245">Because the <xref:System.IO.Stream> parameter includes the entire message body, if an input or an output (that is, `ref` parameter, `out` parameter, or return value) is of type <xref:System.IO.Stream>, then it must be the only input or output specified in your operation.</span></span> <span data-ttu-id="55797-246">Il parametro o il tipo restituito, inoltre, deve essere <xref:System.IO.Stream>, <xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType> o <xref:System.Xml.Serialization.IXmlSerializable?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="55797-246">In addition, the parameter or return type must be either <xref:System.IO.Stream>, <xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType>, or <xref:System.Xml.Serialization.IXmlSerializable?displayProperty=nameWithType>.</span></span> <span data-ttu-id="55797-247">Per ulteriori informazioni sui flussi, vedere [Dati di grandi dimensioni e Streaming](./feature-details/large-data-and-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="55797-247">For more information about streams, see [Large Data and Streaming](./feature-details/large-data-and-streaming.md).</span></span>  
  
##### <a name="names-namespaces-and-obfuscation"></a><span data-ttu-id="55797-248">Nomi, spazi dei nomi e offuscamento</span><span class="sxs-lookup"><span data-stu-id="55797-248">Names, Namespaces, and Obfuscation</span></span>  
 <span data-ttu-id="55797-249">I nomi e gli spazi dei nomi dei tipi .NET nella definizione di contratti e operazioni sono significativi quando i contratti vengono convertiti in WSDL e quando vengono creati e inviati messaggi del contratto.</span><span class="sxs-lookup"><span data-stu-id="55797-249">The names and namespaces of the .NET types in the definition of contracts and operations are significant when contracts are converted into WSDL and when contract messages are created and sent.</span></span> <span data-ttu-id="55797-250">Di conseguenza, è consigliabile che gli spazi dei nomi e i nomi del contratto di servizio vengano impostati in modo esplicito tramite le proprietà `Name` e `Namespace` di tutti gli attributi del contratto di supporto, ad esempio <xref:System.ServiceModel.ServiceContractAttribute>, <xref:System.ServiceModel.OperationContractAttribute>, <xref:System.Runtime.Serialization.DataContractAttribute>,  <xref:System.Runtime.Serialization.DataMemberAttribute> e altri attributi del contratto.</span><span class="sxs-lookup"><span data-stu-id="55797-250">Therefore, it is strongly recommended that service contract names and namespaces are explicitly set using the `Name` and `Namespace` properties of all supporting contract attributes such as the <xref:System.ServiceModel.ServiceContractAttribute>, <xref:System.ServiceModel.OperationContractAttribute>, <xref:System.Runtime.Serialization.DataContractAttribute>,  <xref:System.Runtime.Serialization.DataMemberAttribute>, and other contract attributes.</span></span>  
  
 <span data-ttu-id="55797-251">Se i nomi e gli spazi dei nomi non vengono impostati in modo esplicito, una delle conseguenze sarà che l'utilizzo dell'offuscamento IL sull'assembly determinerà la modifica dei nomi e degli spazi dei nomi del tipo di contratto e genererà WSDL modificato e scambi di rete che in genere hanno esito negativo.</span><span class="sxs-lookup"><span data-stu-id="55797-251">One result of this is that if the names and namespaces are not explicitly set, the use of IL obfuscation on the assembly alters the contract type names and namespaces and results in modified WSDL and wire exchanges that typically fail.</span></span> <span data-ttu-id="55797-252">Se i nomi e gli spazi dei nomi del contratto non vengono impostati in modo esplicito, ma si intende utilizzare l'offuscamento, utilizzare gli attributi <xref:System.Reflection.ObfuscationAttribute> e <xref:System.Reflection.ObfuscateAssemblyAttribute> per impedire la modifica dei nomi e degli spazi dei nomi del tipo di contratto.</span><span class="sxs-lookup"><span data-stu-id="55797-252">If you do not set the contract names and namespaces explicitly but do intend to use obfuscation, use the <xref:System.Reflection.ObfuscationAttribute> and <xref:System.Reflection.ObfuscateAssemblyAttribute> attributes to prevent the modification of the contract type names and namespaces.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="55797-253">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="55797-253">See also</span></span>

- [<span data-ttu-id="55797-254">Procedura: creare un contratto request/reply</span><span class="sxs-lookup"><span data-stu-id="55797-254">How to: Create a Request-Reply Contract</span></span>](./feature-details/how-to-create-a-request-reply-contract.md)
- [<span data-ttu-id="55797-255">Procedura: creare un contratto unidirezionale</span><span class="sxs-lookup"><span data-stu-id="55797-255">How to: Create a One-Way Contract</span></span>](./feature-details/how-to-create-a-one-way-contract.md)
- [<span data-ttu-id="55797-256">Procedura: creare un contratto duplex</span><span class="sxs-lookup"><span data-stu-id="55797-256">How to: Create a Duplex Contract</span></span>](./feature-details/how-to-create-a-duplex-contract.md)
- [<span data-ttu-id="55797-257">Specifying Data Transfer in Service Contracts</span><span class="sxs-lookup"><span data-stu-id="55797-257">Specifying Data Transfer in Service Contracts</span></span>](./feature-details/specifying-data-transfer-in-service-contracts.md)
- [<span data-ttu-id="55797-258">Specifica e gestione degli errori in contratti e servizi</span><span class="sxs-lookup"><span data-stu-id="55797-258">Specifying and Handling Faults in Contracts and Services</span></span>](specifying-and-handling-faults-in-contracts-and-services.md)
- [<span data-ttu-id="55797-259">Uso di sessioni</span><span class="sxs-lookup"><span data-stu-id="55797-259">Using Sessions</span></span>](using-sessions.md)
- [<span data-ttu-id="55797-260">Operazioni sincrone e asincrone</span><span class="sxs-lookup"><span data-stu-id="55797-260">Synchronous and Asynchronous Operations</span></span>](synchronous-and-asynchronous-operations.md)
- [<span data-ttu-id="55797-261">Servizi affidabili</span><span class="sxs-lookup"><span data-stu-id="55797-261">Reliable Services</span></span>](reliable-services.md)
- [<span data-ttu-id="55797-262">Servizi e transazioni</span><span class="sxs-lookup"><span data-stu-id="55797-262">Services and Transactions</span></span>](services-and-transactions.md)
