---
title: Inizializzazione di elementi oggetto non presenti in una struttura ad albero di oggetti
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- logical tree [WPF]
- visual tree [WPF]
- elements [WPF], initializing
- initializing elements [WPF]
ms.assetid: 7b8dfc9b-46ac-4ce8-b7bb-035734d688b7
ms.openlocfilehash: 6f3c8611b83977431038573eb1c5c880acbefdc4
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/23/2019
ms.locfileid: "62001468"
---
# <a name="initialization-for-object-elements-not-in-an-object-tree"></a><span data-ttu-id="a5426-102">Inizializzazione di elementi oggetto non presenti in una struttura ad albero di oggetti</span><span class="sxs-lookup"><span data-stu-id="a5426-102">Initialization for Object Elements Not in an Object Tree</span></span>
<span data-ttu-id="a5426-103">Alcuni aspetti dell'inizializzazione di [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] vengono rinviati ai processi che in genere si basano sulla connessione dell'elemento interessato all'albero logico o alla struttura ad albero visuale.</span><span class="sxs-lookup"><span data-stu-id="a5426-103">Some aspects of [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] initialization are deferred to processes that typically rely on that element being connected to either the logical tree or visual tree.</span></span> <span data-ttu-id="a5426-104">In questo argomento vengono descritti i passaggi necessari per inizializzare un elemento non connesso ad alcuno di questi alberi.</span><span class="sxs-lookup"><span data-stu-id="a5426-104">This topic describes the steps that may be necessary in order to initialize an element that is not connected to either tree.</span></span>  

## <a name="elements-and-the-logical-tree"></a><span data-ttu-id="a5426-105">Elementi e albero logico</span><span class="sxs-lookup"><span data-stu-id="a5426-105">Elements and the Logical Tree</span></span>  
 <span data-ttu-id="a5426-106">Quando si crea un'istanza di una classe [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] all'interno del codice, è necessario tenere presente che molti aspetti dell'inizializzazione dell'oggetto per una classe [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] non fanno deliberatamente parte del codice che viene eseguito quando si chiama il costruttore della classe.</span><span class="sxs-lookup"><span data-stu-id="a5426-106">When you create an instance of a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] class in code, you should be aware that several aspects of object initialization for a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] class are deliberately not a part of the code that is executed when calling the class constructor.</span></span> <span data-ttu-id="a5426-107">In particolare, per le classi di controlli, la maggior parte della rappresentazione visiva di un controllo non viene definita dal costruttore,</span><span class="sxs-lookup"><span data-stu-id="a5426-107">Particularly for a control class, most of the visual representation of that control is not defined by the constructor.</span></span> <span data-ttu-id="a5426-108">ma dal modello del controllo.</span><span class="sxs-lookup"><span data-stu-id="a5426-108">Instead, the visual representation is defined by the control's template.</span></span> <span data-ttu-id="a5426-109">Sebbene possa provenire da diverse origini, nella maggior parte dei casi il modello viene ottenuto dagli stili dei temi.</span><span class="sxs-lookup"><span data-stu-id="a5426-109">The template potentially comes from a variety of sources, but most often the template is obtained from theme styles.</span></span> <span data-ttu-id="a5426-110">I modelli sono in pratica un binding tardivo. Il modello necessario viene associato al controllo in questione solo quando il controllo è pronto per il layout</span><span class="sxs-lookup"><span data-stu-id="a5426-110">Templates are effectively late-binding; the necessary template is not attached to the control in question until the control is ready for layout.</span></span> <span data-ttu-id="a5426-111">e quest'ultima condizione si verifica solo quando il controllo viene associato a un albero logico che si connette a una superficie di rendering nella radice.</span><span class="sxs-lookup"><span data-stu-id="a5426-111">And the control is not ready for layout until it is attached to a logical tree that connects to a rendering surface at the root.</span></span> <span data-ttu-id="a5426-112">È tale elemento a livello radice che avvia il rendering di tutti i relativi elementi figlio definiti nell'albero logico.</span><span class="sxs-lookup"><span data-stu-id="a5426-112">It is that root-level element that initiates the rendering of all of its child elements as defined in the logical tree.</span></span>  
  
 <span data-ttu-id="a5426-113">Anche la struttura ad albero visuale partecipa a questo processo.</span><span class="sxs-lookup"><span data-stu-id="a5426-113">The visual tree also participates in this process.</span></span> <span data-ttu-id="a5426-114">Anche un'istanza completa per gli elementi che fanno parte della struttura ad albero visuale tramite i modelli viene creata solo quando gli elementi stessi vengono connessi.</span><span class="sxs-lookup"><span data-stu-id="a5426-114">Elements that are part of the visual tree through the templates are also not fully instantiated until connected.</span></span>  
  
 <span data-ttu-id="a5426-115">La conseguenza di questo comportamento è la necessità di passaggi aggiuntivi per alcune operazioni basate sulle caratteristiche visive completate di un elemento.</span><span class="sxs-lookup"><span data-stu-id="a5426-115">The consequences of this behavior are that certain operations that rely on the completed visual characteristics of an element require additional steps.</span></span> <span data-ttu-id="a5426-116">Un esempio è rappresentato dal tentativo di ottenere le caratteristiche visive di una classe costruita, ma non ancora associata a un albero.</span><span class="sxs-lookup"><span data-stu-id="a5426-116">An example is if you are attempting to get the visual characteristics of a class that was constructed but not yet attached to a tree.</span></span> <span data-ttu-id="a5426-117">Ad esempio, se si desidera chiamare <xref:System.Windows.Media.Imaging.RenderTargetBitmap.Render%2A> su un <xref:System.Windows.Media.Imaging.RenderTargetBitmap> e l'oggetto visivo si sta passando è un elemento non connesso a una struttura ad albero, tale elemento non viene completato visivamente finché non vengono completati i passaggi di inizializzazione aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="a5426-117">For instance, if you want to call <xref:System.Windows.Media.Imaging.RenderTargetBitmap.Render%2A> on a <xref:System.Windows.Media.Imaging.RenderTargetBitmap> and the visual you are passing is an element not connected to a tree, that element is not visually complete until additional initialization steps are completed.</span></span>  
  
### <a name="using-begininit-and-endinit-to-initialize-the-element"></a><span data-ttu-id="a5426-118">Uso di BeginInit e EndInit per inizializzare l'elemento</span><span class="sxs-lookup"><span data-stu-id="a5426-118">Using BeginInit and EndInit to Initialize the Element</span></span>  
 <span data-ttu-id="a5426-119">Varie classi nello [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementano il <xref:System.ComponentModel.ISupportInitialize> interfaccia.</span><span class="sxs-lookup"><span data-stu-id="a5426-119">Various classes in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implement the <xref:System.ComponentModel.ISupportInitialize> interface.</span></span> <span data-ttu-id="a5426-120">Si utilizza il <xref:System.ComponentModel.ISupportInitialize.BeginInit%2A> e <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> metodi dell'interfaccia per indicare un'area del codice che contiene i passaggi di inizializzazione (ad esempio l'impostazione di proprietà, i valori che influiscono sul rendering).</span><span class="sxs-lookup"><span data-stu-id="a5426-120">You use the <xref:System.ComponentModel.ISupportInitialize.BeginInit%2A> and <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> methods of the interface to denote a region in your code that contains initialization steps (such as setting property values that affect rendering).</span></span> <span data-ttu-id="a5426-121">Dopo aver <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> viene chiamato nella sequenza, il sistema di layout può elaborare l'elemento e avviare la ricerca di uno stile implicito.</span><span class="sxs-lookup"><span data-stu-id="a5426-121">After <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> is called in the sequence, the layout system can process the element and start looking for an implicit style.</span></span>  
  
 <span data-ttu-id="a5426-122">È l'elemento si impostano le proprietà in un <xref:System.Windows.FrameworkElement> oppure <xref:System.Windows.FrameworkContentElement> classe, è possibile chiamare le versioni della classe derivata <xref:System.Windows.FrameworkElement.BeginInit%2A> e <xref:System.Windows.FrameworkElement.EndInit%2A> anziché eseguire il cast a <xref:System.ComponentModel.ISupportInitialize>.</span><span class="sxs-lookup"><span data-stu-id="a5426-122">If the element you are setting properties on is a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> derived class, then you can call the class versions of <xref:System.Windows.FrameworkElement.BeginInit%2A> and <xref:System.Windows.FrameworkElement.EndInit%2A> rather than casting to <xref:System.ComponentModel.ISupportInitialize>.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="a5426-123">Codice di esempio</span><span class="sxs-lookup"><span data-stu-id="a5426-123">Sample Code</span></span>  
 <span data-ttu-id="a5426-124">L'esempio seguente è codice di esempio per un'applicazione console che usa il rendering [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] e <xref:System.Windows.Markup.XamlReader.Load%28System.IO.Stream%29?displayProperty=nameWithType> di loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file per illustrare il posizionamento corretto di <xref:System.Windows.FrameworkElement.BeginInit%2A> e <xref:System.Windows.FrameworkElement.EndInit%2A> intorno altra [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] chiamate che regolano le proprietà che influiscono sul rendering.</span><span class="sxs-lookup"><span data-stu-id="a5426-124">The following example is sample code for a console application that uses rendering [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] and <xref:System.Windows.Markup.XamlReader.Load%28System.IO.Stream%29?displayProperty=nameWithType> of a loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file to illustrate the proper placement of <xref:System.Windows.FrameworkElement.BeginInit%2A> and <xref:System.Windows.FrameworkElement.EndInit%2A> around other [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] calls that adjust properties that affect rendering.</span></span>  
  
 <span data-ttu-id="a5426-125">L'esempio illustrata solo la funzione principale.</span><span class="sxs-lookup"><span data-stu-id="a5426-125">The example illustrates the main function only.</span></span> <span data-ttu-id="a5426-126">Le funzioni `Rasterize` e `Save` (non illustrate) sono funzioni di utilità che gestiscono l'elaborazione di immagini e l'I/O.</span><span class="sxs-lookup"><span data-stu-id="a5426-126">The functions `Rasterize` and `Save` (not shown) are utility functions that take care of image processing and IO.</span></span>  
  
 [!code-csharp[InitializeElements#Main](~/samples/snippets/csharp/VS_Snippets_Wpf/InitializeElements/CSharp/initializeelements.cs#main)]
 [!code-vb[InitializeElements#Main](~/samples/snippets/visualbasic/VS_Snippets_Wpf/InitializeElements/VisualBasic/initializeelements.vb#main)]  
  
## <a name="see-also"></a><span data-ttu-id="a5426-127">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="a5426-127">See also</span></span>

- [<span data-ttu-id="a5426-128">Strutture ad albero in WPF</span><span class="sxs-lookup"><span data-stu-id="a5426-128">Trees in WPF</span></span>](trees-in-wpf.md)
- [<span data-ttu-id="a5426-129">Cenni preliminari sul rendering della grafica WPF</span><span class="sxs-lookup"><span data-stu-id="a5426-129">WPF Graphics Rendering Overview</span></span>](../graphics-multimedia/wpf-graphics-rendering-overview.md)
- [<span data-ttu-id="a5426-130">Cenni preliminari su XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="a5426-130">XAML Overview (WPF)</span></span>](xaml-overview-wpf.md)
