---
title: Cenni preliminari sulle proprietà associate
description: Informazioni sulle proprietà associate in Windows Presentation Foundation, che sono proprietà globali impostabili per qualsiasi oggetto.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- attached properties [WPF Designer]
ms.assetid: 75928354-dc01-47e8-a018-8409aec1f32d
ms.openlocfilehash: 993f65024fcfc4f39a408c81af43b798360e6cf6
ms.sourcegitcommit: 87cfeb69226fef01acb17c56c86f978f4f4a13db
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/24/2020
ms.locfileid: "87168384"
---
# <a name="attached-properties-overview"></a><span data-ttu-id="cf180-103">Cenni preliminari sulle proprietà associate</span><span class="sxs-lookup"><span data-stu-id="cf180-103">Attached Properties Overview</span></span>

<span data-ttu-id="cf180-104">Una proprietà associata è un concetto definito da XAML.</span><span class="sxs-lookup"><span data-stu-id="cf180-104">An attached property is a concept defined by XAML.</span></span> <span data-ttu-id="cf180-105">Una proprietà associata deve essere usata come un tipo di proprietà globale che è possibile impostare su qualsiasi oggetto.</span><span class="sxs-lookup"><span data-stu-id="cf180-105">An attached property is intended to be used as a type of global property that is settable on any object.</span></span> <span data-ttu-id="cf180-106">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] le proprietà associate sono in genere definite come un tipo specializzato di proprietà di dipendenza che non dispone della proprietà "wrapper" convenzionale.</span><span class="sxs-lookup"><span data-stu-id="cf180-106">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], attached properties are typically defined as a specialized form of dependency property that does not have the conventional property "wrapper".</span></span>

## <a name="prerequisites"></a><span data-ttu-id="cf180-107">Prerequisiti<a name="prerequisites"></a></span><span class="sxs-lookup"><span data-stu-id="cf180-107">Prerequisites <a name="prerequisites"></a></span></span>

<span data-ttu-id="cf180-108">Questo articolo presuppone che si conoscano le proprietà di dipendenza dal punto di vista di un consumer di proprietà di dipendenza esistenti nelle [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] classi ed è stato letto il [Cenni preliminari sulle proprietà di dipendenza](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="cf180-108">This article assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] classes, and have read the [Dependency Properties Overview](dependency-properties-overview.md).</span></span> <span data-ttu-id="cf180-109">Per seguire gli esempi in questo articolo, è necessario comprendere anche XAML e sapere come scrivere applicazioni WPF.</span><span class="sxs-lookup"><span data-stu-id="cf180-109">To follow the examples in this article, you should also understand XAML and know how to write WPF applications.</span></span>

## <a name="why-use-attached-properties"></a><span data-ttu-id="cf180-110">Perché usare le proprietà associate<a name="attached_properties_usage"></a></span><span class="sxs-lookup"><span data-stu-id="cf180-110">Why Use Attached Properties <a name="attached_properties_usage"></a></span></span>

<span data-ttu-id="cf180-111">Uno degli scopi di una proprietà associata consiste nel consentire a diversi elementi figlio di specificare valori univoci per una proprietà definita in un elemento padre.</span><span class="sxs-lookup"><span data-stu-id="cf180-111">One purpose of an attached property is to allow different child elements to specify unique values for a property that's defined in a parent element.</span></span> <span data-ttu-id="cf180-112">Un'applicazione specifica di questo scenario consente agli elementi figlio di notificare all'elemento padre la modalità con cui devono essere presentati nell'[!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf180-112">A specific application of this scenario is having child elements inform the parent element of how they are to be presented in the [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)].</span></span> <span data-ttu-id="cf180-113">Un esempio è la <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> Proprietà.</span><span class="sxs-lookup"><span data-stu-id="cf180-113">One example is the <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="cf180-114">La <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> proprietà viene creata come proprietà associata perché è progettata per essere impostata su elementi contenuti all'interno di un <xref:System.Windows.Controls.DockPanel> piuttosto che su <xref:System.Windows.Controls.DockPanel> se stesso.</span><span class="sxs-lookup"><span data-stu-id="cf180-114">The <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> property is created as an attached property because it is designed to be set on elements that are contained within a <xref:System.Windows.Controls.DockPanel> rather than on <xref:System.Windows.Controls.DockPanel> itself.</span></span> <span data-ttu-id="cf180-115">La <xref:System.Windows.Controls.DockPanel> classe definisce il <xref:System.Windows.DependencyProperty> campo statico denominato <xref:System.Windows.Controls.DockPanel.DockProperty> , quindi fornisce i <xref:System.Windows.Controls.DockPanel.GetDock%2A> metodi e <xref:System.Windows.Controls.DockPanel.SetDock%2A> come funzioni di accesso pubbliche per la proprietà associata.</span><span class="sxs-lookup"><span data-stu-id="cf180-115">The <xref:System.Windows.Controls.DockPanel> class defines the static <xref:System.Windows.DependencyProperty> field named <xref:System.Windows.Controls.DockPanel.DockProperty>, and then provides the <xref:System.Windows.Controls.DockPanel.GetDock%2A> and <xref:System.Windows.Controls.DockPanel.SetDock%2A> methods as public accessors for the attached property.</span></span>

## <a name="attached-properties-in-xaml"></a><span data-ttu-id="cf180-116">Proprietà associate in XAML<a name="attached_properties_xaml"></a></span><span class="sxs-lookup"><span data-stu-id="cf180-116">Attached Properties in XAML <a name="attached_properties_xaml"></a></span></span>

<span data-ttu-id="cf180-117">In XAML, è possibile impostare le proprietà associate usando la sintassi *ProviderProprietàAssociata*.*NomeProprietà*</span><span class="sxs-lookup"><span data-stu-id="cf180-117">In XAML, you set attached properties by using the syntax *AttachedPropertyProvider*.*PropertyName*</span></span>

<span data-ttu-id="cf180-118">Di seguito è riportato un esempio di come è possibile impostare <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> in XAML:</span><span class="sxs-lookup"><span data-stu-id="cf180-118">The following is an example of how you can set <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> in XAML:</span></span>

[!code-xaml[PropertiesOvwSupport#APBasicUsage](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml#apbasicusage)]

<span data-ttu-id="cf180-119">L'utilizzo è simile a una proprietà statica. si fa sempre riferimento al tipo <xref:System.Windows.Controls.DockPanel> proprietario e si registra la proprietà associata, anziché fare riferimento a qualsiasi istanza specificata in base al nome.</span><span class="sxs-lookup"><span data-stu-id="cf180-119">The usage is somewhat similar to a static property; you always reference the type <xref:System.Windows.Controls.DockPanel> that owns and registers the attached property, rather than referring to any instance specified by name.</span></span>

<span data-ttu-id="cf180-120">Inoltre, dato che una proprietà associata in XAML è un attributo che viene impostato nel markup, solo l'operazione di impostazione ha una certa rilevanza.</span><span class="sxs-lookup"><span data-stu-id="cf180-120">Also, because an attached property in XAML is an attribute that you set in markup, only the set operation has any relevance.</span></span> <span data-ttu-id="cf180-121">Non è possibile ottenere direttamente una proprietà in XAML, sebbene esistano alcuni meccanismi indiretti per confrontare i valori, ad esempio i trigger negli stili. Per altri dettagli, vedere [Applicazione di stili e modelli](../../../desktop-wpf/fundamentals/styles-templates-overview.md).</span><span class="sxs-lookup"><span data-stu-id="cf180-121">You cannot directly get a property in XAML, although there are some indirect mechanisms for comparing values, such as triggers in styles (for details, see [Styling and Templating](../../../desktop-wpf/fundamentals/styles-templates-overview.md)).</span></span>

### <a name="attached-property-implementation-in-wpf"></a><span data-ttu-id="cf180-122">Implementazione delle proprietà associate in WPF</span><span class="sxs-lookup"><span data-stu-id="cf180-122">Attached Property Implementation in WPF</span></span>

<span data-ttu-id="cf180-123">In la [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] maggior parte delle proprietà associate correlate all'interfaccia utente sui tipi WPF viene implementata come proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="cf180-123">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], most of the UI-related attached properties on WPF types are implemented as dependency properties.</span></span> <span data-ttu-id="cf180-124">Le proprietà associate sono un concetto XAML, mentre le proprietà di dipendenza sono un concetto WPF.</span><span class="sxs-lookup"><span data-stu-id="cf180-124">Attached properties are a XAML concept, whereas dependency properties are a WPF concept.</span></span> <span data-ttu-id="cf180-125">Poiché le proprietà associate a WPF sono proprietà di dipendenza, supportano concetti della proprietà di dipendenza quali i metadati della proprietà e i valori predefiniti dei metadati della proprietà.</span><span class="sxs-lookup"><span data-stu-id="cf180-125">Because WPF attached properties are dependency properties, they support dependency property concepts such as property metadata, and default values from that property metadata.</span></span>

## <a name="how-attached-properties-are-used-by-the-owning-type"></a><span data-ttu-id="cf180-126">Modalità di utilizzo delle proprietà associate da parte del tipo proprietario<a name="howused"></a></span><span class="sxs-lookup"><span data-stu-id="cf180-126">How Attached Properties Are Used by the Owning Type <a name="howused"></a></span></span>

<span data-ttu-id="cf180-127">Anche se le proprietà associate possono essere impostate per qualsiasi oggetto, ciò non significa che l'impostazione della proprietà produce un risultato tangibile o che il valore verrà usato da un altro oggetto.</span><span class="sxs-lookup"><span data-stu-id="cf180-127">Although attached properties are settable on any object, that does not automatically mean that setting the property will produce a tangible result, or that the value will ever be used by another object.</span></span> <span data-ttu-id="cf180-128">In genere, le proprietà associate sono concepite in modo che gli oggetti provenienti da un'ampia varietà di possibili gerarchie di classi o di relazioni logiche possano ciascuno riportare informazioni comuni al tipo che definisce la proprietà associata.</span><span class="sxs-lookup"><span data-stu-id="cf180-128">Generally, attached properties are intended so that objects coming from a wide variety of possible class hierarchies or logical relationships can each report common information to the type that defines the attached property.</span></span> <span data-ttu-id="cf180-129">Il tipo che definisce la proprietà associata si attiene di regola a uno di questi modelli:</span><span class="sxs-lookup"><span data-stu-id="cf180-129">The type that defines the attached property typically follows one of these models:</span></span>

- <span data-ttu-id="cf180-130">Il tipo che definisce la proprietà associata è progettato in modo da poter essere l'elemento padre degli elementi che imposteranno i valori per la proprietà associata.</span><span class="sxs-lookup"><span data-stu-id="cf180-130">The type that defines the attached property is designed so that it can be the parent element of the elements that will set values for the attached property.</span></span> <span data-ttu-id="cf180-131">Il tipo scorre quindi gli oggetti figlio attraverso la logica interna in base a una struttura ad albero degli oggetti, ottiene i valori e agisce in qualche modo su tali valori.</span><span class="sxs-lookup"><span data-stu-id="cf180-131">The type then iterates its child objects through internal logic against some object tree structure, obtains the values, and acts on those values in some manner.</span></span>

- <span data-ttu-id="cf180-132">Il tipo che definisce la proprietà associata verrà usato come elemento figlio per un'ampia gamma di elementi padre e modelli di contenuto possibili.</span><span class="sxs-lookup"><span data-stu-id="cf180-132">The type that defines the attached property will be used as the child element for a variety of possible parent elements and content models.</span></span>

- <span data-ttu-id="cf180-133">Il tipo che definisce la proprietà associata rappresenta un servizio.</span><span class="sxs-lookup"><span data-stu-id="cf180-133">The type that defines the attached property represents a service.</span></span> <span data-ttu-id="cf180-134">Gli altri tipi impostano i valori per la proprietà associata.</span><span class="sxs-lookup"><span data-stu-id="cf180-134">Other types set values for the attached property.</span></span> <span data-ttu-id="cf180-135">Pertanto, quando l'elemento che imposta la proprietà viene valutato nel contesto del servizio, i valori della proprietà associata vengono ottenuti tramite la logica interna della classe del servizio.</span><span class="sxs-lookup"><span data-stu-id="cf180-135">Then, when the element that set the property is evaluated in the context of the service, the attached property values are obtained through internal logic of the service class.</span></span>

### <a name="an-example-of-a-parent-defined-attached-property"></a><span data-ttu-id="cf180-136">Esempio di proprietà associata definita dall'elemento padre</span><span class="sxs-lookup"><span data-stu-id="cf180-136">An Example of a Parent-Defined Attached Property</span></span>

<span data-ttu-id="cf180-137">Lo scenario più comune in cui WPF definisce una proprietà associata è quando un elemento padre supporta una raccolta di elementi figlio e implementa anche un comportamento in cui le specifiche del comportamento vengono segnalate singolarmente per ogni elemento figlio.</span><span class="sxs-lookup"><span data-stu-id="cf180-137">The most typical scenario where WPF defines an attached property is when a parent element supports a child element collection, and also implements a behavior where the specifics of the behavior are reported individually for each child element.</span></span>

<span data-ttu-id="cf180-138"><xref:System.Windows.Controls.DockPanel>definisce la <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> proprietà associata e <xref:System.Windows.Controls.DockPanel> dispone di codice a livello di classe come parte della logica di rendering (in particolare, <xref:System.Windows.Controls.DockPanel.MeasureOverride%2A> e <xref:System.Windows.Controls.DockPanel.ArrangeOverride%2A> ).</span><span class="sxs-lookup"><span data-stu-id="cf180-138"><xref:System.Windows.Controls.DockPanel> defines the <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> attached property, and <xref:System.Windows.Controls.DockPanel> has class-level code as part of its rendering logic (specifically, <xref:System.Windows.Controls.DockPanel.MeasureOverride%2A> and <xref:System.Windows.Controls.DockPanel.ArrangeOverride%2A>).</span></span> <span data-ttu-id="cf180-139">Un' <xref:System.Windows.Controls.DockPanel> istanza di verificherà sempre se uno degli elementi figlio immediati ha impostato un valore per <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="cf180-139">A <xref:System.Windows.Controls.DockPanel> instance will always check to see whether any of its immediate child elements have set a value for <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="cf180-140">In questo caso, tali valori diventano l'input per la logica di rendering applicata a quel particolare elemento figlio.</span><span class="sxs-lookup"><span data-stu-id="cf180-140">If so, those values become input for the rendering logic applied to that particular child element.</span></span> <span data-ttu-id="cf180-141"><xref:System.Windows.Controls.DockPanel>Ognuna delle istanze annidate considera le raccolte di elementi figlio immediate, ma tale comportamento è specifico dell'implementazione per la modalità di <xref:System.Windows.Controls.DockPanel> elaborazione <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> dei valori.</span><span class="sxs-lookup"><span data-stu-id="cf180-141">Nested <xref:System.Windows.Controls.DockPanel> instances each treat their own immediate child element collections, but that behavior is implementation-specific to how <xref:System.Windows.Controls.DockPanel> processes <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> values.</span></span> <span data-ttu-id="cf180-142">In teoria, è possibile che alcune proprietà associate abbiano effetto su elementi più distanti dell'elemento padre immediato.</span><span class="sxs-lookup"><span data-stu-id="cf180-142">It is theoretically possible to have attached properties that influence elements beyond the immediate parent.</span></span> <span data-ttu-id="cf180-143">Se la <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> proprietà associata è impostata su un elemento che non ha un <xref:System.Windows.Controls.DockPanel> elemento padre su cui agire, non viene generato alcun errore o eccezione.</span><span class="sxs-lookup"><span data-stu-id="cf180-143">If the <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> attached property is set on an element that has no <xref:System.Windows.Controls.DockPanel> parent element to act upon it, no error or exception is raised.</span></span> <span data-ttu-id="cf180-144">Ciò significa semplicemente che è stato impostato un valore di proprietà globale, ma non dispone <xref:System.Windows.Controls.DockPanel> di un elemento padre corrente che potrebbe utilizzare le informazioni.</span><span class="sxs-lookup"><span data-stu-id="cf180-144">This simply means that a global property value was set, but it has no current <xref:System.Windows.Controls.DockPanel> parent that could consume the information.</span></span>

## <a name="attached-properties-in-code"></a><span data-ttu-id="cf180-145">Proprietà associate nel codice<a name="attached_properties_code"></a></span><span class="sxs-lookup"><span data-stu-id="cf180-145">Attached Properties in Code <a name="attached_properties_code"></a></span></span>

<span data-ttu-id="cf180-146">Le proprietà associate in WPF non dispongono dei tipici metodi "wrapper" di CLR per un accesso semplice di tipo get/set.</span><span class="sxs-lookup"><span data-stu-id="cf180-146">Attached properties in WPF do not have the typical CLR "wrapper" methods for easy get/set access.</span></span> <span data-ttu-id="cf180-147">Ciò è dovuto al fatto che la proprietà associata non appartiene necessariamente allo spazio dei nomi CLR per le istanze in cui è impostata la proprietà.</span><span class="sxs-lookup"><span data-stu-id="cf180-147">This is because the attached property is not necessarily part of the CLR namespace for instances where the property is set.</span></span> <span data-ttu-id="cf180-148">Tuttavia, un processore XAML deve essere in grado di impostare tali valori quando il codice XAML viene analizzato.</span><span class="sxs-lookup"><span data-stu-id="cf180-148">However, a XAML processor must be able to set those values when XAML is parsed.</span></span> <span data-ttu-id="cf180-149">Per supportare un utilizzo efficace delle proprietà associate, il tipo di proprietario della proprietà associata deve implementare metodi delle funzioni di accesso dedicate nel formato **Get_PropertyName_** e **Set_PropertyName_**.</span><span class="sxs-lookup"><span data-stu-id="cf180-149">To support an effective attached property usage, the owner type of the attached property must implement dedicated accessor methods in the form **Get_PropertyName_** and **Set_PropertyName_**.</span></span> <span data-ttu-id="cf180-150">Questi metodi della funzione di accesso dedicati sono anche utili per ottenere o impostare la proprietà associata nel codice.</span><span class="sxs-lookup"><span data-stu-id="cf180-150">These dedicated accessor methods are also useful to get or set the attached property in code.</span></span> <span data-ttu-id="cf180-151">Dal punto di vista del codice, una proprietà associata è simile a un campo sottostante che dispone di funzioni di accesso ai metodi anziché di funzioni di accesso alle proprietà e tale campo sottostante può trovarsi in qualsiasi oggetto senza che sia necessario definirlo in modo specifico.</span><span class="sxs-lookup"><span data-stu-id="cf180-151">From a code perspective, an attached property is similar to a backing field that has method accessors instead of property accessors, and that backing field can exist on any object rather than needing to be specifically defined.</span></span>

<span data-ttu-id="cf180-152">L'esempio seguente illustra come impostare una proprietà associata nel codice.</span><span class="sxs-lookup"><span data-stu-id="cf180-152">The following example shows how you can set an attached property in code.</span></span> <span data-ttu-id="cf180-153">In questo esempio, `myCheckBox` è un'istanza della <xref:System.Windows.Controls.CheckBox> classe.</span><span class="sxs-lookup"><span data-stu-id="cf180-153">In this example, `myCheckBox` is an instance of the <xref:System.Windows.Controls.CheckBox> class.</span></span>

[!code-csharp[PropertiesOvwSupport#APCode](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml.cs#apcode)]
[!code-vb[PropertiesOvwSupport#APCode](~/samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport/visualbasic/page4.xaml.vb#apcode)]

<span data-ttu-id="cf180-154">Analogamente al caso XAML, se `myCheckBox` non è già stato aggiunto come elemento figlio di `myDockPanel` dalla quarta riga di codice, la quinta riga di codice non genera un'eccezione, ma il valore della proprietà non interagisce con un elemento <xref:System.Windows.Controls.DockPanel> padre e quindi non esegue alcuna operazione.</span><span class="sxs-lookup"><span data-stu-id="cf180-154">Similar to the XAML case, if `myCheckBox` had not already been added as a child element of `myDockPanel` by the fourth line of code, the fifth line of code would not raise an exception, but the property value would not interact with a <xref:System.Windows.Controls.DockPanel> parent and thus would do nothing.</span></span> <span data-ttu-id="cf180-155">Solo un <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> valore impostato su un elemento figlio combinato con la presenza di un <xref:System.Windows.Controls.DockPanel> elemento padre provocherà un comportamento effettivo nell'applicazione sottoposta a rendering.</span><span class="sxs-lookup"><span data-stu-id="cf180-155">Only a <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> value set on a child element combined with the presence of a <xref:System.Windows.Controls.DockPanel> parent element will cause an effective behavior in the rendered application.</span></span> <span data-ttu-id="cf180-156">In questo caso, è possibile impostare la proprietà associata e quindi effettuare l'associazione alla struttura ad albero.</span><span class="sxs-lookup"><span data-stu-id="cf180-156">(In this case, you could set the attached property, then attach to the tree.</span></span> <span data-ttu-id="cf180-157">In alternativa, è possibile effettuare l'associazione alla struttura ad albero, quindi impostare la proprietà associata.</span><span class="sxs-lookup"><span data-stu-id="cf180-157">Or you could attach to the tree then set the attached property.</span></span> <span data-ttu-id="cf180-158">Qualunque sia l'ordine delle azioni, il risultato è il medesimo.</span><span class="sxs-lookup"><span data-stu-id="cf180-158">Either action order provides the same result.)</span></span>

## <a name="attached-property-metadata"></a><span data-ttu-id="cf180-159">Metadati delle proprietà associate<a name="attached_properties_metadata"></a></span><span class="sxs-lookup"><span data-stu-id="cf180-159">Attached Property Metadata <a name="attached_properties_metadata"></a></span></span>

<span data-ttu-id="cf180-160">Quando si registra la proprietà, <xref:System.Windows.FrameworkPropertyMetadata> viene impostato per specificare le caratteristiche della proprietà, ad esempio se la proprietà influisca sul rendering, sulla misurazione e così via.</span><span class="sxs-lookup"><span data-stu-id="cf180-160">When registering the property, <xref:System.Windows.FrameworkPropertyMetadata> is set to specify characteristics of the property, such as whether the property affects rendering, measurement, and so on.</span></span> <span data-ttu-id="cf180-161">I metadati di una proprietà associata non sono in genere diversi rispetto a quelli presenti per una proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="cf180-161">Metadata for an attached property is generally no different than on a dependency property.</span></span> <span data-ttu-id="cf180-162">Se si specifica un valore predefinito in un override per i metadati di una proprietà associata, tale valore diventa il valore predefinito della proprietà associata implicita nelle istanze della classe che esegue l'override.</span><span class="sxs-lookup"><span data-stu-id="cf180-162">If you specify a default value in an override to attached property metadata, that value becomes the default value of the implicit attached property on instances of the overriding class.</span></span> <span data-ttu-id="cf180-163">In particolare, il valore predefinito viene segnalato se un processo esegue una query per recuperare il valore di una proprietà associata tramite la funzione di accesso al metodo `Get` di quella proprietà, specificando un'istanza della classe in cui sono stati definiti i metadati e il valore per quella proprietà collegata non è stato impostato diversamente.</span><span class="sxs-lookup"><span data-stu-id="cf180-163">Specifically, your default value is reported if some process queries for the value of an attached property through the `Get` method accessor for that property, specifying an instance of the class where you specified the metadata, and the value for that attached property was otherwise not set.</span></span>

<span data-ttu-id="cf180-164">Se si vuole abilitare l'ereditarietà del valore di una proprietà, è necessario usare le proprietà associate anziché le proprietà di dipendenza non associate.</span><span class="sxs-lookup"><span data-stu-id="cf180-164">If you want to enable property value inheritance on a property, you should use attached properties rather than non-attached dependency properties.</span></span> <span data-ttu-id="cf180-165">Per informazioni dettagliate, vedere [Ereditarietà del valore della proprietà](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="cf180-165">For details, see [Property Value Inheritance](property-value-inheritance.md).</span></span>

## <a name="custom-attached-properties"></a><span data-ttu-id="cf180-166">Proprietà associate personalizzate<a name="custom"></a></span><span class="sxs-lookup"><span data-stu-id="cf180-166">Custom Attached Properties <a name="custom"></a></span></span>

### <a name="when-to-create-an-attached-property"></a><span data-ttu-id="cf180-167">Quando creare una proprietà associata<a name="create_attached_properties"></a></span><span class="sxs-lookup"><span data-stu-id="cf180-167">When to Create an Attached Property <a name="create_attached_properties"></a></span></span>

<span data-ttu-id="cf180-168">È possibile creare una proprietà associata quando è necessario disporre di un meccanismo di impostazione delle proprietà per le classi diverse dalla classe di definizione.</span><span class="sxs-lookup"><span data-stu-id="cf180-168">You might create an attached property when there is a reason to have a property setting mechanism available for classes other than the defining class.</span></span> <span data-ttu-id="cf180-169">In questo caso, lo scenario più comune è il layout.</span><span class="sxs-lookup"><span data-stu-id="cf180-169">The most common scenario for this is layout.</span></span> <span data-ttu-id="cf180-170">Esempi di proprietà di layout esistenti sono <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> , <xref:System.Windows.Controls.Panel.ZIndex%2A?displayProperty=nameWithType> e <xref:System.Windows.Controls.Canvas.Top%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="cf180-170">Examples of existing layout properties are <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType>, <xref:System.Windows.Controls.Panel.ZIndex%2A?displayProperty=nameWithType>, and <xref:System.Windows.Controls.Canvas.Top%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="cf180-171">Nello scenario abilitato in questo contesto, gli elementi disponibili come elementi figlio degli elementi di controllo del layout sono in grado di indicare i requisiti del layout agli elementi padre del layout singolarmente, impostando ciascuno un valore della proprietà definito dall'elemento padre come proprietà associata.</span><span class="sxs-lookup"><span data-stu-id="cf180-171">The scenario enabled here is that elements that exist as child elements to layout-controlling elements are able to express layout requirements to their layout parent elements individually, each setting a property value that the parent defined as an attached property.</span></span>

<span data-ttu-id="cf180-172">Un altro scenario per l'uso di una proprietà associata è quello in cui la classe rappresenta un servizio e si vuole che le classi siano in grado di integrare il servizio in modo più trasparente.</span><span class="sxs-lookup"><span data-stu-id="cf180-172">Another scenario for using an attached property is when your class represents a service, and you want classes to be able to integrate the service more transparently.</span></span>

<span data-ttu-id="cf180-173">Un altro scenario è la ricezione del supporto di progettazione WPF di Visual Studio, ad esempio la modifica della finestra **Proprietà** .</span><span class="sxs-lookup"><span data-stu-id="cf180-173">Yet another scenario is to receive Visual Studio WPF Designer support, such as **Properties** window editing.</span></span> <span data-ttu-id="cf180-174">Per altre informazioni, vedere [Cenni preliminari sulla modifica di controlli](../controls/control-authoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="cf180-174">For more information, see [Control Authoring Overview](../controls/control-authoring-overview.md).</span></span>

<span data-ttu-id="cf180-175">Come indicato in precedenza, è necessario eseguire la registrazione come proprietà associata se si vuole usare l'ereditarietà del valore della proprietà.</span><span class="sxs-lookup"><span data-stu-id="cf180-175">As mentioned before, you should register as an attached property if you want to use property value inheritance.</span></span>

### <a name="how-to-create-an-attached-property"></a><span data-ttu-id="cf180-176">Come creare una proprietà associata<a name="how_do_i_create_attached_properties"></a></span><span class="sxs-lookup"><span data-stu-id="cf180-176">How to Create an Attached Property <a name="how_do_i_create_attached_properties"></a></span></span>

<span data-ttu-id="cf180-177">Se la classe definisce la proprietà associata esclusivamente per l'uso in altri tipi, la classe non deve derivare da <xref:System.Windows.DependencyObject> .</span><span class="sxs-lookup"><span data-stu-id="cf180-177">If your class is defining the attached property strictly for use on other types, then the class does not have to derive from <xref:System.Windows.DependencyObject>.</span></span> <span data-ttu-id="cf180-178">Tuttavia, è necessario derivare da <xref:System.Windows.DependencyObject> se si segue il modello WPF generale di che la proprietà associata sia anche una proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="cf180-178">But you do need to derive from <xref:System.Windows.DependencyObject> if you follow the overall WPF model of having your attached property also be a dependency property.</span></span>

<span data-ttu-id="cf180-179">Definire la proprietà associata come proprietà di dipendenza dichiarando un `public static readonly` campo di tipo <xref:System.Windows.DependencyProperty> .</span><span class="sxs-lookup"><span data-stu-id="cf180-179">Define your attached property as a dependency property by declaring a `public static readonly` field of type <xref:System.Windows.DependencyProperty>.</span></span> <span data-ttu-id="cf180-180">Questo campo viene definito usando il valore restituito del <xref:System.Windows.DependencyProperty.RegisterAttached%2A> metodo.</span><span class="sxs-lookup"><span data-stu-id="cf180-180">You define this field by using the return value of the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method.</span></span> <span data-ttu-id="cf180-181">Il nome del campo deve corrispondere al nome della proprietà associata, accodato con la stringa `Property` , per seguire il modello WPF stabilito di denominazione dei campi di identificazione rispetto alle proprietà che rappresentano.</span><span class="sxs-lookup"><span data-stu-id="cf180-181">The field name must match the attached property name, appended with the string `Property`, to follow the established WPF pattern of naming the identifying fields versus the properties that they represent.</span></span> <span data-ttu-id="cf180-182">Il provider di proprietà associate deve fornire anche metodi di **Get_PropertyName_** e **Set_PropertyName_** statici come funzioni di accesso per la proprietà associata. in caso contrario, il sistema di proprietà non è in grado di utilizzare la proprietà associata.</span><span class="sxs-lookup"><span data-stu-id="cf180-182">The attached property provider must also provide static **Get_PropertyName_** and **Set_PropertyName_** methods as accessors for the attached property; failing to do this results in the property system being unable to use your attached property.</span></span>

> [!NOTE]
> <span data-ttu-id="cf180-183">Se si omette la funzione di accesso get della proprietà associata, data binding nella proprietà non funzionerà negli strumenti di progettazione, ad esempio Visual Studio e Blend per Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="cf180-183">If you omit the attached property's get accessor, data binding on the property will not work in design tools, such as Visual Studio and Blend for Visual Studio.</span></span>

#### <a name="the-get-accessor"></a><span data-ttu-id="cf180-184">Funzione di accesso Get</span><span class="sxs-lookup"><span data-stu-id="cf180-184">The Get Accessor</span></span>

<span data-ttu-id="cf180-185">La firma per la funzione di accesso **Get_PropertyName_** deve essere:</span><span class="sxs-lookup"><span data-stu-id="cf180-185">The signature for the **Get_PropertyName_** accessor must be:</span></span>

`public static object GetPropertyName(object target)`

- <span data-ttu-id="cf180-186">L'oggetto `target` può essere specificato come tipo più specifico nell'implementazione.</span><span class="sxs-lookup"><span data-stu-id="cf180-186">The `target` object can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="cf180-187">Il metodo, ad esempio, <xref:System.Windows.Controls.DockPanel.GetDock%2A?displayProperty=nameWithType> digita il parametro come <xref:System.Windows.UIElement> , perché la proprietà associata è destinata solo a essere impostata per le <xref:System.Windows.UIElement> istanze.</span><span class="sxs-lookup"><span data-stu-id="cf180-187">For example, the <xref:System.Windows.Controls.DockPanel.GetDock%2A?displayProperty=nameWithType> method types the parameter as <xref:System.Windows.UIElement>, because the attached property is only intended to be set on <xref:System.Windows.UIElement> instances.</span></span>

- <span data-ttu-id="cf180-188">Il valore restituito può essere specificato come tipo più specifico nell'implementazione.</span><span class="sxs-lookup"><span data-stu-id="cf180-188">The return value can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="cf180-189">Il metodo, ad esempio, lo <xref:System.Windows.Controls.DockPanel.GetDock%2A> digita come <xref:System.Windows.Controls.Dock> , perché il valore può essere impostato solo su tale enumerazione.</span><span class="sxs-lookup"><span data-stu-id="cf180-189">For example, the <xref:System.Windows.Controls.DockPanel.GetDock%2A> method types it as <xref:System.Windows.Controls.Dock>, because the value can only be set to that enumeration.</span></span>

#### <a name="the-set-accessor"></a><span data-ttu-id="cf180-190">Funzione di accesso Set</span><span class="sxs-lookup"><span data-stu-id="cf180-190">The Set Accessor</span></span>

<span data-ttu-id="cf180-191">La firma per la funzione di accesso **Set_PropertyName_** deve essere:</span><span class="sxs-lookup"><span data-stu-id="cf180-191">The signature for the **Set_PropertyName_** accessor must be:</span></span>

`public static void SetPropertyName(object target, object value)`

- <span data-ttu-id="cf180-192">L'oggetto `target` può essere specificato come tipo più specifico nell'implementazione.</span><span class="sxs-lookup"><span data-stu-id="cf180-192">The `target` object can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="cf180-193">Il metodo, ad esempio, lo <xref:System.Windows.Controls.DockPanel.SetDock%2A> digita come <xref:System.Windows.UIElement> , perché la proprietà associata è destinata solo a essere impostata per le <xref:System.Windows.UIElement> istanze.</span><span class="sxs-lookup"><span data-stu-id="cf180-193">For example, the <xref:System.Windows.Controls.DockPanel.SetDock%2A> method types it as <xref:System.Windows.UIElement>, because the attached property is only intended to be set on <xref:System.Windows.UIElement> instances.</span></span>

- <span data-ttu-id="cf180-194">L'oggetto `value` può essere specificato come tipo più specifico nell'implementazione.</span><span class="sxs-lookup"><span data-stu-id="cf180-194">The `value` object can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="cf180-195">Il metodo, ad esempio, lo <xref:System.Windows.Controls.DockPanel.SetDock%2A> digita come <xref:System.Windows.Controls.Dock> , perché il valore può essere impostato solo su tale enumerazione.</span><span class="sxs-lookup"><span data-stu-id="cf180-195">For example, the <xref:System.Windows.Controls.DockPanel.SetDock%2A> method types it as <xref:System.Windows.Controls.Dock>, because the value can only be set to that enumeration.</span></span> <span data-ttu-id="cf180-196">Tenere presente che il valore per questo metodo è l'input proveniente dal caricatore XAML quando rileva la proprietà associata in un utilizzo della proprietà associata nel markup.</span><span class="sxs-lookup"><span data-stu-id="cf180-196">Remember that the value for this method is the input coming from the XAML loader when it encounters your attached property in an attached property usage in markup.</span></span> <span data-ttu-id="cf180-197">Tale input è il valore specificato come valore di attributo XAML nel markup.</span><span class="sxs-lookup"><span data-stu-id="cf180-197">That input is the value specified as a XAML attribute value in markup.</span></span> <span data-ttu-id="cf180-198">Pertanto, per il tipo usato devono essere disponibili la conversione di tipo, il serializzatore del valore o il supporto per l'estensione di markup, in modo da poter creare il tipo appropriato in base al valore dell'attributo, rappresentato in pratica semplicemente da una stringa.</span><span class="sxs-lookup"><span data-stu-id="cf180-198">Therefore there must be type conversion, value serializer, or markup extension support for the type you use, such that the appropriate type can be created from the attribute value (which is ultimately just a string).</span></span>

<span data-ttu-id="cf180-199">Nell'esempio seguente viene illustrata la registrazione della proprietà di dipendenza (tramite il <xref:System.Windows.DependencyProperty.RegisterAttached%2A> metodo), nonché le funzioni di accesso **Get_PropertyName_** e **Set_PropertyName_** .</span><span class="sxs-lookup"><span data-stu-id="cf180-199">The following example shows the dependency property registration (using the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method), as well as the **Get_PropertyName_** and **Set_PropertyName_** accessors.</span></span> <span data-ttu-id="cf180-200">Nell'esempio, la proprietà associata è denominata `IsBubbleSource`.</span><span class="sxs-lookup"><span data-stu-id="cf180-200">In the example, the attached property name is `IsBubbleSource`.</span></span> <span data-ttu-id="cf180-201">Pertanto, le funzioni di accesso devono essere chiamate `GetIsBubbleSource` e `SetIsBubbleSource`.</span><span class="sxs-lookup"><span data-stu-id="cf180-201">Therefore, the accessors must be named `GetIsBubbleSource` and `SetIsBubbleSource`.</span></span>

[!code-csharp[WPFAquariumSln#RegisterAttachedBubbler](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFAquariumSln/CSharp/WPFAquariumObjects/Class1.cs#registerattachedbubbler)]
[!code-vb[WPFAquariumSln#RegisterAttachedBubbler](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFAquariumSln/visualbasic/wpfaquariumobjects/class1.vb#registerattachedbubbler)]

#### <a name="attached-property-attributes"></a><span data-ttu-id="cf180-202">Attributi delle proprietà associate</span><span class="sxs-lookup"><span data-stu-id="cf180-202">Attached Property Attributes</span></span>

<span data-ttu-id="cf180-203">WPF definisce diversi attributi .NET che hanno lo scopo di fornire informazioni sulle proprietà associate ai processi di reflection e agli utenti tipici delle informazioni sulla reflection e sulle proprietà, ad esempio le finestre di progettazione.</span><span class="sxs-lookup"><span data-stu-id="cf180-203">WPF defines several .NET attributes that are intended to provide information about attached properties to reflection processes, and to typical users of reflection and property information such as designers.</span></span> <span data-ttu-id="cf180-204">Dato che le proprietà associate hanno un tipo con ambito illimitato, le finestre di progettazione devono disporre di un modo per evitare di sopraffare gli utenti con un elenco globale di tutte le proprietà associate definite in una particolare implementazione della tecnologia che usa XAML.</span><span class="sxs-lookup"><span data-stu-id="cf180-204">Because attached properties have a type of unlimited scope, designers need a way to avoid overwhelming users with a global list of all the attached properties that are defined in a particular technology implementation that uses XAML.</span></span> <span data-ttu-id="cf180-205">Gli attributi .NET definiti da WPF per le proprietà associate possono essere utilizzati per definire l'ambito delle situazioni in cui una determinata proprietà associata deve essere visualizzata in una finestra delle proprietà.</span><span class="sxs-lookup"><span data-stu-id="cf180-205">The .NET attributes that WPF defines for attached properties can be used to scope the situations where a given attached property should be shown in a properties window.</span></span> <span data-ttu-id="cf180-206">È possibile prendere in considerazione l'applicazione di questi attributi anche per le proprietà associate personalizzate.</span><span class="sxs-lookup"><span data-stu-id="cf180-206">You might consider applying these attributes for your own custom attached properties also.</span></span> <span data-ttu-id="cf180-207">Lo scopo e la sintassi degli attributi .NET sono descritti nelle pagine di riferimento appropriate:</span><span class="sxs-lookup"><span data-stu-id="cf180-207">The purpose and syntax of the .NET attributes is described on the appropriate reference pages:</span></span>

- <xref:System.Windows.AttachedPropertyBrowsableAttribute>

- <xref:System.Windows.AttachedPropertyBrowsableForChildrenAttribute>

- <xref:System.Windows.AttachedPropertyBrowsableForTypeAttribute>

- <xref:System.Windows.AttachedPropertyBrowsableWhenAttributePresentAttribute>

## <a name="learning-more-about-attached-properties"></a><span data-ttu-id="cf180-208">Ulteriori informazioni sulle proprietà associate<a name="more"></a></span><span class="sxs-lookup"><span data-stu-id="cf180-208">Learning More About Attached Properties <a name="more"></a></span></span>

- <span data-ttu-id="cf180-209">Per altre informazioni sulla creazione di una proprietà associata, vedere [Registrare una proprietà associata](how-to-register-an-attached-property.md).</span><span class="sxs-lookup"><span data-stu-id="cf180-209">For more information on creating an attached property, see [Register an Attached Property](how-to-register-an-attached-property.md).</span></span>

- <span data-ttu-id="cf180-210">Per scenari di utilizzo più avanzati delle proprietà di dipendenza e delle proprietà associate, vedere [Proprietà di dipendenza personalizzate](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="cf180-210">For more advanced usage scenarios for dependency properties and attached properties, see [Custom Dependency Properties](custom-dependency-properties.md).</span></span>

- <span data-ttu-id="cf180-211">È anche possibile registrare una proprietà come proprietà associata e proprietà di dipendenza, ma continuare a esporre le implementazioni del "wrapper".</span><span class="sxs-lookup"><span data-stu-id="cf180-211">You can also register a property as an attached property, and as a dependency property, but then still expose "wrapper" implementations.</span></span> <span data-ttu-id="cf180-212">In questo caso, la proprietà può essere impostata in tale elemento o in qualsiasi elemento tramite la sintassi per le proprietà associate XAML.</span><span class="sxs-lookup"><span data-stu-id="cf180-212">In this case, the property can be set either on that element, or on any element through the XAML attached property syntax.</span></span> <span data-ttu-id="cf180-213">Un esempio di proprietà con uno scenario appropriato per gli utilizzi standard e collegati è <xref:System.Windows.FrameworkElement.FlowDirection%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="cf180-213">An example of a property with an appropriate scenario for both standard and attached usages is <xref:System.Windows.FrameworkElement.FlowDirection%2A?displayProperty=nameWithType>.</span></span>

## <a name="see-also"></a><span data-ttu-id="cf180-214">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="cf180-214">See also</span></span>

- <xref:System.Windows.DependencyProperty>
- [<span data-ttu-id="cf180-215">Cenni preliminari sulle proprietà di dipendenza</span><span class="sxs-lookup"><span data-stu-id="cf180-215">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="cf180-216">Proprietà di dipendenza personalizzate</span><span class="sxs-lookup"><span data-stu-id="cf180-216">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
- [<span data-ttu-id="cf180-217">Panoramica di XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="cf180-217">XAML Overview (WPF)</span></span>](../../../desktop-wpf/fundamentals/xaml.md)
- [<span data-ttu-id="cf180-218">Registrare una proprietà associata</span><span class="sxs-lookup"><span data-stu-id="cf180-218">Register an Attached Property</span></span>](how-to-register-an-attached-property.md)
