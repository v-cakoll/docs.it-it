---
title: Provider ETW di CLR
description: 'Esaminare i dettagli sui due provider ETW (Event Tracing for Windows) di Common Language Runtime (CLR): il provider runtimne e il provider di rundown.'
ms.date: 03/30/2017
helpviewer_keywords:
- ETW, CLR providers
- CLR ETW providers
ms.assetid: 0beafad4-b2c8-47f4-b342-83411d57a51f
ms.openlocfilehash: 9f86e8334482880c4f7cb23ec93a3c826c083389
ms.sourcegitcommit: 0fa2b7b658bf137e813a7f4d09589d64c148ebf5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/14/2020
ms.locfileid: "86309651"
---
# <a name="clr-etw-providers"></a><span data-ttu-id="90b72-103">Provider ETW di CLR</span><span class="sxs-lookup"><span data-stu-id="90b72-103">CLR ETW Providers</span></span>
<span data-ttu-id="90b72-104">Common Language Runtime (CLR) dispone di due provider, ovvero il provider di runtime e quello di rundown.</span><span class="sxs-lookup"><span data-stu-id="90b72-104">The common language runtime (CLR) has two providers: the runtime provider and the rundown provider.</span></span>  
  
 <span data-ttu-id="90b72-105">Il provider di runtime genera eventi in base alle parole chiave (categorie di eventi) abilitate.</span><span class="sxs-lookup"><span data-stu-id="90b72-105">The runtime provider raises events, depending on which keywords (categories of events) are enabled.</span></span> <span data-ttu-id="90b72-106">È ad esempio possibile raccogliere gli eventi del caricatore abilitando la parola chiave `LoaderKeyword`.</span><span class="sxs-lookup"><span data-stu-id="90b72-106">For example, you can collect loader events by enabling the `LoaderKeyword` keyword.</span></span>  
  
 <span data-ttu-id="90b72-107">Gli eventi Event Tracing for Windows (ETW) vengono registrati in un file con estensione ETL, che può essere successivamente elaborato in un file con valori delimitati da virgole (CSV) in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="90b72-107">Event Tracing for Windows (ETW) events are logged into a file that has an .etl extension, which can later be post-processed in comma-separated value (.csv) files as needed.</span></span> <span data-ttu-id="90b72-108">Per informazioni su come convertire il file con estensione etl in un file con estensione csv, vedere [Controllo della registrazione di .NET Framework](controlling-logging.md).</span><span class="sxs-lookup"><span data-stu-id="90b72-108">For information about how to convert the .etl file to a .csv file, see [Controlling .NET Framework Logging](controlling-logging.md).</span></span>  
  
## <a name="the-runtime-provider"></a><span data-ttu-id="90b72-109">Provider di runtime</span><span class="sxs-lookup"><span data-stu-id="90b72-109">The Runtime Provider</span></span>  
 <span data-ttu-id="90b72-110">Il provider di runtime è il principale provider ETW di CLR.</span><span class="sxs-lookup"><span data-stu-id="90b72-110">The runtime provider is the main CLR ETW provider.</span></span>  
  
 <span data-ttu-id="90b72-111">Il GUID del provider di runtime di CLR è e13c0d23-ccbc-4e12-931b-d9cc2eee27e4.</span><span class="sxs-lookup"><span data-stu-id="90b72-111">The CLR runtime provider GUID is e13c0d23-ccbc-4e12-931b-d9cc2eee27e4.</span></span>  
  
 <span data-ttu-id="90b72-112">Per alcuni esempi di registrazione e visualizzazione di eventi ETW di CLR tramite strumenti comunemente disponibili, vedere [Controllo della registrazione di .NET Framework](controlling-logging.md).</span><span class="sxs-lookup"><span data-stu-id="90b72-112">For examples of how to log and view CLR ETW events by using commonly available tools, see [Controlling .NET Framework Logging](controlling-logging.md).</span></span>  
  
 <span data-ttu-id="90b72-113">Oltre a usare parole chiave, come `LoaderKeyword`, può essere necessario abilitare parole chiave per la registrazione di eventi che possono essere generati troppo di frequente.</span><span class="sxs-lookup"><span data-stu-id="90b72-113">In addition to using keywords such as `LoaderKeyword`, you may have to enable keywords for logging events that may be raised too frequently.</span></span> <span data-ttu-id="90b72-114">Questi eventi sono abilitati dalle parole chiave `StartEnumerationKeyword` e `EndEnumerationKeyword`, riepilogate in [Parole chiave e livelli ETW di CLR](clr-etw-keywords-and-levels.md).</span><span class="sxs-lookup"><span data-stu-id="90b72-114">The `StartEnumerationKeyword` and the `EndEnumerationKeyword` keywords enable these events and are summarized in [CLR ETW Keywords and Levels](clr-etw-keywords-and-levels.md).</span></span>  
  
## <a name="the-rundown-provider"></a><span data-ttu-id="90b72-115">Provider di rundown</span><span class="sxs-lookup"><span data-stu-id="90b72-115">The Rundown Provider</span></span>  
 <span data-ttu-id="90b72-116">Il provider di rundown deve essere attivato per determinati usi finalizzati a scopi specifici.</span><span class="sxs-lookup"><span data-stu-id="90b72-116">The rundown provider must be turned on for certain special-purpose uses.</span></span> <span data-ttu-id="90b72-117">Per la maggior parte degli utenti, tuttavia, dovrebbe essere sufficiente il provider di runtime.</span><span class="sxs-lookup"><span data-stu-id="90b72-117">However, for a majority of users, the runtime provider should suffice.</span></span>  
  
 <span data-ttu-id="90b72-118">Il GUID del provider di rundown di CLR è A669021C-C450-4609-A035-5AF59AF4DF18.</span><span class="sxs-lookup"><span data-stu-id="90b72-118">The CLR rundown provider GUID is A669021C-C450-4609-A035-5AF59AF4DF18.</span></span>  
  
 <span data-ttu-id="90b72-119">La registrazione ETW viene in genere abilitata prima dell'avvio di un processo e disattivata al termine dello stesso.</span><span class="sxs-lookup"><span data-stu-id="90b72-119">Normally, ETW logging is enabled before a process launches, and the logging is turned off after the process exits.</span></span> <span data-ttu-id="90b72-120">Se tuttavia la registrazione ETW viene attivata durante l'esecuzione del processo, sono necessarie informazioni aggiuntive sul processo.</span><span class="sxs-lookup"><span data-stu-id="90b72-120">However, if ETW logging is turned on while the process is executing, additional information is needed about the process.</span></span> <span data-ttu-id="90b72-121">Per la risoluzione dei simboli, ad esempio, è necessario registrare gli eventi di metodo per i metodi già caricati prima dell'attivazione della registrazione.</span><span class="sxs-lookup"><span data-stu-id="90b72-121">For example, for symbol resolution you have to log method events for methods that were already loaded before logging was turned on.</span></span>  
  
 <span data-ttu-id="90b72-122">Gli eventi `DCStart` e `DCEnd` acquisiscono lo stato del processo al momento dell'avvio e dell'arresto della raccolta dei dati.</span><span class="sxs-lookup"><span data-stu-id="90b72-122">The `DCStart` and `DCEnd` events capture the state of the process when data collection was started and stopped.</span></span> <span data-ttu-id="90b72-123">(Lo stato si riferisce alle informazioni a livello generale, inclusi i metodi che sono già stati compilati JIT (just-in-Time) e gli assembly caricati. Questi due eventi possono fornire informazioni sugli eventi che si sono già verificati nel processo. ad esempio, quali metodi sono stati compilati tramite JIT e così via.</span><span class="sxs-lookup"><span data-stu-id="90b72-123">(State refers to information at a high level, including the methods that were already just-in-time (JIT) compiled and assemblies that were loaded.) These two events can provide information about what has already happened in the process; for example, which methods were JIT- compiled, and so on.</span></span>  
  
 <span data-ttu-id="90b72-124">Solo gli eventi il cui nome contiene `DC`, `DCStart`, `DCEnd` o `DCInit` vengono generati nel provider di rundown</span><span class="sxs-lookup"><span data-stu-id="90b72-124">Only the events with `DC`, `DCStart`, `DCEnd`, or `DCInit` in their names are raised under the rundown provider.</span></span> <span data-ttu-id="90b72-125">ed esclusivamente in questo provider.</span><span class="sxs-lookup"><span data-stu-id="90b72-125">Additionally, these events are raised only under the rundown provider.</span></span>  
  
 <span data-ttu-id="90b72-126">Oltre ai filtri delle parole chiave di evento, il provider di rundown supporta anche le parole chiave `StartRundownKeyword` e `EndRundownKeyword` per fornire un filtraggio mirato.</span><span class="sxs-lookup"><span data-stu-id="90b72-126">In addition to the event keyword filters, the rundown provider also supports the `StartRundownKeyword` and `EndRundownKeyword` keywords to provide targeted filtering.</span></span>  
  
### <a name="start-rundown"></a><span data-ttu-id="90b72-127">Rundown iniziale</span><span class="sxs-lookup"><span data-stu-id="90b72-127">Start Rundown</span></span>  
 <span data-ttu-id="90b72-128">Quando si abilita la registrazione nel provider di rundown tramite la parola chiave `StartRundownKeyword`, viene attivato un rundown iniziale.</span><span class="sxs-lookup"><span data-stu-id="90b72-128">A start rundown is triggered when logging under the rundown provider is enabled with the `StartRundownKeyword` keyword.</span></span> <span data-ttu-id="90b72-129">Ciò determina la generazione dell'evento `DCStart` e l'acquisizione dello stato del sistema.</span><span class="sxs-lookup"><span data-stu-id="90b72-129">This causes the `DCStart` event to be raised, and captures the state of the system.</span></span> <span data-ttu-id="90b72-130">Prima dell'avvio dell'enumerazione, viene generato l'evento `DCStartInit`.</span><span class="sxs-lookup"><span data-stu-id="90b72-130">Before the start of the enumeration, the `DCStartInit` event is raised.</span></span> <span data-ttu-id="90b72-131">Al termine dell'enumerazione, viene generato l'evento `DCStartComplete` per notificare al controller la regolare conclusione della raccolta dei dati.</span><span class="sxs-lookup"><span data-stu-id="90b72-131">At the end of the enumeration, the `DCStartComplete` event is raised to notify the controller that data collection terminated normally.</span></span>  
  
### <a name="end-rundown"></a><span data-ttu-id="90b72-132">Rundown finale</span><span class="sxs-lookup"><span data-stu-id="90b72-132">End Rundown</span></span>  
 <span data-ttu-id="90b72-133">Quando si abilita la registrazione nel provider di rundown tramite la parola chiave `EndRundownKeyword`, viene attivato un rundown finale.</span><span class="sxs-lookup"><span data-stu-id="90b72-133">An end rundown is triggered when logging under the rundown provider is enabled with the `EndRundownKeyword` keyword.</span></span> <span data-ttu-id="90b72-134">Ciò determina l'arresto della profilatura in un processo ancora in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="90b72-134">End rundown stops profiling on a process that continues to execute.</span></span> <span data-ttu-id="90b72-135">Gli eventi `DCEnd` acquisiscono lo stato del sistema nel momento in cui viene arrestata la profilatura.</span><span class="sxs-lookup"><span data-stu-id="90b72-135">The `DCEnd` events capture the state of the system when profiling is stopped.</span></span>  
  
 <span data-ttu-id="90b72-136">Prima dell'avvio dell'enumerazione, viene generato l'evento `DCEndInit`.</span><span class="sxs-lookup"><span data-stu-id="90b72-136">Before the start of the enumeration, the `DCEndInit` event is raised.</span></span> <span data-ttu-id="90b72-137">Al termine dell'enumerazione, viene generato l'evento `DCEndComplete` per notificare al consumer la regolare conclusione della raccolta dei dati.</span><span class="sxs-lookup"><span data-stu-id="90b72-137">At the end of the enumeration, the `DCEndComplete` event is raised to notify the consumer that data collection terminated normally.</span></span> <span data-ttu-id="90b72-138">Il rundown iniziale e quello finale vengono usati principalmente per la risoluzione di simboli gestiti.</span><span class="sxs-lookup"><span data-stu-id="90b72-138">Start rundown and end rundown are primarily used for managed symbol resolution.</span></span> <span data-ttu-id="90b72-139">Il rundown iniziale può fornire informazioni sull'intervallo di indirizzi per i metodi già compilati tramite JIT prima dell'avvio della sessione di profilatura.</span><span class="sxs-lookup"><span data-stu-id="90b72-139">Start rundown can provide address range information for methods that were already JIT-compiled before the profiling session was started.</span></span> <span data-ttu-id="90b72-140">Il rundown finale può fornire informazioni sull'intervallo di indirizzi per tutti i metodi che sono stati compilati tramite JIT quando la profilatura sta per essere disattivata.</span><span class="sxs-lookup"><span data-stu-id="90b72-140">End rundown can provide address range information for all methods that have been JIT-compiled when profiling is about to be turned off.</span></span>  
  
 <span data-ttu-id="90b72-141">Il rundown finale non viene eseguito automaticamente quando una sessione di profilatura viene arrestata.</span><span class="sxs-lookup"><span data-stu-id="90b72-141">End rundown does not happen automatically when a profiling session is stopped.</span></span> <span data-ttu-id="90b72-142">Al contrario, uno strumento che sta provando a eseguire la risoluzione di simboli gestiti deve richiamare in modo esplicito una sessione del provider di rundown di CLR, con la parola chiave `EndRundownKeyword` abilitata, appena prima dell'arresto della profilatura.</span><span class="sxs-lookup"><span data-stu-id="90b72-142">Instead, a tool that is seeking to perform managed symbol resolution has to explicitly invoke a CLR rundown provider session with the `EndRundownKeyword` keyword enabled, just before profiling is stopped.</span></span>  
  
 <span data-ttu-id="90b72-143">Anche se il rundown iniziale o il rundown finale può fornire informazioni sull'intervallo di indirizzi dei metodi per la risoluzione di simboli gestiti, è consigliabile usare la parola chiave `EndRundownKeyword` (che fornisce eventi `DCEnd`) anziché la parola chiave `StartRundownKeyword` (che fornisce eventi `DCStart`).</span><span class="sxs-lookup"><span data-stu-id="90b72-143">Although either start rundown or end rundown can provide method address range information for managed symbol resolution, we recommend that you use the `EndRundownKeyword` keyword (which supplies `DCEnd` events) instead of the `StartRundownKeyword` keyword (which supplies `DCStart` events).</span></span> <span data-ttu-id="90b72-144">Se si usa `StartRundownKeyword`, il rundown si verifica durante la sessione di profilatura e questo può pregiudicare lo scenario profilato.</span><span class="sxs-lookup"><span data-stu-id="90b72-144">Using `StartRundownKeyword` causes the rundown to happen during the profiling session, which may disturb the profiled scenario.</span></span>  
  
## <a name="etw-data-collection-using-runtime-and-rundown-providers"></a><span data-ttu-id="90b72-145">Raccolta dei dati ETW tramite provider di runtime e rundown</span><span class="sxs-lookup"><span data-stu-id="90b72-145">ETW Data Collection Using Runtime and Rundown Providers</span></span>  
 <span data-ttu-id="90b72-146">L'esempio seguente illustra come usare il provider di rundown di CLR in modo che la risoluzione di simboli dei processi gestiti abbia un impatto minimo, indipendentemente dal fatto che i processi abbiano inizio o fine all'interno o all'esterno della finestra profilata.</span><span class="sxs-lookup"><span data-stu-id="90b72-146">The following example demonstrates how to use the CLR rundown provider in a way that allows symbol resolution of managed processes with minimal impact, regardless of whether the processes start or end inside or outside the profiled window.</span></span>  
  
1. <span data-ttu-id="90b72-147">Attivare la registrazione ETW tramite il provider di runtime di CLR:</span><span class="sxs-lookup"><span data-stu-id="90b72-147">Turn on ETW logging by using the CLR runtime provider:</span></span>  
  
    ```console
    xperf -start clr -on e13c0d23-ccbc-4e12-931b-d9cc2eee27e4:0x1CCBD:0x5 -f clr1.etl
    ```  
  
     <span data-ttu-id="90b72-148">Il log verrà salvato nel file clr1.etl.</span><span class="sxs-lookup"><span data-stu-id="90b72-148">The log will be saved to the clr1.etl file.</span></span>  
  
2. <span data-ttu-id="90b72-149">Per arrestare la profilatura mentre il processo è ancora in esecuzione, avviare il provider di rundown per acquisire gli eventi `DCEnd`:</span><span class="sxs-lookup"><span data-stu-id="90b72-149">To stop profiling while the process continues to execute, start the rundown provider to capture the `DCEnd` events:</span></span>  
  
    ```console
    xperf -start clrRundown -on A669021C-C450-4609-A035-5AF59AF4DF18:0xB8:0x5 -f clr2.etl
    ```  
  
     <span data-ttu-id="90b72-150">In questo modo, la raccolta di eventi `DCEnd` potrà avviare una sessione di rundown.</span><span class="sxs-lookup"><span data-stu-id="90b72-150">This enables the collection of `DCEnd` events to start a rundown session.</span></span> <span data-ttu-id="90b72-151">La raccolta di tutti gli eventi può richiedere un tempo di attesa compreso fra 30 e 60 secondi.</span><span class="sxs-lookup"><span data-stu-id="90b72-151">You may need to wait 30 to 60 seconds for all events to be collected.</span></span> <span data-ttu-id="90b72-152">Il log verrà salvato nel file clr1.et2.</span><span class="sxs-lookup"><span data-stu-id="90b72-152">The log will be saved to the clr1.et2 file.</span></span>  
  
3. <span data-ttu-id="90b72-153">Disattivare tutta la profilatura ETW:</span><span class="sxs-lookup"><span data-stu-id="90b72-153">Turn off all ETW profiling:</span></span>  
  
    ```console
    xperf -stop clrRundown
    xperf -stop clr  
    ```  
  
4. <span data-ttu-id="90b72-154">Unire i profili per creare un unico file di log:</span><span class="sxs-lookup"><span data-stu-id="90b72-154">Merge the profiles to create one log file:</span></span>  
  
    ```console
    xperf -merge clr1.etl clr2.etl merged.etl  
    ```  
  
     <span data-ttu-id="90b72-155">Il file merged.etl conterrà gli eventi delle sessioni dei provider di runtime e rundown.</span><span class="sxs-lookup"><span data-stu-id="90b72-155">The merged.etl file will contain the events from the runtime and the rundown provider sessions.</span></span>  
  
 <span data-ttu-id="90b72-156">Uno strumento può eseguire i passaggi 2 e 3 (avvio di una sessione di rundown e conclusione della profilatura) anziché disattivare immediatamente la profilatura nel momento in cui un utente ne richiede l'arresto.</span><span class="sxs-lookup"><span data-stu-id="90b72-156">A tool can execute steps 2 and 3 (starting a rundown session and then terminating profiling) instead of immediately turning off profiling when a user requests profiling to be stopped.</span></span> <span data-ttu-id="90b72-157">Uno strumento può anche eseguire il passaggio 4.</span><span class="sxs-lookup"><span data-stu-id="90b72-157">A tool can also execute step 4.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="90b72-158">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="90b72-158">See also</span></span>

- [<span data-ttu-id="90b72-159">Eventi ETW in Common Language Runtime</span><span class="sxs-lookup"><span data-stu-id="90b72-159">ETW Events in the Common Language Runtime</span></span>](etw-events-in-the-common-language-runtime.md)
