---
title: Esecuzione di query sul servizio dati (WCF Data Services)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, querying
- WCF Data Services, accessing data
ms.assetid: 823e9444-27aa-4f1f-be8e-0486d67f54c0
ms.openlocfilehash: abae49e709fa2e77d641d991dd6e09cf82216732
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 04/18/2019
ms.locfileid: "59517291"
---
# <a name="querying-the-data-service-wcf-data-services"></a><span data-ttu-id="78cc0-102">Esecuzione di query sul servizio dati (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="78cc0-102">Querying the Data Service (WCF Data Services)</span></span>
<span data-ttu-id="78cc0-103">La libreria client di [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] consente di eseguire query su un servizio dati mediante i modelli di programmazione comuni di [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)], compreso il linguaggio LINQ (Language Integrated Query).</span><span class="sxs-lookup"><span data-stu-id="78cc0-103">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library enables you to execute queries against a data service by using familiar [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] programming patterns, including using language integrated query (LINQ).</span></span> <span data-ttu-id="78cc0-104">La libreria client traduce una query, definita nel client come un'istanza della classe <xref:System.Data.Services.Client.DataServiceQuery%601>, in un messaggio di richiesta HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="78cc0-104">The client library translates a query, which is defined on the client as an instance of the <xref:System.Data.Services.Client.DataServiceQuery%601> class, into an HTTP GET request message.</span></span> <span data-ttu-id="78cc0-105">La libreria riceve il messaggio di risposta e lo converte in istanze di classi del servizio dati client.</span><span class="sxs-lookup"><span data-stu-id="78cc0-105">The library receives the response message and translates it into instances of client data service classes.</span></span> <span data-ttu-id="78cc0-106">Queste classi vengono rilevate dall'oggetto <xref:System.Data.Services.Client.DataServiceContext> a cui appartiene <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="78cc0-106">These classes are tracked by the <xref:System.Data.Services.Client.DataServiceContext> to which the <xref:System.Data.Services.Client.DataServiceQuery%601> belongs.</span></span>  
  
## <a name="data-service-queries"></a><span data-ttu-id="78cc0-107">Query sul servizio dati</span><span class="sxs-lookup"><span data-stu-id="78cc0-107">Data Service Queries</span></span>  
 <span data-ttu-id="78cc0-108">La classe generica <xref:System.Data.Services.Client.DataServiceQuery%601> rappresenta una query che restituisce una raccolta di zero o più istanze di tipi di entità.</span><span class="sxs-lookup"><span data-stu-id="78cc0-108">The <xref:System.Data.Services.Client.DataServiceQuery%601> generic class represents a query that returns a collection of zero or more entity type instances.</span></span> <span data-ttu-id="78cc0-109">Una query sul servizio dati appartiene sempre a un contesto del servizio dati esistente.</span><span class="sxs-lookup"><span data-stu-id="78cc0-109">A data service query always belongs to an existing data service context.</span></span> <span data-ttu-id="78cc0-110">Il contesto gestisce l'URI del servizio e le informazioni sui metadati necessarie per comporre ed eseguire la query.</span><span class="sxs-lookup"><span data-stu-id="78cc0-110">This context maintains the service URI and metadata information that is required to compose and execute the query.</span></span>  
  
 <span data-ttu-id="78cc0-111">Quando si usa la **Aggiungi riferimento al servizio** finestra di dialogo per aggiungere un servizio dati a un [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]-applicazione basata su client, una classe di contenitore di entità viene creata da cui eredita il <xref:System.Data.Services.Client.DataServiceContext> classe.</span><span class="sxs-lookup"><span data-stu-id="78cc0-111">When you use the **Add Service Reference** dialog to add a data service to a [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]-based client application, an entity container class is created that inherits from the <xref:System.Data.Services.Client.DataServiceContext> class.</span></span> <span data-ttu-id="78cc0-112">Tale classe include proprietà che restituiscono istanze della classe <xref:System.Data.Services.Client.DataServiceQuery%601> tipizzate.</span><span class="sxs-lookup"><span data-stu-id="78cc0-112">This class includes properties that return typed <xref:System.Data.Services.Client.DataServiceQuery%601> instances.</span></span> <span data-ttu-id="78cc0-113">Esiste una proprietà per ogni set di entità esposto dal servizio dati.</span><span class="sxs-lookup"><span data-stu-id="78cc0-113">There is one property for each entity set that the data service exposes.</span></span> <span data-ttu-id="78cc0-114">Tali proprietà semplificano la creazione di un'istanza di <xref:System.Data.Services.Client.DataServiceQuery%601> tipizzata.</span><span class="sxs-lookup"><span data-stu-id="78cc0-114">These properties make it easier to create an instance of a typed <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span>  
  
 <span data-ttu-id="78cc0-115">Una query viene eseguita negli scenari seguenti:</span><span class="sxs-lookup"><span data-stu-id="78cc0-115">A query is executed in the following scenarios:</span></span>  
  
-   <span data-ttu-id="78cc0-116">Quando i risultati vengono enumerati in modo implicito, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="78cc0-116">When results are enumerated implicitly, such as:</span></span>  
  
    -   <span data-ttu-id="78cc0-117">Quando viene enumerata una proprietà della classe <xref:System.Data.Services.Client.DataServiceContext> che rappresenta un set di entità, ad esempio durante un ciclo `foreach` (C#) o `For Each` (Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="78cc0-117">When a property on the <xref:System.Data.Services.Client.DataServiceContext> that represents and entity set is enumerated, such as during a `foreach` (C#) or `For Each` (Visual Basic) loop.</span></span>  
  
    -   <span data-ttu-id="78cc0-118">Quando la query viene assegnata a una raccolta `List`.</span><span class="sxs-lookup"><span data-stu-id="78cc0-118">When the query is assigned to a `List` collection.</span></span>  
  
-   <span data-ttu-id="78cc0-119">Quando viene chiamato il metodo <xref:System.Data.Services.Client.DataServiceQuery%601.Execute%2A> o <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="78cc0-119">When the <xref:System.Data.Services.Client.DataServiceQuery%601.Execute%2A> or <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> method is explicitly called.</span></span>  
  
-   <span data-ttu-id="78cc0-120">Quando viene chiamato un operatore di esecuzione di query LINQ, ad esempio <xref:System.Linq.Enumerable.First%2A> o <xref:System.Linq.Enumerable.Single%2A>.</span><span class="sxs-lookup"><span data-stu-id="78cc0-120">When a LINQ query execution operator, such as <xref:System.Linq.Enumerable.First%2A> or <xref:System.Linq.Enumerable.Single%2A> is called.</span></span>  
  
 <span data-ttu-id="78cc0-121">La query seguente, al termine dell'esecuzione, restituisce tutte le entità `Customers` nel servizio dati Northwind:</span><span class="sxs-lookup"><span data-stu-id="78cc0-121">The following query, when it is executed, returns all `Customers` entities in the Northwind data service:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#GetAllCustomersSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#getallcustomersspecific)]  
 [!code-vb[Astoria Northwind Client#GetAllCustomersSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#getallcustomersspecific)]  
  
 <span data-ttu-id="78cc0-122">Per altre informazioni, vedere [Procedura: Eseguire query sul servizio dati](../../../../docs/framework/data/wcf/how-to-execute-data-service-queries-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="78cc0-122">For more information, see [How to: Execute Data Service Queries](../../../../docs/framework/data/wcf/how-to-execute-data-service-queries-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="78cc0-123">Il [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client supporta le query per gli oggetti con associazione tardiva, ad esempio quando Usa la *dinamica* digitare C#.</span><span class="sxs-lookup"><span data-stu-id="78cc0-123">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client supports queries for late-bound objects, such as when you use the *dynamic* type in C#.</span></span> <span data-ttu-id="78cc0-124">Tuttavia, per preservare le prestazioni, è necessario comporre sempre query fortemente tipizzate per il servizio dati.</span><span class="sxs-lookup"><span data-stu-id="78cc0-124">However, for performance reasons you should always compose strongly-typed queries against the data service.</span></span> <span data-ttu-id="78cc0-125">Il tipo <xref:System.Tuple> e oggetti dinamici non sono supportati dal client.</span><span class="sxs-lookup"><span data-stu-id="78cc0-125">The <xref:System.Tuple> type and dynamic objects are not supported by the client.</span></span>  
  
## <a name="linq-queries"></a><span data-ttu-id="78cc0-126">Query LINQ</span><span class="sxs-lookup"><span data-stu-id="78cc0-126">LINQ Queries</span></span>  
 <span data-ttu-id="78cc0-127">Poiché il <xref:System.Data.Services.Client.DataServiceQuery%601> classe implementa le <xref:System.Linq.IQueryable%601> interfaccia definita da LINQ, la [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] libreria client è in grado di trasformare le query LINQ sui dati del set di entità in un URI che rappresenta un'espressione di query valutata rispetto a un servizio dati risorsa.</span><span class="sxs-lookup"><span data-stu-id="78cc0-127">Because the <xref:System.Data.Services.Client.DataServiceQuery%601> class implements the <xref:System.Linq.IQueryable%601> interface defined by LINQ, the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library is able to transform LINQ queries against entity set data into a URI that represents a query expression evaluated against a data service resource.</span></span> <span data-ttu-id="78cc0-128">Nell'esempio seguente viene mostrata una query LINQ equivalente alla precedente classe <xref:System.Data.Services.Client.DataServiceQuery%601> che restituisce le entità `Orders` con un costo di spedizione maggiore di 30 dollari e ordina i risultati in base al costo di spedizione:</span><span class="sxs-lookup"><span data-stu-id="78cc0-128">The following example is a LINQ query that is equivalent to the previous <xref:System.Data.Services.Client.DataServiceQuery%601> that returns `Orders` that have a freight cost of more than $30 and orders the results by the freight cost:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionslinqspecific)]  
 [!code-vb[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionslinqspecific)]  
  
 <span data-ttu-id="78cc0-129">Questa query LINQ viene convertita nella query seguente URI che viene eseguita a fronte di basato su Northwind [Guida introduttiva](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md) servizio dati:</span><span class="sxs-lookup"><span data-stu-id="78cc0-129">This LINQ query is translated into the following query URI that is executed against the Northwind-based [quickstart](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md) data service:</span></span>  
  
```  
http://localhost:12345/Northwind.svc/Orders?Orderby=ShippedDate&?filter=Freight gt 30  
```  
  
> [!NOTE]
>  <span data-ttu-id="78cc0-130">La sintassi LINQ consente di esprimere un set di query più ampio di quello consentito dalla sintassi URI basata su REST (Representational State Transfer) usata dai servizi dati.</span><span class="sxs-lookup"><span data-stu-id="78cc0-130">The set of queries expressible in the LINQ syntax is broader than those enabled in the representational state transfer (REST)-based URI syntax that is used by data services.</span></span> <span data-ttu-id="78cc0-131">Quando non è possibile eseguire il mapping della query a un URI nel servizio dati di destinazione, viene generato un oggetto <xref:System.NotSupportedException>.</span><span class="sxs-lookup"><span data-stu-id="78cc0-131">A <xref:System.NotSupportedException> is raised when the query cannot be mapped to a URI in the target data service.</span></span>  
  
 <span data-ttu-id="78cc0-132">Per altre informazioni, vedere [considerazioni su LINQ](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="78cc0-132">For more information, see [LINQ Considerations](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md).</span></span>  
  
## <a name="adding-query-options"></a><span data-ttu-id="78cc0-133">Aggiunta di opzioni di query</span><span class="sxs-lookup"><span data-stu-id="78cc0-133">Adding Query Options</span></span>  
 <span data-ttu-id="78cc0-134">Le query del servizio dati supportano tutte le opzioni di query fornite da [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)].</span><span class="sxs-lookup"><span data-stu-id="78cc0-134">Data service queries support all the query options that [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]s provides.</span></span> <span data-ttu-id="78cc0-135">È possibile chiamare il metodo <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> per aggiungere opzioni di query a un'istanza <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="78cc0-135">You call the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method to append query options to a <xref:System.Data.Services.Client.DataServiceQuery%601> instance.</span></span> <span data-ttu-id="78cc0-136"><xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> restituisce una nuova istanza di <xref:System.Data.Services.Client.DataServiceQuery%601> equivalente alla query originale ma con il nuovo set di opzioni.</span><span class="sxs-lookup"><span data-stu-id="78cc0-136"><xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> returns a new <xref:System.Data.Services.Client.DataServiceQuery%601> instance that is equivalent to the original query but with the new query option set.</span></span> <span data-ttu-id="78cc0-137">La query seguente al termine dell'esecuzione restituisce oggetti `Orders` filtrati in base al valore di `Freight` e ordinati in ordine decrescente per `OrderID`:</span><span class="sxs-lookup"><span data-stu-id="78cc0-137">The following query, when executed, returns `Orders` that are filtered by the `Freight` value and ordered by the `OrderID`, descending:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddQueryOptionsSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionsspecific)]  
 [!code-vb[Astoria Northwind Client#AddQueryOptionsSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionsspecific)]  
  
 <span data-ttu-id="78cc0-138">È possibile usare l'opzione di query `$orderby` per ordinare e filtrare una query in base a una singola proprietà, come nell'esempio seguente in cui gli oggetti `Orders` restituiti vengono filtrati e ordinati in base al valore della proprietà `Freight`:</span><span class="sxs-lookup"><span data-stu-id="78cc0-138">You can use the `$orderby` query option to both order and filter a query based on a single property, as in the following example that filters and orders the returned `Orders` objects based on the value of the `Freight` property:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#OrderWithFilter](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#orderwithfilter)]
 [!code-vb[Astoria Northwind Client#OrderWithFilter](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#orderwithfilter)]  
  
 <span data-ttu-id="78cc0-139">È possibile chiamare consecutivamente il metodo <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> per costruire espressioni di query complesse.</span><span class="sxs-lookup"><span data-stu-id="78cc0-139">You can call the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method consecutively to construct complex query expressions.</span></span> <span data-ttu-id="78cc0-140">Per altre informazioni, vedere [Procedura: Aggiungere le opzioni di Query a una Query del servizio dati](../../../../docs/framework/data/wcf/how-to-add-query-options-to-a-data-service-query-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="78cc0-140">For more information, see [How to: Add Query Options to a Data Service Query](../../../../docs/framework/data/wcf/how-to-add-query-options-to-a-data-service-query-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="78cc0-141">Le opzioni di query costituiscono un altro modo per esprimere i componenti sintattici di una query LINQ.</span><span class="sxs-lookup"><span data-stu-id="78cc0-141">Query options give you another way to express the syntactic components of a LINQ query.</span></span> <span data-ttu-id="78cc0-142">Per altre informazioni, vedere [considerazioni su LINQ](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="78cc0-142">For more information, see [LINQ Considerations](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="78cc0-143">L'opzione di query `$select` non può essere aggiunta a un URI di query tramite il metodo <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A>.</span><span class="sxs-lookup"><span data-stu-id="78cc0-143">The `$select` query option cannot be added to a query URI by using the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method.</span></span> <span data-ttu-id="78cc0-144">Si consiglia di usare il metodo LINQ <xref:System.Linq.Enumerable.Select%2A> in modo che il client generi l'opzione di query `$select` nell'URI della richiesta.</span><span class="sxs-lookup"><span data-stu-id="78cc0-144">We recommend that you use the LINQ <xref:System.Linq.Enumerable.Select%2A> method to have the client generate the `$select` query option in the request URI.</span></span>  
  
<a name="executingQueries"></a>   
## <a name="client-versus-server-execution"></a><span data-ttu-id="78cc0-145">Esecuzione del client e del server</span><span class="sxs-lookup"><span data-stu-id="78cc0-145">Client versus Server Execution</span></span>  
 <span data-ttu-id="78cc0-146">Il client esegue una query in due parti.</span><span class="sxs-lookup"><span data-stu-id="78cc0-146">The client executes a query in two parts.</span></span> <span data-ttu-id="78cc0-147">Ogni qualvolta possibile, le espressioni di una query vengono prima valutate sul client e quindi viene generata una query basata sull'URI che viene inviata al servizio dati per la valutazione rispetto ai dati del servizio.</span><span class="sxs-lookup"><span data-stu-id="78cc0-147">Whenever possible, expressions in a query are first evaluated on the client, and then a URI-based query is generated and sent to the data service for evaluation against data in the service.</span></span> <span data-ttu-id="78cc0-148">Si consideri la query LINQ riportata di seguito:</span><span class="sxs-lookup"><span data-stu-id="78cc0-148">Consider the following LINQ query:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#LinqQueryClientEvalSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqqueryclientevalspecific)]  
 [!code-vb[Astoria Northwind Client#LinqQueryClientEvalSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqqueryclientevalspecific)]  
  
 <span data-ttu-id="78cc0-149">In questo esempio, l'espressione `(basePrice – (basePrice * discount))` viene valutata sul client.</span><span class="sxs-lookup"><span data-stu-id="78cc0-149">In this example, the expression `(basePrice – (basePrice * discount))` is evaluated on the client.</span></span> <span data-ttu-id="78cc0-150">Di conseguenza, l'URI di query effettivo `http://localhost:12345/northwind.svc/Products()?$filter=(UnitPrice gt 90.00M) and substringof('bike',ProductName)` che viene inviato al servizio dati contiene il valore decimale già calcolato `90` nella clausola di filtro.</span><span class="sxs-lookup"><span data-stu-id="78cc0-150">Because of this, the actual query URI `http://localhost:12345/northwind.svc/Products()?$filter=(UnitPrice gt 90.00M) and substringof('bike',ProductName)` that is sent to the data service contains the already calculated decimal value of `90` in the filter clause.</span></span> <span data-ttu-id="78cc0-151">Le altre parti dell'espressione dei filtri, compresa l'espressione della sottostringa, vengono valutate dal servizio dati.</span><span class="sxs-lookup"><span data-stu-id="78cc0-151">The other parts of the filtering expression, including the substring expression, are evaluated by the data service.</span></span> <span data-ttu-id="78cc0-152">Le espressioni valutate sul client seguono la semantica di Common Language Runtime (CLR), mentre le espressioni inviate al servizio dati si basano sull'implementazione del servizio dati del protocollo [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="78cc0-152">Expressions that are evaluated on the client follow common language runtime (CLR) semantics, while expressions sent to the data service rely on the data service implementation of the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] Protocol.</span></span> <span data-ttu-id="78cc0-153">È anche necessario tenere presente scenari in cui questa valutazione separata può provocare risultati imprevisti, ad esempio quando il client e il servizio eseguono valutazioni basate sull'ora in fusi orari diversi.</span><span class="sxs-lookup"><span data-stu-id="78cc0-153">You should also be aware of scenarios where this separate evaluation may cause unexpected results, such as when both the client and service perform time-based evaluations in different time zones.</span></span>  
  
## <a name="query-responses"></a><span data-ttu-id="78cc0-154">Risposte alle query</span><span class="sxs-lookup"><span data-stu-id="78cc0-154">Query Responses</span></span>  
 <span data-ttu-id="78cc0-155">Se eseguita, <xref:System.Data.Services.Client.DataServiceQuery%601> restituisce un oggetto <xref:System.Collections.Generic.IEnumerable%601> del tipo di entità richiesto.</span><span class="sxs-lookup"><span data-stu-id="78cc0-155">When executed, the <xref:System.Data.Services.Client.DataServiceQuery%601> returns an <xref:System.Collections.Generic.IEnumerable%601> of the requested entity type.</span></span> <span data-ttu-id="78cc0-156">È possibile eseguire il cast di questo risultato della query a un oggetto <xref:System.Data.Services.Client.QueryOperationResponse%601>, come nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="78cc0-156">This query result can be cast to a <xref:System.Data.Services.Client.QueryOperationResponse%601> object, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#GetResponseSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#getresponsespecific)]
 [!code-vb[Astoria Northwind Client#GetResponseSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#getresponsespecific)]  
  
 <span data-ttu-id="78cc0-157">Le istanze del tipo di entità che rappresentano entità nel servizio dati vengono create nel client tramite un processo denominato "materializzazione degli oggetti".</span><span class="sxs-lookup"><span data-stu-id="78cc0-157">The entity type instances that represent entities in the data service are created on the client by a process called object materialization.</span></span> <span data-ttu-id="78cc0-158">Per altre informazioni, vedere [la materializzazione degli oggetti](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="78cc0-158">For more information, see [Object Materialization](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md).</span></span> <span data-ttu-id="78cc0-159">L'oggetto <xref:System.Data.Services.Client.QueryOperationResponse%601> implementa <xref:System.Collections.Generic.IEnumerable%601> per fornire accesso ai risultati della query.</span><span class="sxs-lookup"><span data-stu-id="78cc0-159">The <xref:System.Data.Services.Client.QueryOperationResponse%601> object implements <xref:System.Collections.Generic.IEnumerable%601> to provide access to the results of the query.</span></span>  
  
 <span data-ttu-id="78cc0-160"><xref:System.Data.Services.Client.QueryOperationResponse%601> dispone inoltre dei membri seguenti che consentono di accedere a informazioni aggiuntive sul risultato della query:</span><span class="sxs-lookup"><span data-stu-id="78cc0-160">The <xref:System.Data.Services.Client.QueryOperationResponse%601> also has the following members that enable you to access additional information about a query result:</span></span>  
  
-   <span data-ttu-id="78cc0-161"><xref:System.Data.Services.Client.OperationResponse.Error%2A>: ottiene un eventuale errore generato dall'operazione.</span><span class="sxs-lookup"><span data-stu-id="78cc0-161"><xref:System.Data.Services.Client.OperationResponse.Error%2A> - gets an error thrown by the operation, if any has occurred.</span></span>  
  
-   <span data-ttu-id="78cc0-162"><xref:System.Data.Services.Client.OperationResponse.Headers%2A>: contiene la raccolta di intestazioni di risposta HTTP associate alla risposta alla query.</span><span class="sxs-lookup"><span data-stu-id="78cc0-162"><xref:System.Data.Services.Client.OperationResponse.Headers%2A> - contains the collection of HTTP response headers associated with the query response.</span></span>  
  
-   <span data-ttu-id="78cc0-163"><xref:System.Data.Services.Client.QueryOperationResponse.Query%2A>: ottiene l'istanza <xref:System.Data.Services.Client.DataServiceQuery%601> originale generata da <xref:System.Data.Services.Client.QueryOperationResponse%601>.</span><span class="sxs-lookup"><span data-stu-id="78cc0-163"><xref:System.Data.Services.Client.QueryOperationResponse.Query%2A> - gets the original <xref:System.Data.Services.Client.DataServiceQuery%601> that generated the <xref:System.Data.Services.Client.QueryOperationResponse%601>.</span></span>  
  
-   <span data-ttu-id="78cc0-164"><xref:System.Data.Services.Client.OperationResponse.StatusCode%2A>: ottiene il codice di risposta HTTP per la risposta alla query.</span><span class="sxs-lookup"><span data-stu-id="78cc0-164"><xref:System.Data.Services.Client.OperationResponse.StatusCode%2A> - gets the HTTP response code for the query response.</span></span>  
  
-   <span data-ttu-id="78cc0-165"><xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A>: ottiene il numero complessivo di entità del set di entità quando viene chiamato il metodo <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> su <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="78cc0-165"><xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> - gets the total number of entities in the entity set when the <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> method was called on the <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span>  
  
-   <span data-ttu-id="78cc0-166"><xref:System.Data.Services.Client.QueryOperationResponse.GetContinuation%2A>: restituisce un oggetto <xref:System.Data.Services.Client.DataServiceQueryContinuation> che contiene l'URI della pagina di risultati successiva.</span><span class="sxs-lookup"><span data-stu-id="78cc0-166"><xref:System.Data.Services.Client.QueryOperationResponse.GetContinuation%2A> - returns a <xref:System.Data.Services.Client.DataServiceQueryContinuation> object that contains the URI of the next page of results.</span></span>  
  
 <span data-ttu-id="78cc0-167">Per impostazione predefinita, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] restituisce solo i dati selezionato in modo esplicito dall'URI della query.</span><span class="sxs-lookup"><span data-stu-id="78cc0-167">By default, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] only returns data that is explicitly selected by the query URI.</span></span> <span data-ttu-id="78cc0-168">Ciò consente di caricare in modo esplicito dati aggiuntivi dal servizio dati, quando necessario.</span><span class="sxs-lookup"><span data-stu-id="78cc0-168">This gives you the option to explicitly load additional data from the data service when it is needed.</span></span> <span data-ttu-id="78cc0-169">Una richiesta viene inviata al servizio dati ogni volta che vengono caricati in modo esplicito dati dal servizio dati.</span><span class="sxs-lookup"><span data-stu-id="78cc0-169">A request is sent to the data service each time you explicitly load data from the data service.</span></span> <span data-ttu-id="78cc0-170">I dati che possono essere caricati in modo esplicito comprendono entità correlate, dati di risposta di paging e flussi di dati binari.</span><span class="sxs-lookup"><span data-stu-id="78cc0-170">Data that can be explicitly loaded includes related entities, paged response data, and binary data streams.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="78cc0-171">Poiché un servizio dati può restituire una risposta di paging, si consiglia di gestire una risposta del servizio dati sottoposta a paging tramite un modello di programmazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="78cc0-171">Because a data service may return a paged response, we recommend that your application use the programming pattern to handle a paged data service response.</span></span> <span data-ttu-id="78cc0-172">Per altre informazioni, vedere [caricamento di contenuto posticipato](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="78cc0-172">For more information, see [Loading Deferred Content](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="78cc0-173">È inoltre possibile ridurre la quantità di dati restituiti da una query specificando che solo determinate proprietà di un'entità vengano restituite nella risposta.</span><span class="sxs-lookup"><span data-stu-id="78cc0-173">The amount of data returned by a query can also be reduced by specifying that only certain properties of an entity are returned in the response.</span></span> <span data-ttu-id="78cc0-174">Per altre informazioni, vedere [proiezioni di Query](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="78cc0-174">For more information, see [Query Projections](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md).</span></span>  
  
## <a name="getting-a-count-of-the-total-number-of-entities-in-the-set"></a><span data-ttu-id="78cc0-175">Conteggio del numero complessivo di entità nel set</span><span class="sxs-lookup"><span data-stu-id="78cc0-175">Getting a Count of the Total Number of Entities in the Set</span></span>  
 <span data-ttu-id="78cc0-176">In alcuni scenari è utile conoscere il numero complessivo di entità contenute in un set di entità e non soltanto il numero restituito dalla query.</span><span class="sxs-lookup"><span data-stu-id="78cc0-176">In some scenarios, it is helpful to know the total number of entities in an entity set and not merely the number returned by the query.</span></span> <span data-ttu-id="78cc0-177">Chiamare il metodo <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> in <xref:System.Data.Services.Client.DataServiceQuery%601> per richiedere che nel risultato della query venga incluso il conteggio totale delle entità presenti nel set.</span><span class="sxs-lookup"><span data-stu-id="78cc0-177">Call the <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> method on the <xref:System.Data.Services.Client.DataServiceQuery%601> to request that this total count of entities in the set be included with the query result.</span></span> <span data-ttu-id="78cc0-178">In questo caso la proprietà <xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> dell'oggetto <xref:System.Data.Services.Client.QueryOperationResponse%601> restituito contiene il numero totale di entità nel set.</span><span class="sxs-lookup"><span data-stu-id="78cc0-178">In this case, the <xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> property of the returned <xref:System.Data.Services.Client.QueryOperationResponse%601> returns the total number of entities in the set.</span></span>  
  
 <span data-ttu-id="78cc0-179">È anche possibile ottenere solo il conteggio totale delle entità nel set come valore <xref:System.Int32> o <xref:System.Int64> chiamando rispettivamente i metodi <xref:System.Linq.Enumerable.Count%2A> o <xref:System.Linq.Enumerable.LongCount%2A>.</span><span class="sxs-lookup"><span data-stu-id="78cc0-179">You can also get only the total count of entities in the set either as an <xref:System.Int32> or as a <xref:System.Int64> value by calling the <xref:System.Linq.Enumerable.Count%2A> or <xref:System.Linq.Enumerable.LongCount%2A> methods respectively.</span></span> <span data-ttu-id="78cc0-180">Quando vengono chiamati questi metodi, viene restituito solo il valore del conteggio senza <xref:System.Data.Services.Client.QueryOperationResponse%601>.</span><span class="sxs-lookup"><span data-stu-id="78cc0-180">When these methods are called, a <xref:System.Data.Services.Client.QueryOperationResponse%601> is not returned; only the count value is returned.</span></span> <span data-ttu-id="78cc0-181">Per altre informazioni, vedere [Procedura: Determinare il numero di entità restituite da una Query](../../../../docs/framework/data/wcf/number-of-entities-returned-by-a-query-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="78cc0-181">For more information, see [How to: Determine the Number of Entities Returned by a Query](../../../../docs/framework/data/wcf/number-of-entities-returned-by-a-query-wcf.md).</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="78cc0-182">In questa sezione</span><span class="sxs-lookup"><span data-stu-id="78cc0-182">In This Section</span></span>  
 [<span data-ttu-id="78cc0-183">Proiezioni di query</span><span class="sxs-lookup"><span data-stu-id="78cc0-183">Query Projections</span></span>](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md)  
  
 [<span data-ttu-id="78cc0-184">Materializzazione di oggetti</span><span class="sxs-lookup"><span data-stu-id="78cc0-184">Object Materialization</span></span>](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md)  
  
 [<span data-ttu-id="78cc0-185">Considerazioni su LINQ</span><span class="sxs-lookup"><span data-stu-id="78cc0-185">LINQ Considerations</span></span>](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md)  
  
 [<span data-ttu-id="78cc0-186">Procedura: Eseguire query sul servizio dati</span><span class="sxs-lookup"><span data-stu-id="78cc0-186">How to: Execute Data Service Queries</span></span>](../../../../docs/framework/data/wcf/how-to-execute-data-service-queries-wcf-data-services.md)  
  
 [<span data-ttu-id="78cc0-187">Procedura: Aggiungere le opzioni di Query a una Query del servizio dati</span><span class="sxs-lookup"><span data-stu-id="78cc0-187">How to: Add Query Options to a Data Service Query</span></span>](../../../../docs/framework/data/wcf/how-to-add-query-options-to-a-data-service-query-wcf-data-services.md)  
  
 [<span data-ttu-id="78cc0-188">Procedura: Determinare il numero di entità restituite da una Query</span><span class="sxs-lookup"><span data-stu-id="78cc0-188">How to: Determine the Number of Entities Returned by a Query</span></span>](../../../../docs/framework/data/wcf/number-of-entities-returned-by-a-query-wcf.md)  
  
 [<span data-ttu-id="78cc0-189">Procedura: Specificare le credenziali del Client per un servizio dati richiesta</span><span class="sxs-lookup"><span data-stu-id="78cc0-189">How to: Specify Client Credentials for a Data Service Request</span></span>](../../../../docs/framework/data/wcf/specify-client-creds-for-a-data-service-request-wcf.md)  
  
 [<span data-ttu-id="78cc0-190">Procedura: Impostare le intestazioni nella richiesta del Client</span><span class="sxs-lookup"><span data-stu-id="78cc0-190">How to: Set Headers in the Client Request</span></span>](../../../../docs/framework/data/wcf/how-to-set-headers-in-the-client-request-wcf-data-services.md)  
  
 [<span data-ttu-id="78cc0-191">Procedura: Risultati della Query di progetto</span><span class="sxs-lookup"><span data-stu-id="78cc0-191">How to: Project Query Results</span></span>](../../../../docs/framework/data/wcf/how-to-project-query-results-wcf-data-services.md)  
  
## <a name="see-also"></a><span data-ttu-id="78cc0-192">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="78cc0-192">See also</span></span>

- [<span data-ttu-id="78cc0-193">Libreria client WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="78cc0-193">WCF Data Services Client Library</span></span>](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)
