---
title: Materializzazione di oggetti (WCF Data Services)
ms.date: 03/30/2017
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, querying
ms.assetid: f0dbf7b0-0292-4e31-9ae4-b98288336dc1
ms.openlocfilehash: bf75e126c2a44b6b9d151269046d2cb8110815cc
ms.sourcegitcommit: 558d78d2a68acd4c95ef23231c8b4e4c7bac3902
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/09/2019
ms.locfileid: "59335394"
---
# <a name="object-materialization-wcf-data-services"></a><span data-ttu-id="7cc7f-102">Materializzazione di oggetti (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="7cc7f-102">Object Materialization (WCF Data Services)</span></span>
<span data-ttu-id="7cc7f-103">Quando si usa la **Aggiungi riferimento al servizio** finestra di dialogo per utilizzare un [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed in un'applicazione client basata su .NET Framework, vengono generate classi di dati equivalenti per ogni tipo di entità nel modello di dati esposto dal feed.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-103">When you use the **Add Service Reference** dialog to consume an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed in a .NET Framework-based client application, equivalent data classes are generated for each entity type in the data model exposed by the feed.</span></span> <span data-ttu-id="7cc7f-104">Per altre informazioni, vedere [generazione della libreria Client di servizio dati](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="7cc7f-104">For more information, see [Generating the Data Service Client Library](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md).</span></span> <span data-ttu-id="7cc7f-105">I dati di entità restituiti da una query vengono materializzati in un'istanza di una delle classi del servizio dati client generate.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-105">Entity data that is returned by a query is materialized into an instance of one of these generated client data service classes.</span></span> <span data-ttu-id="7cc7f-106">Per informazioni sulle opzioni di merge e la risoluzione di identità per gli oggetti rilevati, vedere [gestione del contesto del servizio dati](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="7cc7f-106">For information about merge options and identity resolution for tracked objects, see [Managing the Data Service Context](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span></span>  
  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="7cc7f-107">consente inoltre di definire le proprie classi di servizio dati client, anziché utilizzare le classi di dati generati dallo strumento.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-107">also enables you to define your own client data service classes rather than using the tool-generated data classes.</span></span> <span data-ttu-id="7cc7f-108">In questo modo è possibile usare le proprie classi di dati, note anche come classi di dati POCO (Plain-Old CLR Object).</span><span class="sxs-lookup"><span data-stu-id="7cc7f-108">This enables you to use your own data classes, also known as "plain-old CLR object" (POCO) data classes.</span></span> <span data-ttu-id="7cc7f-109">Quando si usano questi tipi di classi di dati personalizzate, è necessario attribuire la classe di dati con <xref:System.Data.Services.Common.DataServiceKeyAttribute> o <xref:System.Data.Services.Common.DataServiceEntityAttribute> e assicurarsi che i nomi del tipo nei nomi dei tipi di client corrispondenza nel modello di dati del servizio dati.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-109">When using these types of custom data classes, you should attribute the data class with either <xref:System.Data.Services.Common.DataServiceKeyAttribute> or <xref:System.Data.Services.Common.DataServiceEntityAttribute> and ensure that type names on the client match type names in the data model of the data service.</span></span>  
  
 <span data-ttu-id="7cc7f-110">Dopo aver ricevuto il messaggio di risposta query, la libreria materializza i dati restituiti dal [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed in istanze di dati del client di classi del servizio sono di tipo della query.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-110">After the library receives the query response message, it materializes the returned data from the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed into instances of client data service classes that are of the type of the query.</span></span> <span data-ttu-id="7cc7f-111">Di seguito viene descritto il processo generale di materializzazione di tali oggetti.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-111">The general process for materializing these objects is as follows:</span></span>  
  
1. <span data-ttu-id="7cc7f-112">La libreria client legge il tipo serializzato dall'elemento `entry` nel feed del messaggio di risposta e tenta di creare una nuova istanza del tipo corretto usando uno dei modi riportati di seguito.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-112">The client library reads the serialized type from the `entry` element in the response message feed and attempts to create a new instance of the correct type, in one of the following ways:</span></span>  
  
    -   <span data-ttu-id="7cc7f-113">Quando il nome del tipo dichiarato nel feed è identico al nome del tipo dell'oggetto <xref:System.Data.Services.Client.DataServiceQuery%601>, viene creata una nuova istanza di questo tipo usando il costruttore vuoto.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-113">When the type declared in the feed has the same name as the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this type is created by using the empty constructor.</span></span>  
  
    -   <span data-ttu-id="7cc7f-114">Quando il nome del tipo dichiarato nel feed è identico al nome del tipo derivato dal tipo dell'oggetto <xref:System.Data.Services.Client.DataServiceQuery%601>, viene creata una nuova istanza di questo tipo derivato usando il costruttore vuoto.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-114">When the type declared in the feed has the same name as a type that is derived from the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this derived type is created by using the empty constructor.</span></span>  
  
    -   <span data-ttu-id="7cc7f-115">Quando il tipo dichiarato nel feed non corrisponde al tipo dell'oggetto <xref:System.Data.Services.Client.DataServiceQuery%601> o a qualsiasi tipo derivato, viene creata una nuova istanza del tipo sottoposto a query usando il costruttore vuoto.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-115">When the type declared in the feed cannot be matched to the type of the <xref:System.Data.Services.Client.DataServiceQuery%601> or any derived types, a new instance of the queried type is created by using the empty constructor.</span></span>  
  
    -   <span data-ttu-id="7cc7f-116">Quando viene impostata la proprietà <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A>, viene chiamato il delegato fornito per eseguire l'override del mapping dei tipi basato sul nome predefinito e viene creata una nuova istanza del tipo restituito da <xref:System.Func%602>.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-116">When the <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A> property is set, the supplied delegate is called to override the default name-based type mapping and a new instance of the type returned by the <xref:System.Func%602> is created instead.</span></span> <span data-ttu-id="7cc7f-117">Se questo delegato restituisce un valore Null, viene creata invece una nuova istanza del tipo sottoposto a query.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-117">If this delegate returns a null value, a new instance of the queried type is created instead.</span></span> <span data-ttu-id="7cc7f-118">Per supportare scenari di ereditarietà, è possibile che sia necessario eseguire l'override del mapping dei nomi dei tipi basato sul nome predefinito.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-118">It may be required to override the default name-based type name mapping to support inheritance scenarios.</span></span>  
  
2. <span data-ttu-id="7cc7f-119">La libreria client legge il valore URI dall'elemento `id` di `entry` corrispondente al valore di identità dell'entità.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-119">The client library reads the URI value from the `id` element of the `entry`, which is the identity value of the entity.</span></span> <span data-ttu-id="7cc7f-120">Se per <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> non viene usato il valore <xref:System.Data.Services.Client.MergeOption.NoTracking>, per rilevare l'oggetto in <xref:System.Data.Services.Client.DataServiceContext> viene usato il valore di identità.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-120">Unless a <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> value of <xref:System.Data.Services.Client.MergeOption.NoTracking> is used, the identity value is used to track the object in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="7cc7f-121">Il valore di identità viene inoltre usato per garantire la creazione di una sola istanza di entità, anche nel caso in cui un'entità venga restituita più volte nella risposta alla query.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-121">The identity value is also used to guarantee that only a single entity instance is created, even when an entity is returned multiple times in the query response.</span></span>  
  
3. <span data-ttu-id="7cc7f-122">La libreria client legge le proprietà dalla voce di feed e imposta le proprietà corrispondenti sull'oggetto appena creato.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-122">The client library reads properties from the feed entry and set the corresponding properties on the newly created object.</span></span> <span data-ttu-id="7cc7f-123">Quando in <xref:System.Data.Services.Client.DataServiceContext> è già presente un oggetto che dispone dello stesso valore di identità, le proprietà vengono impostate in base all'impostazione <xref:System.Data.Services.Client.MergeOption> di <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-123">When an object that has the same identity value already occurs in the <xref:System.Data.Services.Client.DataServiceContext>, the properties are set based on the <xref:System.Data.Services.Client.MergeOption> setting of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="7cc7f-124">La risposta potrebbe contenere valori di proprietà per cui non è presente una proprietà corrispondente nel tipo client.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-124">The response might contain property values for which a corresponding property does not occur in the client type.</span></span> <span data-ttu-id="7cc7f-125">In questo caso, l'azione dipende dal valore della proprietà <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> di <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-125">When this occurs, the action depends on the value of the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="7cc7f-126">Quando questa proprietà è impostata su `true`, la proprietà mancante viene ignorata.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-126">When this property is set to `true`, the missing property is ignored.</span></span> <span data-ttu-id="7cc7f-127">In caso contrario, viene generato un errore.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-127">Otherwise, an error is raised.</span></span> <span data-ttu-id="7cc7f-128">Le proprietà vengono impostate come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="7cc7f-128">Properties are set as follows:</span></span>  
  
    -   <span data-ttu-id="7cc7f-129">Le proprietà scalari vengono impostate sul valore corrispondente nella voce del messaggio di risposta.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-129">Scalar properties are set to the corresponding value in the entry in the response message.</span></span>  
  
    -   <span data-ttu-id="7cc7f-130">Le proprietà complesse vengono impostate su una nuova istanza di tipo complesso, impostata con le proprietà del tipo complesso dalla risposta.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-130">Complex properties are set to a new complex type instance, which are set with the properties of the complex type from the response.</span></span>  
  
    -   <span data-ttu-id="7cc7f-131">Le proprietà di navigazione che restituiscono una raccolta di entità correlate vengono impostate su un'istanza di <xref:System.Collections.Generic.ICollection%601> nuova o esistente, dove `T` corrisponde al tipo dell'entità correlata.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-131">Navigation properties that return a collection of related entities are set to a new or existing instance of <xref:System.Collections.Generic.ICollection%601>, where `T` is the type of the related entity.</span></span> <span data-ttu-id="7cc7f-132">La raccolta è vuota se gli oggetti correlati non sono stati caricati in <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-132">This collection is empty unless the related objects have been loaded into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="7cc7f-133">Per altre informazioni, vedere [caricamento di contenuto posticipato](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="7cc7f-133">For more information, see [Loading Deferred Content](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="7cc7f-134">Quando le classi di dati client generate supportano l'associazione dati, le proprietà di navigazione restituiscono invece istanze della classe <xref:System.Data.Services.Client.DataServiceCollection%601>.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-134">When the generated client data classes support data binding, navigation properties return instances of the <xref:System.Data.Services.Client.DataServiceCollection%601> class instead.</span></span> <span data-ttu-id="7cc7f-135">Per altre informazioni, vedere [associazione di dati a controlli](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="7cc7f-135">For more information, see [Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span></span>  
  
4. <span data-ttu-id="7cc7f-136">Viene generato l'evento <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity>.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-136">The <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity> event is raised.</span></span>  
  
5. <span data-ttu-id="7cc7f-137">La libreria client collega l'oggetto a <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-137">The client library attaches the object to the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="7cc7f-138">Quando <xref:System.Data.Services.Client.MergeOption> è <xref:System.Data.Services.Client.MergeOption.NoTracking>, l'oggetto non viene collegato.</span><span class="sxs-lookup"><span data-stu-id="7cc7f-138">The object is not attached when the <xref:System.Data.Services.Client.MergeOption> is <xref:System.Data.Services.Client.MergeOption.NoTracking>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7cc7f-139">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="7cc7f-139">See also</span></span>

- [<span data-ttu-id="7cc7f-140">Esecuzione di query sul servizio dati</span><span class="sxs-lookup"><span data-stu-id="7cc7f-140">Querying the Data Service</span></span>](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)
- [<span data-ttu-id="7cc7f-141">Proiezioni di query</span><span class="sxs-lookup"><span data-stu-id="7cc7f-141">Query Projections</span></span>](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md)
