---
title: Attivazione di istanze
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 134c3f70-5d4e-46d0-9d49-469a6643edd8
caps.latest.revision: "6"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: d33e809a0db0b812cf7311d7b5686d9125e80976
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/02/2017
---
# <a name="instance-activation"></a><span data-ttu-id="a8860-102">Attivazione di istanze</span><span class="sxs-lookup"><span data-stu-id="a8860-102">Instance Activation</span></span>
<span data-ttu-id="a8860-103">L'archivio di istanze del flusso di lavoro SQL esegue un'attività interna che attiva e rileva periodicamente istanze del flusso di lavoro eseguibili o attivabili nel database di persistenza.</span><span class="sxs-lookup"><span data-stu-id="a8860-103">The SQL Workflow Instance Store runs an internal task that periodically wakes up and detects runnable or activatable workflow instances in the persistence database.</span></span> <span data-ttu-id="a8860-104">Se rileva un'istanza del flusso di lavoro eseguibile, notifica all'host del flusso di lavoro la possibilità di attivare l'istanza.</span><span class="sxs-lookup"><span data-stu-id="a8860-104">If it finds a runnable workflow instance, it notifies the workflow host that is capable of activating the instance.</span></span> <span data-ttu-id="a8860-105">Se l'archivio di istanze rileva un'istanza del flusso di lavoro attivabile, invia una notifica a un host generico che attiva un host del flusso di lavoro il quale, a sua volta, esegue l'istanza del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="a8860-105">If the instance store finds an activatable workflow instance, it notifies a generic host that activates a workflow host, which in turn runs the workflow instance.</span></span> <span data-ttu-id="a8860-106">Nelle sezioni seguenti di questo argomento viene illustrato dettagliatamente il processo di attivazione delle istanze.</span><span class="sxs-lookup"><span data-stu-id="a8860-106">The following sections in this topic explain the instance activation process in detail.</span></span>  
  
##  <span data-ttu-id="a8860-107"><a name="RunnableSection"></a>Rilevamento e attivazione di istanze del flusso di lavoro eseguibili</span><span class="sxs-lookup"><span data-stu-id="a8860-107"><a name="RunnableSection"></a> Detecting and Activating Runnable Workflow Instances</span></span>  
 <span data-ttu-id="a8860-108">L'archivio di istanze del flusso di lavoro SQL considera un'istanza del flusso di lavoro *eseguibile* se l'istanza non è in stato di sospensione o di completamento e soddisfa le condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="a8860-108">The SQL Workflow Instance Store considers a workflow instance *runnable* if the instance is not in the suspended state or the completed state and satisfies the following conditions:</span></span>  
  
-   <span data-ttu-id="a8860-109">L'istanza è sbloccata e dispone di un timer in sospeso scaduto.</span><span class="sxs-lookup"><span data-stu-id="a8860-109">The instance is unlocked and has a pending timer that has expired.</span></span>  
  
-   <span data-ttu-id="a8860-110">Nell'istanza è presente un blocco scaduto.</span><span class="sxs-lookup"><span data-stu-id="a8860-110">The instance has an expired lock on it.</span></span>  
  
-   <span data-ttu-id="a8860-111">L'istanza è sbloccata e il suo stato sia **durante l'esecuzione di**.</span><span class="sxs-lookup"><span data-stu-id="a8860-111">The instance is unlocked and its status is **Executing**.</span></span>  
  
 <span data-ttu-id="a8860-112">L'archivio di istanze del flusso di lavoro SQL genera l'oggetto <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> quando rileva un'istanza eseguibile.</span><span class="sxs-lookup"><span data-stu-id="a8860-112">The SQL Workflow Instance Store raises the <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> when it finds a runnable instance.</span></span> <span data-ttu-id="a8860-113">Successivamente, l'oggetto SqlWorkflowInstanceStore arresta il monitoraggio finché l'oggetto <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> non viene chiamato una volta sull'archivio.</span><span class="sxs-lookup"><span data-stu-id="a8860-113">After this, the SqlWorkflowInstanceStore stops monitoring until the <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> is called once on the store.</span></span>  
  
 <span data-ttu-id="a8860-114">Un host del flusso di lavoro che ha sottoscritto l'oggetto <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> ed è in grado di caricare l'istanza, esegue l'oggetto <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> sull'archivio di istanze per caricare l'istanza in memoria.</span><span class="sxs-lookup"><span data-stu-id="a8860-114">A workflow host that has subscribed for the <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> and capable of loading the instance executes the <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> against the instance store to load the instance into memory.</span></span> <span data-ttu-id="a8860-115">Un host del flusso di lavoro viene considerato capace di caricare un'istanza del flusso di lavoro, se l'host e l'istanza dispone di proprietà dei metadati **WorkflowServiceType** impostata sullo stesso valore.</span><span class="sxs-lookup"><span data-stu-id="a8860-115">A workflow host is considered capable of loading a workflow instance if the host and the instance have metadata property **WorkflowServiceType** set to the same value.</span></span>  
  
## <a name="detecting-and-activating-activatable-workflow-instances"></a><span data-ttu-id="a8860-116">Rilevamento e attivazione di istanze del flusso di lavoro attivabili</span><span class="sxs-lookup"><span data-stu-id="a8860-116">Detecting and Activating Activatable Workflow Instances</span></span>  
 <span data-ttu-id="a8860-117">Un'istanza del flusso di lavoro viene considerata *attivabile* se l'istanza è eseguibile e non esiste nessun host del flusso di lavoro è in grado di caricare l'istanza è in esecuzione nel computer.</span><span class="sxs-lookup"><span data-stu-id="a8860-117">A workflow instance is considered *activatable* if the instance is runnable and there is no workflow host that is capable of loading the instance is running on the computer.</span></span> <span data-ttu-id="a8860-118">Vedere la sezione precedente Rilevamento e attivazione di istanze del flusso di lavoro eseguibili per la definizione di un'istanza del flusso di lavoro eseguibile.</span><span class="sxs-lookup"><span data-stu-id="a8860-118">See Detecting and Activating Runnable Workflow Instances above for the definition of a runnable workflow instance.</span></span>  
  
 <span data-ttu-id="a8860-119">L'archivio di istanze del flusso di lavoro SQL genera l'oggetto <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> quando rileva un'istanza del flusso di lavoro eseguibile nel database.</span><span class="sxs-lookup"><span data-stu-id="a8860-119">The SQL Workflow Instance Store raises the <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> when it finds an activatable workflow instance in the database.</span></span> <span data-ttu-id="a8860-120">Successivamente, l'oggetto SqlWorkflowInstanceStore arresta il monitoraggio finché l'oggetto <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> non viene chiamato una volta sull'archivio.</span><span class="sxs-lookup"><span data-stu-id="a8860-120">After this, the SqlWorkflowInstanceStore stops monitoring until the <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> is called once on the store.</span></span>  
  
 <span data-ttu-id="a8860-121">Quando un host generico che ha sottoscritto l'oggetto <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> riceve l'evento, esegue l'oggetto <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> sull'archivio di istanze per ottenere i parametri di attivazione necessari per creare un host del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="a8860-121">When a generic host that has subscribed for the <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> receives the event, it executes the <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> against the instance store to obtain activation parameters required to create a workflow host.</span></span> <span data-ttu-id="a8860-122">L'host generico usa questi parametri di attivazione per creare un host del flusso di lavoro che, a sua volta, carica ed esegue l'istanza del servizio eseguibile.</span><span class="sxs-lookup"><span data-stu-id="a8860-122">The generic host uses these activation parameters to create a workflow host, which in turn loads and runs the runnable service instance.</span></span>  
  
## <a name="generic-hosts"></a><span data-ttu-id="a8860-123">Host generici</span><span class="sxs-lookup"><span data-stu-id="a8860-123">Generic Hosts</span></span>  
 <span data-ttu-id="a8860-124">Un host generico è un host con il valore della proprietà dei metadati **WorkflowServiceType** per gli host generici è impostato su **workflowservicetype. Any** per indicare che può gestire qualsiasi tipo di flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="a8860-124">A generic host is a host with the value of the metadata property **WorkflowServiceType** for generic hosts is set to **WorkflowServiceType.Any** to indicate that it can handle any workflow type.</span></span> <span data-ttu-id="a8860-125">Un host generico dispone di un parametro XName denominato **ActivationType**.</span><span class="sxs-lookup"><span data-stu-id="a8860-125">A generic host has an XName parameter named **ActivationType**.</span></span>  
  
 <span data-ttu-id="a8860-126">Attualmente, l'archivio di istanze del flusso di lavoro SQL supporta un host generico con il valore del parametro ActivationType impostato su **WAS**.</span><span class="sxs-lookup"><span data-stu-id="a8860-126">Currently, the SQL Workflow Instance Store supports generic hosts with value of the ActivationType parameter set to **WAS**.</span></span> <span data-ttu-id="a8860-127">Se il parametro ActivationType non è impostato su WAS, l'archivio di istanze del flusso di lavoro SQL genera un'eccezione <xref:System.Runtime.DurableInstancing.InstancePersistenceException>.</span><span class="sxs-lookup"><span data-stu-id="a8860-127">If the ActivationType is not set to WAS, the SQL Workflow Instance Store throws an <xref:System.Runtime.DurableInstancing.InstancePersistenceException>.</span></span> <span data-ttu-id="a8860-128">Il servizio di gestione del flusso di lavoro fornito con il [!INCLUDE[dublin](../../../includes/dublin-md.md)] è un host generico che ha il tipo di attivazione impostato su **WAS**.</span><span class="sxs-lookup"><span data-stu-id="a8860-128">The Workflow Management Service that ships with the [!INCLUDE[dublin](../../../includes/dublin-md.md)] is a generic host that has the activation type set to **WAS**.</span></span>  
  
 <span data-ttu-id="a8860-129">Per l'attivazione di WAS, un host generico richiede un set di parametri di attivazione per derivare l'indirizzo dell'endpoint in cui possono essere attivati nuovi host.</span><span class="sxs-lookup"><span data-stu-id="a8860-129">For WAS activation, a generic host requires a set of activation parameters to derive the endpoint address at which new hosts can be activated.</span></span> <span data-ttu-id="a8860-130">I parametri per l'attivazione di WAS sono: nome del sito, percorso dell'applicazione relativa al sito e percorso del servizio relativo all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a8860-130">The activation parameters for WAS activation are name of the site, path to the application relative to the site, and path to the service relative to the application.</span></span> <span data-ttu-id="a8860-131">L'archivio di istanze del flusso di lavoro SQL archivia questi parametri di attivazione durante l'esecuzione dell'oggetto <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>.</span><span class="sxs-lookup"><span data-stu-id="a8860-131">The SQL Workflow Instance Store stores these activation parameters during the execution of the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>.</span></span>  
  
## <a name="runnable-instances-detection-period"></a><span data-ttu-id="a8860-132">Runnable Instances Detection Period</span><span class="sxs-lookup"><span data-stu-id="a8860-132">Runnable Instances Detection Period</span></span>  
 <span data-ttu-id="a8860-133">Il **Runnable Instances Detection Period** proprietà dell'archivio di istanze del flusso di lavoro SQL specifica il periodo di tempo trascorso il quale l'archivio di istanze del flusso di lavoro SQL esegue un'attività di rilevamento per rilevare qualsiasi flusso di lavoro eseguibile o attivabili istanze nel database di persistenza dopo il ciclo di rilevamento precedente.</span><span class="sxs-lookup"><span data-stu-id="a8860-133">The **Runnable Instances Detection Period** property of the SQL Workflow Instance Store specifies the time period after which the SQL Workflow Instance Store runs a detection task to detect any runnable or activatable workflow instances in the persistence database after the previous detection cycle.</span></span> <span data-ttu-id="a8860-134">Vedere [Runnable Instances Detection Period](../../../docs/framework/windows-workflow-foundation/runnable-instances-detection-period.md) per ulteriori informazioni su questa proprietà.</span><span class="sxs-lookup"><span data-stu-id="a8860-134">See [Runnable Instances Detection Period](../../../docs/framework/windows-workflow-foundation/runnable-instances-detection-period.md) for more details on this property.</span></span>
