---
title: 'Procedura: Definire un tipo generico tramite reflection emit'
description: Vedere come definire un tipo generico tramite Reflection Emit. Creare un tipo generico con due parametri di tipo, applicare vincoli di classe, vincoli di interfaccia e altro ancora.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- generics [.NET Framework], reflection emit
- generics [.NET Framework], dynamic types
- reflection emit, generic types
ms.assetid: 07d5f01a-7b5b-40ea-9b15-f21561098fe4
ms.openlocfilehash: fe8fb731fd160ab87e5c65debf367a96bc0dea2a
ms.sourcegitcommit: 3d84eac0818099c9949035feb96bbe0346358504
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/21/2020
ms.locfileid: "86865125"
---
# <a name="how-to-define-a-generic-type-with-reflection-emit"></a><span data-ttu-id="6df63-104">Procedura: Definire un tipo generico tramite reflection emit</span><span class="sxs-lookup"><span data-stu-id="6df63-104">How to: Define a Generic Type with Reflection Emit</span></span>
<span data-ttu-id="6df63-105">Questo argomento illustra come creare un tipo generico semplice con due parametri di tipo, come applicare vincoli speciali, di classe e di interfaccia ai parametri di tipo e come creare membri che usano i parametri di tipo della classe come tipi di parametro o tipi restituiti.</span><span class="sxs-lookup"><span data-stu-id="6df63-105">This topic shows how to create a simple generic type with two type parameters, how to apply class constraints, interface constraints, and special constraints to the type parameters, and how to create members that use the type parameters of the class as parameter types and return types.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="6df63-106">Un metodo non può essere considerato generico solo perché appartiene a un tipo generico e ne usa i parametri di tipo.</span><span class="sxs-lookup"><span data-stu-id="6df63-106">A method is not generic just because it belongs to a generic type and uses the type parameters of that type.</span></span> <span data-ttu-id="6df63-107">Per essere generico, un metodo deve avere un elenco specifico di parametri di tipo.</span><span class="sxs-lookup"><span data-stu-id="6df63-107">A method is generic only if it has its own type parameter list.</span></span> <span data-ttu-id="6df63-108">La maggior parte dei metodi appartenenti a tipi generici non sono generici, come nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="6df63-108">Most methods on generic types are not generic, as in this example.</span></span> <span data-ttu-id="6df63-109">Per un esempio di creazione di un metodo generico, vedere [Procedura: Definire un metodo generico tramite reflection emit](how-to-define-a-generic-method-with-reflection-emit.md).</span><span class="sxs-lookup"><span data-stu-id="6df63-109">For an example of emitting a generic method, see [How to: Define a Generic Method with Reflection Emit](how-to-define-a-generic-method-with-reflection-emit.md).</span></span>  
  
### <a name="to-define-a-generic-type"></a><span data-ttu-id="6df63-110">Per definire un tipo generico</span><span class="sxs-lookup"><span data-stu-id="6df63-110">To define a generic type</span></span>  
  
1. <span data-ttu-id="6df63-111">Definire un assembly dinamico denominato `GenericEmitExample1`.</span><span class="sxs-lookup"><span data-stu-id="6df63-111">Define a dynamic assembly named `GenericEmitExample1`.</span></span> <span data-ttu-id="6df63-112">In questo esempio poiché l'assembly viene eseguito e salvato su disco, viene specificato <xref:System.Reflection.Emit.AssemblyBuilderAccess.RunAndSave?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6df63-112">In this example, the assembly is executed and saved to disk, so <xref:System.Reflection.Emit.AssemblyBuilderAccess.RunAndSave?displayProperty=nameWithType> is specified.</span></span>  
  
     [!code-cpp[EmitGenericType#2](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#2)]
     [!code-csharp[EmitGenericType#2](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#2)]
     [!code-vb[EmitGenericType#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#2)]  
  
2. <span data-ttu-id="6df63-113">Definire un modulo dinamico.</span><span class="sxs-lookup"><span data-stu-id="6df63-113">Define a dynamic module.</span></span> <span data-ttu-id="6df63-114">Un assembly è composto da moduli eseguibili.</span><span class="sxs-lookup"><span data-stu-id="6df63-114">An assembly is made up of executable modules.</span></span> <span data-ttu-id="6df63-115">Per un assembly a modulo singolo, il nome del modulo è lo stesso dell'assembly e il nome del file corrisponde a quello del modulo seguito da un'estensione.</span><span class="sxs-lookup"><span data-stu-id="6df63-115">For a single-module assembly, the module name is the same as the assembly name, and the file name is the module name plus an extension.</span></span>  
  
     [!code-cpp[EmitGenericType#3](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#3)]
     [!code-csharp[EmitGenericType#3](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#3)]
     [!code-vb[EmitGenericType#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#3)]  
  
3. <span data-ttu-id="6df63-116">Definire una classe.</span><span class="sxs-lookup"><span data-stu-id="6df63-116">Define a class.</span></span> <span data-ttu-id="6df63-117">In questo esempio la classe è denominata `Sample`.</span><span class="sxs-lookup"><span data-stu-id="6df63-117">In this example, the class is named `Sample`.</span></span>  
  
     [!code-cpp[EmitGenericType#4](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#4)]
     [!code-csharp[EmitGenericType#4](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#4)]
     [!code-vb[EmitGenericType#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#4)]  
  
4. <span data-ttu-id="6df63-118">Definire i parametri di tipo generico di `Sample` passando una matrice di stringhe contenenti i nomi dei parametri al metodo <xref:System.Reflection.Emit.TypeBuilder.DefineGenericParameters%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6df63-118">Define the generic type parameters of `Sample` by passing an array of strings containing the names of the parameters to the <xref:System.Reflection.Emit.TypeBuilder.DefineGenericParameters%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="6df63-119">In questo modo la classe diventa un tipo generico.</span><span class="sxs-lookup"><span data-stu-id="6df63-119">This makes the class a generic type.</span></span> <span data-ttu-id="6df63-120">Il valore restituito è una matrice di oggetti <xref:System.Reflection.Emit.GenericTypeParameterBuilder> che rappresentano i parametri di tipo e che possono essere usati nel codice creato.</span><span class="sxs-lookup"><span data-stu-id="6df63-120">The return value is an array of <xref:System.Reflection.Emit.GenericTypeParameterBuilder> objects representing the type parameters, which can be used in your emitted code.</span></span>  
  
     <span data-ttu-id="6df63-121">Nel codice seguente `Sample` diventa un tipo generico con parametri di tipo `TFirst` e `TSecond`.</span><span class="sxs-lookup"><span data-stu-id="6df63-121">In the following code, `Sample` becomes a generic type with type parameters `TFirst` and `TSecond`.</span></span> <span data-ttu-id="6df63-122">Per migliorare la leggibilità del codice, ogni oggetto <xref:System.Reflection.Emit.GenericTypeParameterBuilder> viene inserito in una variabile che ha lo stesso nome del parametro di tipo.</span><span class="sxs-lookup"><span data-stu-id="6df63-122">To make the code easier to read, each <xref:System.Reflection.Emit.GenericTypeParameterBuilder> is placed in a variable with the same name as the type parameter.</span></span>  
  
     [!code-cpp[EmitGenericType#5](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#5)]
     [!code-csharp[EmitGenericType#5](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#5)]
     [!code-vb[EmitGenericType#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#5)]  
  
5. <span data-ttu-id="6df63-123">Aggiungere vincoli speciali ai parametri di tipo.</span><span class="sxs-lookup"><span data-stu-id="6df63-123">Add special constraints to the type parameters.</span></span> <span data-ttu-id="6df63-124">In questo esempio il parametro di tipo `TFirst` è vincolato a tipi con costruttori senza parametri e a tipi di riferimento.</span><span class="sxs-lookup"><span data-stu-id="6df63-124">In this example, type parameter `TFirst` is constrained to types that have parameterless constructors, and to reference types.</span></span>  
  
     [!code-cpp[EmitGenericType#6](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#6)]
     [!code-csharp[EmitGenericType#6](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#6)]
     [!code-vb[EmitGenericType#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#6)]  
  
6. <span data-ttu-id="6df63-125">Facoltativamente, aggiungere vincoli di interfaccia e di classe ai parametri di tipo.</span><span class="sxs-lookup"><span data-stu-id="6df63-125">Optionally add class and interface constraints to the type parameters.</span></span> <span data-ttu-id="6df63-126">In questo esempio il parametro di tipo `TFirst` è vincolato a tipi che derivano dalla classe di base rappresentata dall'oggetto <xref:System.Type> contenuto nella variabile `baseType` e che implementano le interfacce i cui tipi sono contenuti nelle variabili `interfaceA` e `interfaceB`.</span><span class="sxs-lookup"><span data-stu-id="6df63-126">In this example, type parameter `TFirst` is constrained to types that derive from the base class represented by the <xref:System.Type> object contained in the variable `baseType`, and that implement the interfaces whose types are contained in the variables `interfaceA` and `interfaceB`.</span></span> <span data-ttu-id="6df63-127">Per la dichiarazione e l'assegnazione di queste variabili, vedere l'esempio di codice.</span><span class="sxs-lookup"><span data-stu-id="6df63-127">See the code example for the declaration and assignment of these variables.</span></span>  
  
     [!code-cpp[EmitGenericType#7](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#7)]
     [!code-csharp[EmitGenericType#7](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#7)]
     [!code-vb[EmitGenericType#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#7)]  
  
7. <span data-ttu-id="6df63-128">Definire un campo.</span><span class="sxs-lookup"><span data-stu-id="6df63-128">Define a field.</span></span> <span data-ttu-id="6df63-129">In questo esempio il tipo del campo è specificato dal parametro di tipo `TFirst`.</span><span class="sxs-lookup"><span data-stu-id="6df63-129">In this example, the type of the field is specified by type parameter `TFirst`.</span></span> <span data-ttu-id="6df63-130">Poiché <xref:System.Reflection.Emit.GenericTypeParameterBuilder> deriva da <xref:System.Type>, è possibile usare parametri di tipo generico ovunque sia consentito l'uso di un tipo.</span><span class="sxs-lookup"><span data-stu-id="6df63-130"><xref:System.Reflection.Emit.GenericTypeParameterBuilder> derives from <xref:System.Type>, so you can use generic type parameters anywhere a type can be used.</span></span>  
  
     [!code-cpp[EmitGenericType#21](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#21)]
     [!code-csharp[EmitGenericType#21](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#21)]
     [!code-vb[EmitGenericType#21](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#21)]  
  
8. <span data-ttu-id="6df63-131">Definire un metodo che usa i parametri di tipo del tipo generico.</span><span class="sxs-lookup"><span data-stu-id="6df63-131">Define a method that uses the type parameters of the generic type.</span></span> <span data-ttu-id="6df63-132">Si noti che questi tipi di metodi non sono generici, a meno che non abbiano specifici elenchi di parametri di tipo.</span><span class="sxs-lookup"><span data-stu-id="6df63-132">Note that such methods are not generic unless they have their own type parameter lists.</span></span> <span data-ttu-id="6df63-133">Il codice seguente definisce un metodo `static` (`Shared` in Visual Basic) che accetta una matrice di `TFirst` e restituisce `List<TFirst>` (`List(Of TFirst)` in Visual Basic) contenente tutti gli elementi della matrice.</span><span class="sxs-lookup"><span data-stu-id="6df63-133">The following code defines a `static` method (`Shared` in Visual Basic) that takes an array of `TFirst` and returns a `List<TFirst>` (`List(Of TFirst)` in Visual Basic) containing all the elements of the array.</span></span> <span data-ttu-id="6df63-134">Per definire questo metodo, è necessario creare il tipo `List<TFirst>` chiamando <xref:System.Type.MakeGenericType%2A> nella definizione di tipo generico `List<T>`.</span><span class="sxs-lookup"><span data-stu-id="6df63-134">To define this method, it is necessary to create the type `List<TFirst>` by calling <xref:System.Type.MakeGenericType%2A> on the generic type definition, `List<T>`.</span></span> <span data-ttu-id="6df63-135">`T`Viene omesso quando si utilizza l' `typeof` operatore ( `GetType` in Visual Basic) per ottenere la definizione di tipo generico. Il tipo di parametro viene creato tramite il <xref:System.Type.MakeArrayType%2A> metodo.</span><span class="sxs-lookup"><span data-stu-id="6df63-135">(The `T` is omitted when you use the `typeof` operator (`GetType` in Visual Basic) to get the generic type definition.) The parameter type is created by using the <xref:System.Type.MakeArrayType%2A> method.</span></span>  
  
     [!code-cpp[EmitGenericType#22](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#22)]
     [!code-csharp[EmitGenericType#22](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#22)]
     [!code-vb[EmitGenericType#22](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#22)]  
  
9. <span data-ttu-id="6df63-136">Creare il corpo del metodo.</span><span class="sxs-lookup"><span data-stu-id="6df63-136">Emit the method body.</span></span> <span data-ttu-id="6df63-137">Il corpo del metodo è costituito da tre codici operativi che caricano la matrice di input nello stack, chiamano il costruttore `List<TFirst>` che accetta `IEnumerable<TFirst>`, che esegue tutte le operazioni necessarie per l'inserimento degli elementi di input nell'elenco, e terminano lasciando il nuovo oggetto <xref:System.Collections.Generic.List%601> nello stack.</span><span class="sxs-lookup"><span data-stu-id="6df63-137">The method body consists of three opcodes that load the input array onto the stack, call the `List<TFirst>` constructor that takes `IEnumerable<TFirst>` (which does all the work of putting the input elements into the list), and return (leaving the new <xref:System.Collections.Generic.List%601> object on the stack).</span></span> <span data-ttu-id="6df63-138">Nella creazione di questo codice la difficoltà principale è rappresentata dal recupero del costruttore.</span><span class="sxs-lookup"><span data-stu-id="6df63-138">The difficult part of emitting this code is getting the constructor.</span></span>  
  
     <span data-ttu-id="6df63-139">Poiché il metodo <xref:System.Type.GetConstructor%2A> non è supportato in <xref:System.Reflection.Emit.GenericTypeParameterBuilder>, non è possibile ottenere il costruttore di `List<TFirst>` in modo diretto.</span><span class="sxs-lookup"><span data-stu-id="6df63-139">The <xref:System.Type.GetConstructor%2A> method is not supported on a <xref:System.Reflection.Emit.GenericTypeParameterBuilder>, so it is not possible to get the constructor of `List<TFirst>` directly.</span></span> <span data-ttu-id="6df63-140">È innanzitutto necessario ottenere il costruttore della definizione di tipo generico `List<T>`, quindi chiamare un metodo che lo converta nel costruttore corrispondente di `List<TFirst>`.</span><span class="sxs-lookup"><span data-stu-id="6df63-140">First, it is necessary to get the constructor of the generic type definition `List<T>` and then to call a method that converts it to the corresponding constructor of `List<TFirst>`.</span></span>  
  
     <span data-ttu-id="6df63-141">Il costruttore usato per questo esempio di codice accetta `IEnumerable<T>`.</span><span class="sxs-lookup"><span data-stu-id="6df63-141">The constructor used for this code example takes an `IEnumerable<T>`.</span></span> <span data-ttu-id="6df63-142">Si noti tuttavia che, non trattandosi della definizione di tipo generico dell'interfaccia generica <xref:System.Collections.Generic.IEnumerable%601>, è necessario sostituire il parametro di tipo `T` di `List<T>` per il parametro di tipo `T` di `IEnumerable<T>`.</span><span class="sxs-lookup"><span data-stu-id="6df63-142">Note, however, that this is not the generic type definition of the <xref:System.Collections.Generic.IEnumerable%601> generic interface; instead, the type parameter `T` from `List<T>` must be substituted for the type parameter `T` of `IEnumerable<T>`.</span></span> <span data-ttu-id="6df63-143">Per evitare che la presenza di parametri di tipo denominati `T`</span><span class="sxs-lookup"><span data-stu-id="6df63-143">(This seems confusing only because both types have type parameters named `T`.</span></span> <span data-ttu-id="6df63-144">Questo è il motivo per cui in questo esempio di codice vengono usati i nomi `TFirst` e `TSecond` . Per ottenere il tipo dell'argomento del costruttore, iniziare con la definizione di tipo generico `IEnumerable<T>` e chiamare <xref:System.Type.MakeGenericType%2A> con il primo parametro di tipo generico di `List<T>` .</span><span class="sxs-lookup"><span data-stu-id="6df63-144">That is why this code example uses the names `TFirst` and `TSecond`.) To get the type of the constructor argument, start with the generic type definition `IEnumerable<T>` and call <xref:System.Type.MakeGenericType%2A> with the first generic type parameter of `List<T>`.</span></span> <span data-ttu-id="6df63-145">L'elenco di argomenti del costruttore deve essere passato come matrice che, in questo caso, contiene un unico argomento.</span><span class="sxs-lookup"><span data-stu-id="6df63-145">The constructor argument list must be passed as an array, with just one argument in this case.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="6df63-146">La definizione di tipo generico è espressa come `IEnumerable<>` quando viene usato l'operatore `typeof` in C# oppure come `IEnumerable(Of )` quando viene usato l'operatore `GetType` in Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="6df63-146">The generic type definition is expressed as `IEnumerable<>` when you use the `typeof` operator in C#, or `IEnumerable(Of )` when you use the `GetType` operator in Visual Basic.</span></span>  
  
     <span data-ttu-id="6df63-147">A questo punto è possibile ottenere il costruttore di `List<T>` chiamando <xref:System.Type.GetConstructor%2A> nella definizione di tipo generico.</span><span class="sxs-lookup"><span data-stu-id="6df63-147">Now it is possible to get the constructor of `List<T>` by calling <xref:System.Type.GetConstructor%2A> on the generic type definition.</span></span> <span data-ttu-id="6df63-148">Per convertire questo costruttore nel costruttore corrispondente di `List<TFirst>`, passare `List<TFirst>` e il costruttore da `List<T>` al metodo statico <xref:System.Reflection.Emit.TypeBuilder.GetConstructor%28System.Type%2CSystem.Reflection.ConstructorInfo%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6df63-148">To convert this constructor to the corresponding constructor of `List<TFirst>`, pass `List<TFirst>` and the constructor from `List<T>` to the static <xref:System.Reflection.Emit.TypeBuilder.GetConstructor%28System.Type%2CSystem.Reflection.ConstructorInfo%29?displayProperty=nameWithType> method.</span></span>  
  
     [!code-cpp[EmitGenericType#23](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#23)]
     [!code-csharp[EmitGenericType#23](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#23)]
     [!code-vb[EmitGenericType#23](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#23)]  
  
10. <span data-ttu-id="6df63-149">Creare il tipo e salvare il file.</span><span class="sxs-lookup"><span data-stu-id="6df63-149">Create the type and save the file.</span></span>  
  
     [!code-cpp[EmitGenericType#8](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#8)]
     [!code-csharp[EmitGenericType#8](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#8)]
     [!code-vb[EmitGenericType#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#8)]  
  
11. <span data-ttu-id="6df63-150">Richiamare il metodo.</span><span class="sxs-lookup"><span data-stu-id="6df63-150">Invoke the method.</span></span> <span data-ttu-id="6df63-151">Poiché `ExampleMethod` non è generico ma appartiene a un tipo generico, per ottenere un oggetto <xref:System.Reflection.MethodInfo> che possa essere richiamato, è necessario creare un tipo costruito dalla definizione di tipo per `Sample`.</span><span class="sxs-lookup"><span data-stu-id="6df63-151">`ExampleMethod` is not generic, but the type it belongs to is generic, so in order to get a <xref:System.Reflection.MethodInfo> that can be invoked it is necessary to create a constructed type from the type definition for `Sample`.</span></span> <span data-ttu-id="6df63-152">Il tipo costruito usa la classe `Example` che, essendo un tipo di riferimento e disponendo di un costruttore senza parametri predefinito, soddisfa i vincoli di `TFirst` e la classe `ExampleDerived` che soddisfa i vincoli di `TSecond`.</span><span class="sxs-lookup"><span data-stu-id="6df63-152">The constructed type uses the `Example` class, which satisfies the constraints on `TFirst` because it is a reference type and has a default parameterless constructor, and the `ExampleDerived` class which satisfies the constraints on `TSecond`.</span></span> <span data-ttu-id="6df63-153">(Il codice per `ExampleDerived` è disponibile nella sezione di codice di esempio). Questi due tipi vengono passati a <xref:System.Type.MakeGenericType%2A> per creare il tipo costruito.</span><span class="sxs-lookup"><span data-stu-id="6df63-153">(The code for `ExampleDerived` can be found in the example code section.) These two types are passed to <xref:System.Type.MakeGenericType%2A> to create the constructed type.</span></span> <span data-ttu-id="6df63-154"><xref:System.Reflection.MethodInfo> viene quindi ottenuto usando il metodo <xref:System.Type.GetMethod%2A>.</span><span class="sxs-lookup"><span data-stu-id="6df63-154">The <xref:System.Reflection.MethodInfo> is then obtained using the <xref:System.Type.GetMethod%2A> method.</span></span>  
  
     [!code-cpp[EmitGenericType#9](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#9)]
     [!code-csharp[EmitGenericType#9](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#9)]
     [!code-vb[EmitGenericType#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#9)]  
  
12. <span data-ttu-id="6df63-155">Il codice seguente crea una matrice di oggetti `Example`, inserisce la matrice in una matrice di tipo <xref:System.Object> che rappresenta gli argomenti del metodo da richiamare e le passa al metodo <xref:System.Reflection.MethodBase.Invoke%28System.Object%2CSystem.Object%5B%5D%29>.</span><span class="sxs-lookup"><span data-stu-id="6df63-155">The following code creates an array of `Example` objects, places that array in an array of type <xref:System.Object> representing the arguments of the method to be invoked, and passes them to the <xref:System.Reflection.MethodBase.Invoke%28System.Object%2CSystem.Object%5B%5D%29> method.</span></span> <span data-ttu-id="6df63-156">Il primo argomento del metodo <xref:System.Reflection.MethodBase.Invoke%2A> è un riferimento Null perché il metodo è `static`.</span><span class="sxs-lookup"><span data-stu-id="6df63-156">The first argument of the <xref:System.Reflection.MethodBase.Invoke%2A> method is a null reference because the method is `static`.</span></span>  
  
     [!code-cpp[EmitGenericType#10](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#10)]
     [!code-csharp[EmitGenericType#10](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#10)]
     [!code-vb[EmitGenericType#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#10)]  
  
## <a name="example"></a><span data-ttu-id="6df63-157">Esempio</span><span class="sxs-lookup"><span data-stu-id="6df63-157">Example</span></span>  
 <span data-ttu-id="6df63-158">L'esempio di codice seguente definisce una classe denominata `Sample` insieme a una classe di base e a due interfacce.</span><span class="sxs-lookup"><span data-stu-id="6df63-158">The following code example defines a class named `Sample`, along with a base class and two interfaces.</span></span> <span data-ttu-id="6df63-159">Il programma definisce due parametri di tipo generico per la classe `Sample`, trasformandola in un tipo generico.</span><span class="sxs-lookup"><span data-stu-id="6df63-159">The program defines two generic type parameters for `Sample`, turning it into a generic type.</span></span> <span data-ttu-id="6df63-160">I parametri di tipo sono gli unici elementi in grado di rendere generico un tipo.</span><span class="sxs-lookup"><span data-stu-id="6df63-160">Type parameters are the only thing that makes a type generic.</span></span> <span data-ttu-id="6df63-161">Il programma segnala questa trasformazione visualizzando un messaggio di prova sia prima che dopo la definizione dei parametri di tipo.</span><span class="sxs-lookup"><span data-stu-id="6df63-161">The program shows this by displaying a test message before and after the definition of the type parameters.</span></span>  
  
 <span data-ttu-id="6df63-162">Il parametro di tipo `TSecond` viene usato per dimostrare i vincoli di interfaccia e di classe tramite le interfacce e la classe di base, mentre il parametro di tipo `TFirst` viene usato per dimostrare i vincoli speciali.</span><span class="sxs-lookup"><span data-stu-id="6df63-162">The type parameter `TSecond` is used to demonstrate class and interface constraints, using the base class and interfaces, and the type parameter `TFirst` is used to demonstrate special constraints.</span></span>  
  
 <span data-ttu-id="6df63-163">L'esempio di codice definisce un campo e un metodo usando i parametri di tipo della classe per il tipo di campo e per il parametro e il tipo restituito del metodo.</span><span class="sxs-lookup"><span data-stu-id="6df63-163">The code example defines a field and a method using the class's type parameters for the field type and for the parameter and return type of the method.</span></span>  
  
 <span data-ttu-id="6df63-164">Dopo aver creato la classe `Sample`, viene richiamato il metodo.</span><span class="sxs-lookup"><span data-stu-id="6df63-164">After the `Sample` class has been created, the method is invoked.</span></span>  
  
 <span data-ttu-id="6df63-165">Il programma include un metodo che visualizza informazioni su un tipo generico e un metodo che visualizza i vincoli speciali in un parametro di tipo.</span><span class="sxs-lookup"><span data-stu-id="6df63-165">The program includes a method that lists information about a generic type, and a method that lists the special constraints on a type parameter.</span></span> <span data-ttu-id="6df63-166">Questi metodi vengono usati per visualizzare informazioni sulla classe `Sample` completata.</span><span class="sxs-lookup"><span data-stu-id="6df63-166">These methods are used to display information about the finished `Sample` class.</span></span>  
  
 <span data-ttu-id="6df63-167">Il programma salva il modulo completato su disco come `GenericEmitExample1.dll` in modo che sia possibile aprirlo con [Ildasm.exe (Disassembler IL)](../tools/ildasm-exe-il-disassembler.md) ed esaminare il codice MSIL per la classe `Sample`.</span><span class="sxs-lookup"><span data-stu-id="6df63-167">The program saves the finished module to disk as `GenericEmitExample1.dll`, so you can open it with the [Ildasm.exe (IL Disassembler)](../tools/ildasm-exe-il-disassembler.md) and examine the MSIL for the `Sample` class.</span></span>  
  
 [!code-cpp[EmitGenericType#1](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#1)]
 [!code-csharp[EmitGenericType#1](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#1)]
 [!code-vb[EmitGenericType#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#1)]  
  
## <a name="see-also"></a><span data-ttu-id="6df63-168">Vedi anche</span><span class="sxs-lookup"><span data-stu-id="6df63-168">See also</span></span>

- <xref:System.Reflection.Emit.GenericTypeParameterBuilder>
- <span data-ttu-id="6df63-169">[Uso della reflection emit](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/3y322t50(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="6df63-169">[Using Reflection Emit](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/3y322t50(v=vs.100))</span></span>
- <span data-ttu-id="6df63-170">[Scenari relativi ad assembly dinamici della reflection emit](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/tt9483fk(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="6df63-170">[Reflection Emit Dynamic Assembly Scenarios](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/tt9483fk(v=vs.100))</span></span>
