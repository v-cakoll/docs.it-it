---
title: gRPC
description: Informazioni su gRPC, il suo ruolo in applicazioni native del cloud e su come si differenzia dalla comunicazione RESTful HTTP.
author: robvet
ms.date: 05/13/2020
ms.openlocfilehash: f34b267d7f5c6b4e593841c80df44d1ccbde95ae
ms.sourcegitcommit: 27db07ffb26f76912feefba7b884313547410db5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/19/2020
ms.locfileid: "83614045"
---
# <a name="grpc"></a><span data-ttu-id="8fc38-103">gRPC</span><span class="sxs-lookup"><span data-stu-id="8fc38-103">gRPC</span></span>

<span data-ttu-id="8fc38-104">Fino a questo libro abbiamo incentrato sulla comunicazione [basata su REST](https://docs.microsoft.com/azure/architecture/best-practices/api-design) .</span><span class="sxs-lookup"><span data-stu-id="8fc38-104">So far in this book, we've focused on [REST-based](https://docs.microsoft.com/azure/architecture/best-practices/api-design) communication.</span></span> <span data-ttu-id="8fc38-105">Abbiamo visto che REST è uno stile di architettura flessibile che definisce le operazioni basate su CRUD sulle risorse di entità.</span><span class="sxs-lookup"><span data-stu-id="8fc38-105">We've seen that REST is a flexible architectural style that defines CRUD-based operations against entity resources.</span></span> <span data-ttu-id="8fc38-106">I client interagiscono con le risorse su HTTP con un modello di comunicazione di tipo richiesta/risposta.</span><span class="sxs-lookup"><span data-stu-id="8fc38-106">Clients interact with resources across HTTP with a request/response communication model.</span></span> <span data-ttu-id="8fc38-107">Mentre REST è ampiamente implementato, una tecnologia di comunicazione più recente, gRPC, ha raggiunto un notevole slancio nella community nativa del cloud.</span><span class="sxs-lookup"><span data-stu-id="8fc38-107">While REST is widely implemented, a newer communication technology, gRPC, has gained tremendous momentum across the cloud-native community.</span></span>

## <a name="what-is-grpc"></a><span data-ttu-id="8fc38-108">Che cos'è gRPC?</span><span class="sxs-lookup"><span data-stu-id="8fc38-108">What is gRPC?</span></span>

<span data-ttu-id="8fc38-109">gRPC è un Framework moderno e a prestazioni elevate che evolve il protocollo [RPC (Remote Procedure Call)](https://en.wikipedia.org/wiki/Remote_procedure_call) obsoleto.</span><span class="sxs-lookup"><span data-stu-id="8fc38-109">gRPC is a modern, high-performance framework that evolves the age-old [remote procedure call (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) protocol.</span></span> <span data-ttu-id="8fc38-110">A livello di applicazione, gRPC semplifica la messaggistica tra i client e i servizi back-end.</span><span class="sxs-lookup"><span data-stu-id="8fc38-110">At the application level, gRPC streamlines messaging between clients and back-end services.</span></span> <span data-ttu-id="8fc38-111">Originato da Google, gRPC è open source e fa parte dell'ecosistema [cloud native Computing Foundation (CNCF)](https://www.cncf.io/) delle offerte native del cloud.</span><span class="sxs-lookup"><span data-stu-id="8fc38-111">Originating from Google, gRPC is open source and part of the  [Cloud Native Computing Foundation (CNCF)](https://www.cncf.io/) ecosystem of cloud-native offerings.</span></span> <span data-ttu-id="8fc38-112">CNCF considera gRPC un [progetto di incubazione](https://github.com/cncf/toc/blob/master/process/graduation_criteria.adoc).</span><span class="sxs-lookup"><span data-stu-id="8fc38-112">CNCF considers gRPC an [incubating project](https://github.com/cncf/toc/blob/master/process/graduation_criteria.adoc).</span></span> <span data-ttu-id="8fc38-113">L'incubazione significa che gli utenti finali usano la tecnologia nelle applicazioni di produzione e il progetto ha un numero integro di collaboratori.</span><span class="sxs-lookup"><span data-stu-id="8fc38-113">Incubating means end users are using the technology in production applications, and the project has a healthy number of contributors.</span></span>

<span data-ttu-id="8fc38-114">Una tipica app client gRPC esporrà una funzione locale in-process che implementa un'operazione aziendale.</span><span class="sxs-lookup"><span data-stu-id="8fc38-114">A typical gRPC client app will expose a local, in-process function that implements a business operation.</span></span> <span data-ttu-id="8fc38-115">Dietro le quinte, tale funzione locale richiama un'altra funzione in un computer remoto.</span><span class="sxs-lookup"><span data-stu-id="8fc38-115">Under the covers, that local function invokes another function on a remote machine.</span></span> <span data-ttu-id="8fc38-116">Ciò che sembra essere una chiamata locale essenzialmente diventa una chiamata out-of-process trasparente a un servizio remoto.</span><span class="sxs-lookup"><span data-stu-id="8fc38-116">What appears to be a local call essentially becomes a transparent out-of-process call to a remote service.</span></span> <span data-ttu-id="8fc38-117">Il plumbing RPC astrae la comunicazione, la serializzazione e l'esecuzione di rete da punto a punto tra i computer.</span><span class="sxs-lookup"><span data-stu-id="8fc38-117">The RPC plumbing abstracts the point-to-point networking communication, serialization, and execution between computers.</span></span>

<span data-ttu-id="8fc38-118">Nelle applicazioni native del cloud, gli sviluppatori spesso lavorano in linguaggi di programmazione, Framework e tecnologie.</span><span class="sxs-lookup"><span data-stu-id="8fc38-118">In cloud-native applications, developers often work across programming languages, frameworks, and technologies.</span></span> <span data-ttu-id="8fc38-119">Questa *interoperabilità* complica i contratti di messaggio e il plumbing necessario per le comunicazioni tra piattaforme.</span><span class="sxs-lookup"><span data-stu-id="8fc38-119">This *interoperability* complicates message contracts and the plumbing required for cross-platform communication.</span></span>  <span data-ttu-id="8fc38-120">gRPC fornisce un "livello orizzontale uniforme" che astrae questi problemi.</span><span class="sxs-lookup"><span data-stu-id="8fc38-120">gRPC provides a "uniform horizontal layer" that abstracts these concerns.</span></span> <span data-ttu-id="8fc38-121">Gli sviluppatori codificano nella propria piattaforma nativa incentrata sulle funzionalità aziendali, mentre gRPC gestisce il plumbing delle comunicazioni.</span><span class="sxs-lookup"><span data-stu-id="8fc38-121">Developers code in their native platform focused on business functionality, while gRPC handles communication plumbing.</span></span>

<span data-ttu-id="8fc38-122">gRPC offre supporto completo tra gli stack di sviluppo più diffusi, tra cui Java, JavaScript, C#, go, Swift e NodeJS.</span><span class="sxs-lookup"><span data-stu-id="8fc38-122">gRPC offers comprehensive support across most popular development stacks, including Java, JavaScript, C#, Go, Swift, and NodeJS.</span></span>

## <a name="grpc-benefits"></a><span data-ttu-id="8fc38-123">Vantaggi di gRPC</span><span class="sxs-lookup"><span data-stu-id="8fc38-123">gRPC Benefits</span></span>

<span data-ttu-id="8fc38-124">gRPC Usa HTTP/2 per il protocollo di trasporto.</span><span class="sxs-lookup"><span data-stu-id="8fc38-124">gRPC uses HTTP/2 for its transport protocol.</span></span> <span data-ttu-id="8fc38-125">Sebbene compatibile con HTTP 1,1, HTTP/2 presenta numerose funzionalità avanzate:</span><span class="sxs-lookup"><span data-stu-id="8fc38-125">While compatible with HTTP 1.1, HTTP/2 features many advanced capabilities:</span></span>

- <span data-ttu-id="8fc38-126">Protocollo binario per il trasporto di dati, a differenza di HTTP 1,1, che invia dati come testo non crittografato.</span><span class="sxs-lookup"><span data-stu-id="8fc38-126">A binary protocol for data transport - unlike HTTP 1.1, which sends data as clear text.</span></span>
- <span data-ttu-id="8fc38-127">Supporto del multiplexing per l'invio di più richieste parallele sulla stessa connessione-HTTP 1,1 limita l'elaborazione a un messaggio di richiesta/risposta alla volta.</span><span class="sxs-lookup"><span data-stu-id="8fc38-127">Multiplexing support for sending multiple parallel requests over the same connection - HTTP 1.1 limits processing to one request/response message at a time.</span></span>
- <span data-ttu-id="8fc38-128">Comunicazione bidirezionale full duplex per l'invio simultaneo di richieste client e risposte al server.</span><span class="sxs-lookup"><span data-stu-id="8fc38-128">Bidirectional full-duplex communication for sending both client requests and server responses simultaneously.</span></span>
- <span data-ttu-id="8fc38-129">Il flusso predefinito consente le richieste e le risposte per trasmettere in modo asincrono set di dati di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="8fc38-129">Built-in streaming enabling requests and responses to asynchronously stream large data sets.</span></span>

<span data-ttu-id="8fc38-130">gRPC è leggero ed efficiente.</span><span class="sxs-lookup"><span data-stu-id="8fc38-130">gRPC is lightweight and highly performant.</span></span> <span data-ttu-id="8fc38-131">Può essere fino a 8x più veloce rispetto alla serializzazione JSON con messaggi 60-80% inferiori.</span><span class="sxs-lookup"><span data-stu-id="8fc38-131">It can be up to 8x faster than JSON serialization with messages 60-80% smaller.</span></span> <span data-ttu-id="8fc38-132">Nel gergo di Microsoft [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) , le prestazioni gRPC superano la velocità e l'efficienza delle [associazioni NetTcp](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8)altamente ottimizzate.</span><span class="sxs-lookup"><span data-stu-id="8fc38-132">In Microsoft [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) parlance, gRPC performance exceeds the speed and efficiency of the highly optimized [NetTCP bindings](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span></span> <span data-ttu-id="8fc38-133">Diversamente da NetTCP, che predilige Microsoft stack, gRPC è multipiattaforma.</span><span class="sxs-lookup"><span data-stu-id="8fc38-133">Unlike NetTCP, which favors the Microsoft stack, gRPC is cross-platform.</span></span>

## <a name="protocol-buffers"></a><span data-ttu-id="8fc38-134">Buffer di protocollo</span><span class="sxs-lookup"><span data-stu-id="8fc38-134">Protocol Buffers</span></span>

<span data-ttu-id="8fc38-135">gRPC adotta una tecnologia open source denominata buffer del [protocollo](https://developers.google.com/protocol-buffers/docs/overview).</span><span class="sxs-lookup"><span data-stu-id="8fc38-135">gRPC embraces an open-source technology called [Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview).</span></span> <span data-ttu-id="8fc38-136">Forniscono un formato di serializzazione estremamente efficiente e indipendente dalla piattaforma per la serializzazione di messaggi strutturati che i servizi inviano tra loro.</span><span class="sxs-lookup"><span data-stu-id="8fc38-136">They provide a highly efficient and platform-neutral serialization format for serializing structured messages that services send to each other.</span></span> <span data-ttu-id="8fc38-137">Usando un linguaggio IDL (Multi-Platform Interface Definition Language), gli sviluppatori definiscono un contratto di servizio per ogni microservizio.</span><span class="sxs-lookup"><span data-stu-id="8fc38-137">Using a cross-platform Interface Definition Language (IDL), developers define a service contract for each microservice.</span></span> <span data-ttu-id="8fc38-138">Il contratto, implementato come file basato su testo `.proto` , descrive i metodi, gli input e gli output per ogni servizio.</span><span class="sxs-lookup"><span data-stu-id="8fc38-138">The contract, implemented as a text-based `.proto` file, describes the methods, inputs, and outputs for each service.</span></span> <span data-ttu-id="8fc38-139">Lo stesso file di contratto può essere usato per i client e i servizi gRPC basati su diverse piattaforme di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="8fc38-139">The same contract file can be used for gRPC clients and services built on different development platforms.</span></span>

<span data-ttu-id="8fc38-140">Usando il file proto, il compilatore protobuf `protoc` genera il codice client e del servizio per la piattaforma di destinazione.</span><span class="sxs-lookup"><span data-stu-id="8fc38-140">Using the proto file, the Protobuf compiler, `protoc`, generates both client and service code for your target platform.</span></span> <span data-ttu-id="8fc38-141">Il codice include i componenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="8fc38-141">The code includes the following components:</span></span>

- <span data-ttu-id="8fc38-142">Oggetti fortemente tipizzati, condivisi dal client e dal servizio, che rappresentano le operazioni del servizio e gli elementi dati per un messaggio.</span><span class="sxs-lookup"><span data-stu-id="8fc38-142">Strongly-typed objects, shared by the client and service, that represent the service operations and data elements for a message.</span></span>
- <span data-ttu-id="8fc38-143">Classe di base fortemente tipizzata con il plumbing di rete necessario che il servizio gRPC remoto può ereditare ed estendere.</span><span class="sxs-lookup"><span data-stu-id="8fc38-143">A strongly-typed base class with the required network plumbing that the remote gRPC service can inherit and extend.</span></span>
- <span data-ttu-id="8fc38-144">Stub client che contiene il plumbing necessario per richiamare il servizio gRPC remoto.</span><span class="sxs-lookup"><span data-stu-id="8fc38-144">A client stub that contains the required plumbing to invoke the remote gRPC service.</span></span>

<span data-ttu-id="8fc38-145">In fase di esecuzione, ogni messaggio viene serializzato come rappresentazione protobuf standard ed è scambiato tra il client e il servizio remoto.</span><span class="sxs-lookup"><span data-stu-id="8fc38-145">At runtime, each message is serialized as a standard Protobuf representation and exchanged between the client and remote service.</span></span> <span data-ttu-id="8fc38-146">Diversamente da JSON o XML, i messaggi protobuf vengono serializzati come byte binari compilati.</span><span class="sxs-lookup"><span data-stu-id="8fc38-146">Unlike JSON or XML, Protobuf messages are serialized as compiled binary bytes.</span></span>

<span data-ttu-id="8fc38-147">Il libro [gRPC per sviluppatori WCF](https://docs.microsoft.com/dotnet/architecture/grpc-for-wcf-developers/), disponibile nel sito dell'architettura Microsoft, fornisce una copertura approfondita dei buffer di gRPC e del protocollo.</span><span class="sxs-lookup"><span data-stu-id="8fc38-147">The book, [gRPC for WCF Developers](https://docs.microsoft.com/dotnet/architecture/grpc-for-wcf-developers/), available from the Microsoft Architecture site, provides in-depth coverage of gRPC and Protocol Buffers.</span></span>

## <a name="grpc-support-in-net"></a><span data-ttu-id="8fc38-148">supporto di gRPC in .NET</span><span class="sxs-lookup"><span data-stu-id="8fc38-148">gRPC support in .NET</span></span>

<span data-ttu-id="8fc38-149">gRPC è integrato in .NET Core 3,0 SDK e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="8fc38-149">gRPC is integrated into .NET Core 3.0 SDK and later.</span></span> <span data-ttu-id="8fc38-150">Gli strumenti seguenti lo supportano:</span><span class="sxs-lookup"><span data-stu-id="8fc38-150">The following tools support it:</span></span>

- <span data-ttu-id="8fc38-151">Visual Studio 2019, versione 16,3 o successiva, con il carico di lavoro sviluppo Web installato.</span><span class="sxs-lookup"><span data-stu-id="8fc38-151">Visual Studio 2019, version 16.3 or later, with the web development workload installed.</span></span>
- <span data-ttu-id="8fc38-152">Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="8fc38-152">Visual Studio Code</span></span>
- <span data-ttu-id="8fc38-153">INTERFACCIA della riga di comando DotNet</span><span class="sxs-lookup"><span data-stu-id="8fc38-153">the dotnet CLI</span></span>

<span data-ttu-id="8fc38-154">L'SDK include strumenti per il routing degli endpoint, IoC incorporato e la registrazione.</span><span class="sxs-lookup"><span data-stu-id="8fc38-154">The SDK includes tooling for endpoint routing, built-in IoC, and logging.</span></span> <span data-ttu-id="8fc38-155">Il server Web gheppio open source supporta le connessioni HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="8fc38-155">The open-source Kestrel web server supports HTTP/2 connections.</span></span> <span data-ttu-id="8fc38-156">La figura 4-20 Mostra un modello di Visual Studio 2019 che include un progetto Skeleton per un servizio gRPC.</span><span class="sxs-lookup"><span data-stu-id="8fc38-156">Figure 4-20 shows a Visual Studio 2019 template that scaffolds a skeleton project for a gRPC service.</span></span> <span data-ttu-id="8fc38-157">Si noti che .NET Core supporta completamente Windows, Linux e macOS.</span><span class="sxs-lookup"><span data-stu-id="8fc38-157">Note how .NET Core fully supports Windows, Linux, and macOS.</span></span>

![Supporto di gRPC in Visual Studio 2019](./media/visual-studio-2019-grpc-template.png)

<span data-ttu-id="8fc38-159">**Figura 4-20**.</span><span class="sxs-lookup"><span data-stu-id="8fc38-159">**Figure 4-20**.</span></span> <span data-ttu-id="8fc38-160">supporto di gRPC in Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="8fc38-160">gRPC support in Visual Studio 2019</span></span>
  
<span data-ttu-id="8fc38-161">La figura 4-21 illustra il servizio Skeleton gRPC generato dall'impalcatura incorporata inclusa in Visual Studio 2019.</span><span class="sxs-lookup"><span data-stu-id="8fc38-161">Figure 4-21 shows the skeleton gRPC service generated from the built-in scaffolding included in Visual Studio 2019.</span></span>  

![progetto gRPC in Visual Studio 2019](./media/grpc-project.png  )

<span data-ttu-id="8fc38-163">**Figura 4-21**.</span><span class="sxs-lookup"><span data-stu-id="8fc38-163">**Figure 4-21**.</span></span> <span data-ttu-id="8fc38-164">progetto gRPC in Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="8fc38-164">gRPC project in Visual Studio 2019</span></span>

<span data-ttu-id="8fc38-165">Nella figura precedente si noti il file di descrizione proto e il codice del servizio.</span><span class="sxs-lookup"><span data-stu-id="8fc38-165">In the previous figure, note the proto description file and service code.</span></span> <span data-ttu-id="8fc38-166">Come si vedrà a breve, Visual Studio genera una configurazione aggiuntiva sia nella classe di avvio che nel file di progetto sottostante.</span><span class="sxs-lookup"><span data-stu-id="8fc38-166">As you'll see shortly, Visual Studio generates additional configuration in both the Startup class and underlying project file.</span></span>

## <a name="grpc-usage"></a><span data-ttu-id="8fc38-167">utilizzo di gRPC</span><span class="sxs-lookup"><span data-stu-id="8fc38-167">gRPC usage</span></span>

<span data-ttu-id="8fc38-168">Preferire gRPC per gli scenari seguenti:</span><span class="sxs-lookup"><span data-stu-id="8fc38-168">Favor gRPC for the following scenarios:</span></span>

- <span data-ttu-id="8fc38-169">Comunicazione da microservizi back-end sincrona a microservizi in cui è necessaria una risposta immediata per continuare l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="8fc38-169">Synchronous backend microservice-to-microservice communication where an immediate response is required to continue processing.</span></span>
- <span data-ttu-id="8fc38-170">Ambienti poliglotti che devono supportare piattaforme di programmazione miste.</span><span class="sxs-lookup"><span data-stu-id="8fc38-170">Polyglot environments that need to support mixed programming platforms.</span></span>
- <span data-ttu-id="8fc38-171">Comunicazione con bassa latenza e velocità effettiva elevata in cui le prestazioni sono critiche.</span><span class="sxs-lookup"><span data-stu-id="8fc38-171">Low latency and high throughput communication where performance is critical.</span></span>
- <span data-ttu-id="8fc38-172">Comunicazione in tempo reale da punto a punto: gRPC è in grado di eseguire il push dei messaggi in tempo reale senza polling e offre un supporto eccellente per lo streaming bidirezionale.</span><span class="sxs-lookup"><span data-stu-id="8fc38-172">Point-to-point real-time communication - gRPC can push messages in real time without polling and has excellent support for bi-directional streaming.</span></span>
- <span data-ttu-id="8fc38-173">Ambienti vincolati alla rete: i messaggi gRPC binari sono sempre più piccoli di un messaggio JSON equivalente basato su testo.</span><span class="sxs-lookup"><span data-stu-id="8fc38-173">Network constrained environments – binary gRPC messages are always smaller than an equivalent text-based JSON message.</span></span>

<span data-ttu-id="8fc38-174">Al momento, in questo articolo, gRPC viene usato principalmente con i servizi back-end.</span><span class="sxs-lookup"><span data-stu-id="8fc38-174">At the time, of this writing, gRPC is primarily used with backend services.</span></span> <span data-ttu-id="8fc38-175">La maggior parte dei browser moderni non è in grado di fornire il livello di controllo HTTP/2 richiesto per supportare un client gRPC front-end.</span><span class="sxs-lookup"><span data-stu-id="8fc38-175">Most modern browsers can't provide the level of HTTP/2 control required to support a front-end gRPC client.</span></span> <span data-ttu-id="8fc38-176">Ciò premesso, esiste un' [iniziativa](https://devblogs.microsoft.com/aspnet/grpc-web-experiment/) che consente la comunicazione gRPC dalle app basate su browser compilate con le tecnologie JavaScript o blazer webassembly.</span><span class="sxs-lookup"><span data-stu-id="8fc38-176">That said, there's an [early initiative](https://devblogs.microsoft.com/aspnet/grpc-web-experiment/) that enables gRPC communication from browser-based apps built with JavaScript or Blazor WebAssembly technologies.</span></span> <span data-ttu-id="8fc38-177">[GRPC-Web per .NET](https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md) consente a un ASP.NET Core app gRPC di supportare le funzionalità di gRPC nelle app del browser:</span><span class="sxs-lookup"><span data-stu-id="8fc38-177">The  [gRPC-Web for .NET](https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md) enables an ASP.NET Core gRPC app to support gRPC features in browser apps:</span></span>

- <span data-ttu-id="8fc38-178">Client fortemente tipizzati generati dal codice</span><span class="sxs-lookup"><span data-stu-id="8fc38-178">Strongly-typed code-generated clients</span></span>
- <span data-ttu-id="8fc38-179">Compatta messaggi protobuf</span><span class="sxs-lookup"><span data-stu-id="8fc38-179">Compact Protobuf messages</span></span>
- <span data-ttu-id="8fc38-180">Streaming Server</span><span class="sxs-lookup"><span data-stu-id="8fc38-180">Server streaming</span></span>

## <a name="grpc-implementation"></a><span data-ttu-id="8fc38-181">implementazione di gRPC</span><span class="sxs-lookup"><span data-stu-id="8fc38-181">gRPC implementation</span></span>

<span data-ttu-id="8fc38-182">L'architettura di riferimento del microservizio, [eShop sui contenitori](https://github.com/dotnet-architecture/eShopOnContainers), di Microsoft, illustra come implementare i servizi gRPC nelle applicazioni .NET Core.</span><span class="sxs-lookup"><span data-stu-id="8fc38-182">The microservice reference architecture, [eShop on Containers](https://github.com/dotnet-architecture/eShopOnContainers), from Microsoft, shows how to implement gRPC services in .NET Core applications.</span></span> <span data-ttu-id="8fc38-183">La figura 4-22 presenta l'architettura back-end.</span><span class="sxs-lookup"><span data-stu-id="8fc38-183">Figure 4-22 presents the back-end architecture.</span></span>

![Architettura back-end per eShop nei contenitori](./media/eshop-with-aggregators.png)

<span data-ttu-id="8fc38-185">**Figura 4-22**.</span><span class="sxs-lookup"><span data-stu-id="8fc38-185">**Figure 4-22**.</span></span> <span data-ttu-id="8fc38-186">Architettura back-end per eShop nei contenitori</span><span class="sxs-lookup"><span data-stu-id="8fc38-186">Backend architecture for eShop on Containers</span></span>

<span data-ttu-id="8fc38-187">Nella figura precedente si noti il modo in cui eShop accetta il [back-end per il modello](https://docs.microsoft.com/azure/architecture/patterns/backends-for-frontends) front-end (BFF) esponendo più gateway API.</span><span class="sxs-lookup"><span data-stu-id="8fc38-187">In the previous figure, note how eShop embraces the [Backend for Frontends pattern](https://docs.microsoft.com/azure/architecture/patterns/backends-for-frontends) (BFF) by exposing multiple API gateways.</span></span> <span data-ttu-id="8fc38-188">Il modello BFF è stato discusso più indietro in questo capitolo.</span><span class="sxs-lookup"><span data-stu-id="8fc38-188">We discussed the BFF pattern earlier in this chapter.</span></span> <span data-ttu-id="8fc38-189">Prestare particolare attenzione al microservizio Aggregator (in grigio) che risiede tra il gateway dell'API di acquisti Web e i microservizi di acquisti back-end.</span><span class="sxs-lookup"><span data-stu-id="8fc38-189">Pay close attention to the Aggregator microservice (in gray) that sits between the Web-Shopping API Gateway and backend Shopping microservices.</span></span> <span data-ttu-id="8fc38-190">L'aggregatore riceve una singola richiesta da un client, la invia a diversi microservizi, aggrega i risultati e li invia al client richiedente.</span><span class="sxs-lookup"><span data-stu-id="8fc38-190">The Aggregator receives a single request from a client, dispatches it to various microservices, aggregates the results, and sends them back to the requesting client.</span></span> <span data-ttu-id="8fc38-191">Queste operazioni richiedono in genere la comunicazione sincrona per produrre una risposta immediata.</span><span class="sxs-lookup"><span data-stu-id="8fc38-191">Such operations typically require synchronous communication as to produce an immediate response.</span></span> <span data-ttu-id="8fc38-192">In eShop le chiamate back-end di aggregator vengono eseguite usando gRPC, come illustrato nella figura 4-23.</span><span class="sxs-lookup"><span data-stu-id="8fc38-192">In eShop, backend calls from the Aggregator are performed using gRPC as shown in Figure 4-23.</span></span>

![gRPC in eShop nei contenitori](./media/grpc-implementation.png)

<span data-ttu-id="8fc38-194">**Figura 4-23**.</span><span class="sxs-lookup"><span data-stu-id="8fc38-194">**Figure 4-23**.</span></span> <span data-ttu-id="8fc38-195">gRPC in eShop nei contenitori</span><span class="sxs-lookup"><span data-stu-id="8fc38-195">gRPC in eShop on Containers</span></span>

<span data-ttu-id="8fc38-196">la comunicazione gRPC richiede componenti client e server.</span><span class="sxs-lookup"><span data-stu-id="8fc38-196">gRPC communication requires both client and server components.</span></span> <span data-ttu-id="8fc38-197">Nella figura precedente si noti il modo in cui l'aggregatore di acquisti implementa un client gRPC.</span><span class="sxs-lookup"><span data-stu-id="8fc38-197">In the previous figure, note how the Shopping Aggregator implements a gRPC client.</span></span> <span data-ttu-id="8fc38-198">Il client esegue chiamate gRPC sincrone (in rosso) a microservizi back-end, ognuno dei quali implementa un server gRPC.</span><span class="sxs-lookup"><span data-stu-id="8fc38-198">The client makes synchronous gRPC calls (in red) to backend microservices, each of which implement a gRPC server.</span></span> <span data-ttu-id="8fc38-199">Sia il client che il server sfruttano il plumbing gRPC incorporato dalla .NET Core SDK.</span><span class="sxs-lookup"><span data-stu-id="8fc38-199">Both the client and server take advantage of the built-in gRPC plumbing from the .NET Core SDK.</span></span> <span data-ttu-id="8fc38-200">Gli *Stub* lato client forniscono il plumbing per richiamare chiamate gRPC remote.</span><span class="sxs-lookup"><span data-stu-id="8fc38-200">Client-side *stubs* provide the plumbing to invoke remote gRPC calls.</span></span> <span data-ttu-id="8fc38-201">I componenti lato server forniscono il plumbing gRPC che le classi di servizio personalizzate possono ereditare e utilizzare.</span><span class="sxs-lookup"><span data-stu-id="8fc38-201">Server-side components provide gRPC plumbing that custom service classes can inherit and consume.</span></span>

<span data-ttu-id="8fc38-202">I microservizi che espongono sia un'API RESTful che la comunicazione gRPC richiedono più endpoint per gestire il traffico.</span><span class="sxs-lookup"><span data-stu-id="8fc38-202">Microservices that expose both a RESTful API and gRPC communication require multiple endpoints to manage traffic.</span></span> <span data-ttu-id="8fc38-203">Si apre un endpoint che ascolta il traffico HTTP per le chiamate RESTful e un altro per le chiamate gRPC.</span><span class="sxs-lookup"><span data-stu-id="8fc38-203">You would open an endpoint that listens for HTTP traffic for the RESTful calls and another for gRPC calls.</span></span> <span data-ttu-id="8fc38-204">L'endpoint gRPC deve essere configurato per il protocollo HTTP/2 richiesto per la comunicazione gRPC.</span><span class="sxs-lookup"><span data-stu-id="8fc38-204">The gRPC endpoint must be configured for the HTTP/2 protocol that is required for gRPC communication.</span></span>

<span data-ttu-id="8fc38-205">Sebbene si sforzi per separare i microservizi con i modelli di comunicazione asincrona, alcune operazioni richiedono chiamate dirette.</span><span class="sxs-lookup"><span data-stu-id="8fc38-205">While we strive to decouple microservices with asynchronous communication patterns, some operations require direct calls.</span></span> <span data-ttu-id="8fc38-206">gRPC deve essere la scelta principale per la comunicazione sincrona diretta tra microservizi.</span><span class="sxs-lookup"><span data-stu-id="8fc38-206">gRPC should be the primary choice for direct synchronous communication between microservices.</span></span> <span data-ttu-id="8fc38-207">Il protocollo di comunicazione ad alte prestazioni, basato su HTTP/2 e i buffer del protocollo, lo rende una scelta perfetta.</span><span class="sxs-lookup"><span data-stu-id="8fc38-207">Its high-performance communication protocol, based on HTTP/2 and protocol buffers, make it a perfect choice.</span></span>

## <a name="looking-ahead"></a><span data-ttu-id="8fc38-208">Ricerca avanti</span><span class="sxs-lookup"><span data-stu-id="8fc38-208">Looking ahead</span></span>

<span data-ttu-id="8fc38-209">In futuro, gRPC continuerà a ottenere la trazione per i sistemi nativi del cloud.</span><span class="sxs-lookup"><span data-stu-id="8fc38-209">Looking ahead, gRPC will continue to gain traction for cloud-native systems.</span></span> <span data-ttu-id="8fc38-210">I vantaggi delle prestazioni e la facilità di sviluppo sono molto interessanti.</span><span class="sxs-lookup"><span data-stu-id="8fc38-210">The performance benefits and ease of development are compelling.</span></span> <span data-ttu-id="8fc38-211">REST, tuttavia, sarà probabilmente da molto tempo.</span><span class="sxs-lookup"><span data-stu-id="8fc38-211">However, REST will likely be around for a long time.</span></span> <span data-ttu-id="8fc38-212">Eccelle per le API esposte pubblicamente e per motivi di compatibilità con le versioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="8fc38-212">It excels for publicly exposed APIs and for backward compatibility reasons.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="8fc38-213">[Precedente](service-to-service-communication.md) 
> [Avanti](service-mesh-communication-infrastructure.md)</span><span class="sxs-lookup"><span data-stu-id="8fc38-213">[Previous](service-to-service-communication.md)
[Next](service-mesh-communication-infrastructure.md)</span></span>
