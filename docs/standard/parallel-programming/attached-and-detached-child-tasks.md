---
title: Attività figlio connesse e disconnesse
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- tasks, child tasks
ms.assetid: c95788bf-90a6-4e96-b7bc-58e36a228cc5
ms.openlocfilehash: 8f15ee4f136e3e2df1a4e1c7683467f2a4bc9bc0
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/15/2020
ms.locfileid: "73123191"
---
# <a name="attached-and-detached-child-tasks"></a><span data-ttu-id="994cb-102">Attività figlio connesse e disconnesse</span><span class="sxs-lookup"><span data-stu-id="994cb-102">Attached and Detached Child Tasks</span></span>
<span data-ttu-id="994cb-103">Un'*attività figlio* (o *attività annidata*) è un'istanza <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> creata nel delegato dell'utente di un'altra attività, noto come *attività padre*.</span><span class="sxs-lookup"><span data-stu-id="994cb-103">A *child task* (or *nested task*) is a <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> instance that is created in the user delegate of another task, which is known as the *parent task*.</span></span> <span data-ttu-id="994cb-104">Un'attività figlio può essere scollegata o collegata.</span><span class="sxs-lookup"><span data-stu-id="994cb-104">A child task can be either detached or attached.</span></span> <span data-ttu-id="994cb-105">Un'*attività figlio scollegata* è un'attività eseguita indipendentemente dall'attività padre.</span><span class="sxs-lookup"><span data-stu-id="994cb-105">A *detached child task* is a task that executes independently of its parent.</span></span> <span data-ttu-id="994cb-106">Un'*attività figlio collegata* è un'attività annidata creata con l'opzione <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> alla quale l'attività padre non impedisce il collegamento in modo esplicito o per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="994cb-106">An *attached child task* is a nested task that is created with the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option whose parent does not explicitly or by default prohibit it from being attached.</span></span> <span data-ttu-id="994cb-107">Un'attività può creare un numero qualsiasi di attività figlio collegate e scollegate, limitato solo dalle risorse di sistema.</span><span class="sxs-lookup"><span data-stu-id="994cb-107">A task may create any number of attached and detached child tasks, limited only by system resources.</span></span>  
  
 <span data-ttu-id="994cb-108">La tabella seguente elenca le differenze di base tra i due tipi di attività figlio.</span><span class="sxs-lookup"><span data-stu-id="994cb-108">The following table lists the basic differences between the two kinds of child tasks.</span></span>  
  
|<span data-ttu-id="994cb-109">Category</span><span class="sxs-lookup"><span data-stu-id="994cb-109">Category</span></span>|<span data-ttu-id="994cb-110">Attività figlio scollegate</span><span class="sxs-lookup"><span data-stu-id="994cb-110">Detached child tasks</span></span>|<span data-ttu-id="994cb-111">Attività figlio collegate</span><span class="sxs-lookup"><span data-stu-id="994cb-111">Attached child tasks</span></span>|  
|--------------|--------------------------|--------------------------|  
|<span data-ttu-id="994cb-112">L'attività padre attende il completamento delle attività figlio.</span><span class="sxs-lookup"><span data-stu-id="994cb-112">Parent waits for child tasks to complete.</span></span>|<span data-ttu-id="994cb-113">No</span><span class="sxs-lookup"><span data-stu-id="994cb-113">No</span></span>|<span data-ttu-id="994cb-114">Sì</span><span class="sxs-lookup"><span data-stu-id="994cb-114">Yes</span></span>|  
|<span data-ttu-id="994cb-115">L'attività padre propaga le eccezioni generate dalle attività figlio.</span><span class="sxs-lookup"><span data-stu-id="994cb-115">Parent propagates exceptions thrown by child tasks.</span></span>|<span data-ttu-id="994cb-116">No</span><span class="sxs-lookup"><span data-stu-id="994cb-116">No</span></span>|<span data-ttu-id="994cb-117">Sì</span><span class="sxs-lookup"><span data-stu-id="994cb-117">Yes</span></span>|  
|<span data-ttu-id="994cb-118">Lo stato dell'attività padre dipende dallo stato dell'attività figlio.</span><span class="sxs-lookup"><span data-stu-id="994cb-118">Status of parent depends on status of child.</span></span>|<span data-ttu-id="994cb-119">No</span><span class="sxs-lookup"><span data-stu-id="994cb-119">No</span></span>|<span data-ttu-id="994cb-120">Sì</span><span class="sxs-lookup"><span data-stu-id="994cb-120">Yes</span></span>|  
  
 <span data-ttu-id="994cb-121">Nella maggior parte degli scenari, è consigliabile usare l'attività figlio scollegata perché le relazioni con altre attività risultano meno complesse.</span><span class="sxs-lookup"><span data-stu-id="994cb-121">In most scenarios, we recommend that you use detached child tasks, because their relationships with other tasks are less complex.</span></span> <span data-ttu-id="994cb-122">Per questo motivo le attività create all'interno delle attività padre sono di tipo scollegato per impostazione predefinita ed è necessario specificare esplicitamente l'opzione <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> per creare un'attività figlio collegata.</span><span class="sxs-lookup"><span data-stu-id="994cb-122">That is why tasks created inside parent tasks are detached by default, and you must explicitly specify the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option to create an attached child task.</span></span>  
  
## <a name="detached-child-tasks"></a><span data-ttu-id="994cb-123">Attività figlio scollegate</span><span class="sxs-lookup"><span data-stu-id="994cb-123">Detached child tasks</span></span>  
 <span data-ttu-id="994cb-124">Anche se un'attività figlio viene creata da un'attività padre, per impostazione predefinita è indipendente dell'attività padre.</span><span class="sxs-lookup"><span data-stu-id="994cb-124">Although a child task is created by a parent task, by default it is independent of the parent task.</span></span> <span data-ttu-id="994cb-125">Nell'esempio seguente, un'attività padre crea un'attività figlio semplice.</span><span class="sxs-lookup"><span data-stu-id="994cb-125">In the following example, a parent task creates one simple child task.</span></span> <span data-ttu-id="994cb-126">Se si esegue più volte il codice di esempio, è possibile notare che l'output dell'esempio è diverso da quello indicato e potrebbe cambiare ogni volta che si esegue il codice.</span><span class="sxs-lookup"><span data-stu-id="994cb-126">If you run the example code multiple times, you may notice that the output from the example differs from that shown, and also that the output may change each time you run the code.</span></span> <span data-ttu-id="994cb-127">Il motivo è che l'attività padre e le attività figlio sono eseguite in modo indipendente; l'attività figlio è di tipo scollegato.</span><span class="sxs-lookup"><span data-stu-id="994cb-127">This occurs because the parent task and child tasks execute independently of each other; the child is a detached task.</span></span> <span data-ttu-id="994cb-128">Nell'esempio si attende solo il completamento dell'attività padre, mentre l'attività figlio potrebbe non essere eseguita o completata prima del termine dell'applicazione console.</span><span class="sxs-lookup"><span data-stu-id="994cb-128">The example waits only for the parent task to complete, and the child task may not execute or complete before the console app terminates.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/nested1.cs#1)]
 [!code-vb[TPL_ChildTasks#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/nested1.vb#1)]  
  
 <span data-ttu-id="994cb-129">Se l'attività figlio è rappresentata da un oggetto <xref:System.Threading.Tasks.Task%601> anziché da un oggetto <xref:System.Threading.Tasks.Task>, è possibile assicurarsi che l'attività padre attenda il completamento dell'attività figlio accedendo alla proprietà <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> dell'attività figlio anche è di tipo scollegato.</span><span class="sxs-lookup"><span data-stu-id="994cb-129">If the child task is represented by a <xref:System.Threading.Tasks.Task%601> object rather than a <xref:System.Threading.Tasks.Task> object, you can ensure that the parent task will wait for the child to complete by accessing the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property of the child even if it is a detached child task.</span></span> <span data-ttu-id="994cb-130">La proprietà <xref:System.Threading.Tasks.Task%601.Result%2A> viene bloccata fino al completamento dell'attività, come mostrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="994cb-130">The <xref:System.Threading.Tasks.Task%601.Result%2A> property blocks until its task completes, as the following example shows.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/childtasks.cs#4)]
 [!code-vb[TPL_ChildTasks#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/tpl_childtasks.vb#4)]  
  
## <a name="attached-child-tasks"></a><span data-ttu-id="994cb-131">Attività figlio collegate</span><span class="sxs-lookup"><span data-stu-id="994cb-131">Attached child tasks</span></span>  
 <span data-ttu-id="994cb-132">A differenza delle attività figlio scollegate, le attività figlio collegate sono strettamente sincronizzate con l'attività padre.</span><span class="sxs-lookup"><span data-stu-id="994cb-132">Unlike detached child tasks, attached child tasks are closely synchronized with the parent.</span></span> <span data-ttu-id="994cb-133">È possibile modificare il tipo dell'attività figlio da scollegato a collegato usando l'opzione <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> nell'istruzione di creazione dell'attività, come mostrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="994cb-133">You can change the detached child task in the previous example to an attached child task by using the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option in the task creation statement, as shown in the following example.</span></span> <span data-ttu-id="994cb-134">In questo codice, l'attività figlio collegata viene completata prima dell'attività padre.</span><span class="sxs-lookup"><span data-stu-id="994cb-134">In this code, the attached child task completes before its parent.</span></span> <span data-ttu-id="994cb-135">Di conseguenza, l'output dell'esempio è lo stesso per ogni esecuzione del codice.</span><span class="sxs-lookup"><span data-stu-id="994cb-135">As a result, the output from the example is the same each time you run the code.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/child1.cs#2)]
 [!code-vb[TPL_ChildTasks#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/child1.vb#2)]  
  
 <span data-ttu-id="994cb-136">Per creare grafici strettamente sincronizzati di operazioni asincrone, è possibile usare le attività figlio collegate.</span><span class="sxs-lookup"><span data-stu-id="994cb-136">You can use attached child tasks to create tightly synchronized graphs of asynchronous operations.</span></span>  
  
 <span data-ttu-id="994cb-137">Tuttavia, un'attività figlio può collegarsi all'attività padre solo se quest'ultimo consente le attività figlio collegate.</span><span class="sxs-lookup"><span data-stu-id="994cb-137">However, a child task can attach to its parent only if its parent does not prohibit attached child tasks.</span></span> <span data-ttu-id="994cb-138">Le attività padre possono impedire in modo esplicito il collegamento di attività figlio specificando l'opzione <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> nel costruttore della classe dell'attività padre o il metodo <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="994cb-138">Parent tasks can explicitly prevent child tasks from attaching to them by specifying the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option in the parent task's class constructor or the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="994cb-139">Le attività padre possono impedire in modo implicito il collegamento di attività figlio se sono state create chiamando il metodo <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="994cb-139">Parent tasks implicitly prevent child tasks from attaching to them if they are created by calling the <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="994cb-140">Questa condizione è illustrata nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="994cb-140">The following example illustrates this.</span></span> <span data-ttu-id="994cb-141">L'esempio è uguale a quello precedente, ma in questo caso l'attività padre viene creata chiamando il metodo <xref:System.Threading.Tasks.Task.Run%28System.Action%29?displayProperty=nameWithType> anziché il metodo <xref:System.Threading.Tasks.TaskFactory.StartNew%28System.Action%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="994cb-141">It is identical to the previous example, except that the parent task is created by calling the <xref:System.Threading.Tasks.Task.Run%28System.Action%29?displayProperty=nameWithType> method rather than the <xref:System.Threading.Tasks.TaskFactory.StartNew%28System.Action%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="994cb-142">Poiché l'attività figlio non è in grado di collegarsi all'attività padre, l'output dell'esempio è imprevedibile.</span><span class="sxs-lookup"><span data-stu-id="994cb-142">Because the child task is not able to attach to its parent, the output from the example is unpredictable.</span></span> <span data-ttu-id="994cb-143">Poiché le opzioni di creazione dell'attività predefinite per gli overload <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> includono <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>, questo esempio è funzionalmente equivalente al primo esempio nella sezione "Attività figlio scollegate".</span><span class="sxs-lookup"><span data-stu-id="994cb-143">Because the default task creation options for the <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> overloads include <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>, this example is functionally equivalent to the first example in the "Detached child tasks" section.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/child1a.cs#3)]
 [!code-vb[TPL_ChildTasks#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/child1a.vb#3)]  
  
## <a name="exceptions-in-child-tasks"></a><span data-ttu-id="994cb-144">Eccezioni nelle attività figlio</span><span class="sxs-lookup"><span data-stu-id="994cb-144">Exceptions in child tasks</span></span>  
 <span data-ttu-id="994cb-145">Se un'attività figlio scollegata genera un'eccezione, l'eccezione deve essere osservata o gestita direttamente nell'attività padre come accade nel caso di qualsiasi attività non annidata.</span><span class="sxs-lookup"><span data-stu-id="994cb-145">If a detached child task throws an exception, that exception must be observed or handled directly in the parent task just as with any non-nested task.</span></span> <span data-ttu-id="994cb-146">Se un'attività figlio collegata genera un'eccezione, l'eccezione viene propagata automaticamente all'attività padre e al thread che rimane in attesa o tenta di accedere alla proprietà <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> dell'attività.</span><span class="sxs-lookup"><span data-stu-id="994cb-146">If an attached child task throws an exception, the exception is automatically propagated to the parent task and back to the thread that waits or tries to access the task's <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="994cb-147">Quindi, usando le attività figlio collegate è possibile gestire tutte le eccezioni in un solo punto della chiamata a <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> nel thread chiamante.</span><span class="sxs-lookup"><span data-stu-id="994cb-147">Therefore, by using attached child tasks, you can handle all exceptions at just one point in the call to <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> on the calling thread.</span></span> <span data-ttu-id="994cb-148">Per altre informazioni, vedere [Gestione delle eccezioni](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="994cb-148">For more information, see [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span></span>  
  
## <a name="cancellation-and-child-tasks"></a><span data-ttu-id="994cb-149">Annullamento e attività figlio</span><span class="sxs-lookup"><span data-stu-id="994cb-149">Cancellation and child tasks</span></span>  
 <span data-ttu-id="994cb-150">L'annullamento delle attività è cooperativo,</span><span class="sxs-lookup"><span data-stu-id="994cb-150">Task cancellation is cooperative.</span></span> <span data-ttu-id="994cb-151">ossia, per essere annullabile, ogni attività figlio collegata o scollegata deve monitorare lo stato del token di annullamento.</span><span class="sxs-lookup"><span data-stu-id="994cb-151">That is, to be cancelable, every attached or detached child task must monitor the status of the cancellation token.</span></span> <span data-ttu-id="994cb-152">Per annullare un'attività padre e le relative attività figlio usando un'unica richiesta, è necessario passare lo stesso token come argomento a tutte le attività e fornire la logica di risposta alla richiesta in ogni attività.</span><span class="sxs-lookup"><span data-stu-id="994cb-152">If you want to cancel a parent and all its children by using one cancellation request, you pass the same token as an argument to all tasks and provide in each task the logic to respond to the request in each task.</span></span> <span data-ttu-id="994cb-153">Per altre informazioni, vedere [Annullamento delle attività](../../../docs/standard/parallel-programming/task-cancellation.md) e [Procedura: Annullare un'attività e i relativi figli](../../../docs/standard/parallel-programming/how-to-cancel-a-task-and-its-children.md).</span><span class="sxs-lookup"><span data-stu-id="994cb-153">For more information, see [Task Cancellation](../../../docs/standard/parallel-programming/task-cancellation.md) and [How to: Cancel a Task and Its Children](../../../docs/standard/parallel-programming/how-to-cancel-a-task-and-its-children.md).</span></span>  
  
### <a name="when-the-parent-cancels"></a><span data-ttu-id="994cb-154">Annullamento dell'attività padre</span><span class="sxs-lookup"><span data-stu-id="994cb-154">When the parent cancels</span></span>  
 <span data-ttu-id="994cb-155">Se un'attività padre annulla se stessa prima dell'avvio dell'attività figlio, quest'ultima non viene avviata.</span><span class="sxs-lookup"><span data-stu-id="994cb-155">If a parent cancels itself before its child task is started, the child never starts.</span></span> <span data-ttu-id="994cb-156">Se un'attività padre annulla se stessa dopo l'avvio dell'attività figlio, quest'ultima viene completata a meno che non abbia una propria logica di annullamento.</span><span class="sxs-lookup"><span data-stu-id="994cb-156">If a parent cancels itself after its child task has already started, the child runs to completion unless it has its own cancellation logic.</span></span> <span data-ttu-id="994cb-157">Per altre informazioni, vedere [Task Cancellation](../../../docs/standard/parallel-programming/task-cancellation.md).</span><span class="sxs-lookup"><span data-stu-id="994cb-157">For more information, see [Task Cancellation](../../../docs/standard/parallel-programming/task-cancellation.md).</span></span>  
  
### <a name="when-a-detached-child-task-cancels"></a><span data-ttu-id="994cb-158">Annullamento di un'attività figlio scollegata</span><span class="sxs-lookup"><span data-stu-id="994cb-158">When a detached child task cancels</span></span>  
 <span data-ttu-id="994cb-159">Se un'attività figlio scollegata annulla se stessa usando lo stesso token passato all'attività padre e quest'ultima non attende l'attività figlio, non viene propagata alcuna eccezione poiché l'eccezione viene considerata come un annullamento cooperativo sicuro.</span><span class="sxs-lookup"><span data-stu-id="994cb-159">If a detached child task cancels itself by using the same token that was passed to the parent, and the parent does not wait for the child task, no exception is propagated, because the exception is treated as benign cooperation cancellation.</span></span> <span data-ttu-id="994cb-160">Questo comportamento è uguale a quello di qualsiasi attività di primo livello.</span><span class="sxs-lookup"><span data-stu-id="994cb-160">This behavior is the same as that of any top-level task.</span></span>  
  
### <a name="when-an-attached-child-task-cancels"></a><span data-ttu-id="994cb-161">Annullamento di un'attività figlio collegata</span><span class="sxs-lookup"><span data-stu-id="994cb-161">When an attached child task cancels</span></span>  
 <span data-ttu-id="994cb-162">Quando un'attività figlio collegata annulla se stessa usando lo stesso token passato all'attività padre, <xref:System.Threading.Tasks.TaskCanceledException> viene propagato al thread di unione all'interno di <xref:System.AggregateException>.</span><span class="sxs-lookup"><span data-stu-id="994cb-162">When an attached child task cancels itself by using the same token that was passed to its parent task, a <xref:System.Threading.Tasks.TaskCanceledException> is propagated to the joining thread inside an <xref:System.AggregateException>.</span></span> <span data-ttu-id="994cb-163">È necessario attendere l'attività padre in modo che sia possibile gestire tutte le eccezioni sicure oltre a tutte le eccezioni di errore propagate tramite un grafico di attività figlio collegate.</span><span class="sxs-lookup"><span data-stu-id="994cb-163">You must wait for the parent task so that you can handle all benign exceptions in addition to all faulting exceptions that are propagated up through a graph of attached child tasks.</span></span>  
  
 <span data-ttu-id="994cb-164">Per altre informazioni, vedere [Gestione delle eccezioni](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="994cb-164">For more information, see [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span></span>  
  
## <a name="preventing-a-child-task-from-attaching-to-its-parent"></a><span data-ttu-id="994cb-165">Impedire il collegamento di un'attività figlio all'attività padre</span><span class="sxs-lookup"><span data-stu-id="994cb-165">Preventing a child task from attaching to its parent</span></span>  
 <span data-ttu-id="994cb-166">Un'eccezione non gestita generata da un'attività figlio viene propagata all'attività padre.</span><span class="sxs-lookup"><span data-stu-id="994cb-166">An unhandled exception that is thrown by a child task is propagated to the parent task.</span></span> <span data-ttu-id="994cb-167">È possibile usare questo comportamento per osservare tutte le eccezioni dell'attività figlio da un'attività radice invece di passare per un albero delle attività.</span><span class="sxs-lookup"><span data-stu-id="994cb-167">You can use this behavior to observe all child task exceptions from one root task instead of traversing a tree of tasks.</span></span> <span data-ttu-id="994cb-168">Tuttavia, la propagazione delle eccezioni può essere problematica quando un'attività padre non prevede un allegato da altro codice.</span><span class="sxs-lookup"><span data-stu-id="994cb-168">However, exception propagation can be problematic when a parent task does not expect attachment from other code.</span></span> <span data-ttu-id="994cb-169">Si consideri ad esempio un'applicazione che chiama un componente della libreria di terze parti da un oggetto <xref:System.Threading.Tasks.Task>.</span><span class="sxs-lookup"><span data-stu-id="994cb-169">For example, consider an app that calls a third-party library component from a <xref:System.Threading.Tasks.Task> object.</span></span> <span data-ttu-id="994cb-170">Se il componente della libreria di terze parti crea anche un oggetto <xref:System.Threading.Tasks.Task> e specifica <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> per collegarlo all'attività padre, le eventuali eccezioni non gestite che si verificano nell'attività figlio vengono propagate all'attività padre.</span><span class="sxs-lookup"><span data-stu-id="994cb-170">If the third-party library component also creates a <xref:System.Threading.Tasks.Task> object and specifies <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> to attach it to the parent task, any unhandled exceptions that occur in the child task propagate to the parent.</span></span> <span data-ttu-id="994cb-171">Questo potrebbe causare un comportamento imprevisto nell'applicazione principale.</span><span class="sxs-lookup"><span data-stu-id="994cb-171">This could lead to unexpected behavior in the main app.</span></span>  
  
 <span data-ttu-id="994cb-172">Per impedire il collegamento di un'attività figlio all'attività padre, specificare l'opzione <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> quando si crea l'attività padre <xref:System.Threading.Tasks.Task> o l'oggetto <xref:System.Threading.Tasks.Task%601>.</span><span class="sxs-lookup"><span data-stu-id="994cb-172">To prevent a child task from attaching to its parent task, specify the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option when you create the parent <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> object.</span></span> <span data-ttu-id="994cb-173">Quando un'attività tenta di connettersi all'attività padre che specifica l'opzione <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>, l'attività figlio non riuscirà a collegarsi a un'attività padre e verrà eseguita come se l'opzione <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> non fosse stata specificata.</span><span class="sxs-lookup"><span data-stu-id="994cb-173">When a task tries to attach to its parent and the parent specifies the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option, the child task will not be able to attach to a parent and will execute just as if the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option was not specified.</span></span>  
  
 <span data-ttu-id="994cb-174">Se l'attività figlio non viene completata in modo tempestivo, è anche possibile impedirne il collegamento all'attività padre.</span><span class="sxs-lookup"><span data-stu-id="994cb-174">You might also want to prevent a child task from attaching to its parent when the child task does not finish in a timely manner.</span></span> <span data-ttu-id="994cb-175">Poiché un'attività padre non viene completata fino al completamento di tutte le attività figlio, un'attività figlio a esecuzione prolungata può influire negativamente sulle prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="994cb-175">Because a parent task does not finish until all child tasks finish, a long-running child task can cause the overall app to perform poorly.</span></span> <span data-ttu-id="994cb-176">Per un esempio in cui viene spiegato come migliorare le prestazioni dell'applicazione impedendo il collegamento di un'attività all'attività padre, vedere [Procedura: Impedire il collegamento di un'attività figlio all'attività padre](../../../docs/standard/parallel-programming/how-to-prevent-a-child-task-from-attaching-to-its-parent.md).</span><span class="sxs-lookup"><span data-stu-id="994cb-176">For an example that shows how to improve app performance by preventing a task from attaching to its parent task, see [How to: Prevent a Child Task from Attaching to its Parent](../../../docs/standard/parallel-programming/how-to-prevent-a-child-task-from-attaching-to-its-parent.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="994cb-177">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="994cb-177">See also</span></span>

- [<span data-ttu-id="994cb-178">Programmazione parallela</span><span class="sxs-lookup"><span data-stu-id="994cb-178">Parallel Programming</span></span>](../../../docs/standard/parallel-programming/index.md)
- [<span data-ttu-id="994cb-179">Parallelismo dei dati</span><span class="sxs-lookup"><span data-stu-id="994cb-179">Data Parallelism</span></span>](../../../docs/standard/parallel-programming/data-parallelism-task-parallel-library.md)
