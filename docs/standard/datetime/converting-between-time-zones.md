---
title: Conversione degli orari tra fusi orari
ms.date: 04/10/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- times [.NET Framework], converting
- time zones [.NET Framework], conversions
- UTC times, converting
- converting times
- local time conversions
ms.assetid: a51e1a3b-c983-4320-b31a-1f9fa3cf824a
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 64b971e71019359cebc1493a410e748a1fd7b7cb
ms.sourcegitcommit: fe02afbc39e78afd78cc6050e4a9c12a75f579f8
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/30/2018
ms.locfileid: "43257344"
---
# <a name="converting-times-between-time-zones"></a><span data-ttu-id="c1ae1-102">Conversione degli orari tra fusi orari</span><span class="sxs-lookup"><span data-stu-id="c1ae1-102">Converting times between time zones</span></span>

<span data-ttu-id="c1ae1-103">La gestione delle differenze tra fusi orari sta divenendo sempre più importante per le applicazioni che usano date e ore.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-103">It is becoming increasingly important for any application that works with dates and times to handle differences between time zones.</span></span> <span data-ttu-id="c1ae1-104">Un'applicazione non è più possibile presupporre che tutte le volte in cui può essere espresso nell'ora locale, ovvero il tempo disponibile dal <xref:System.DateTime> struttura.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-104">An application can no longer assume that all times can be expressed in the local time, which is the time available from the <xref:System.DateTime> structure.</span></span> <span data-ttu-id="c1ae1-105">Ad esempio, una pagina Web che visualizza l'orario corrente della parte orientale degli Stati Uniti risulterà non attendibile per un cliente dell'Asia orientale.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-105">For example, a Web page that displays the current time in the eastern part of the United States will lack credibility to a customer in eastern Asia.</span></span> <span data-ttu-id="c1ae1-106">Questo argomento viene illustrato come convertire gli orari da un fuso orario a un altro, nonché come convertire <xref:System.DateTimeOffset> valori che dipendono dal fuso orario.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-106">This topic explains how to convert times from one time zone to another, as well as how to convert <xref:System.DateTimeOffset> values that have limited time zone awareness.</span></span>

## <a name="converting-to-coordinated-universal-time"></a><span data-ttu-id="c1ae1-107">Conversione nel formato UTC</span><span class="sxs-lookup"><span data-stu-id="c1ae1-107">Converting to Coordinated Universal Time</span></span>

<span data-ttu-id="c1ae1-108">UTC (Coordinated Universal Time) è uno standard di alta precisione basato sul tempo atomico.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-108">Coordinated Universal Time (UTC) is a high-precision, atomic time standard.</span></span> <span data-ttu-id="c1ae1-109">I fusi orari del mondo sono espressi come offset positivi o negativi dall'ora UTC.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-109">The world’s time zones are expressed as positive or negative offsets from UTC.</span></span> <span data-ttu-id="c1ae1-110">L'ora espressa in UTC è quindi indipendente dal fuso orario.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-110">Thus, UTC provides a kind of time-zone free or time-zone neutral time.</span></span> <span data-ttu-id="c1ae1-111">L'uso dell'ora UTC è consigliato quando la portabilità di data e ora tra i computer è importante.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-111">The use of UTC time is recommended when a date and time's portability across computers is important.</span></span> <span data-ttu-id="c1ae1-112">(Per informazioni dettagliate e altre procedure consigliate sull'utilizzo di date e ore, vedere [scrittura di codice le procedure consigliate tramite DateTime in .NET Framework](https://msdn.microsoft.com/library/ms973825.aspx).) La conversione di singoli fusi orari in ore UTC semplifica i confronti tra gli orari.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-112">(For details and other best practices using dates and times, see [Coding best practices using DateTime in the .NET Framework](https://msdn.microsoft.com/library/ms973825.aspx).) Converting individual time zones to UTC makes time comparisons easy.</span></span>

> [!NOTE]
> <span data-ttu-id="c1ae1-113">È anche possibile serializzare un <xref:System.DateTimeOffset> struttura per rappresentare in modo non ambiguo un singolo punto nel tempo.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-113">You can also serialize a <xref:System.DateTimeOffset> structure to unambiguously represent a single point in time.</span></span> <span data-ttu-id="c1ae1-114">Poiché <xref:System.DateTimeOffset> oggetti archiviare un valore di data e ora insieme all'offset dall'ora UTC, rappresentano sempre un determinato punto nel tempo in relazione all'ora UTC.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-114">Because <xref:System.DateTimeOffset> objects store a date and time value along with its offset from UTC, they always represent a particular point in time in relationship to UTC.</span></span>

<span data-ttu-id="c1ae1-115">Il modo più semplice per convertire un orario in ora UTC è chiamare il `static` (`Shared` in Visual Basic) <xref:System.TimeZoneInfo.ConvertTimeToUtc%28System.DateTime%29?displayProperty=nameWithType> (metodo).</span><span class="sxs-lookup"><span data-stu-id="c1ae1-115">The easiest way to convert a time to UTC is to call the `static` (`Shared` in Visual Basic) <xref:System.TimeZoneInfo.ConvertTimeToUtc%28System.DateTime%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="c1ae1-116">La conversione esatta eseguita dal metodo dipende dal valore della `dateTime` del parametro <xref:System.DateTime.Kind%2A> proprietà, come illustrato nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-116">The exact conversion performed by the method depends on the value of the `dateTime` parameter's <xref:System.DateTime.Kind%2A> property, as the following table shows.</span></span>

| `DateTime.Kind`            | <span data-ttu-id="c1ae1-117">Conversione</span><span class="sxs-lookup"><span data-stu-id="c1ae1-117">Conversion</span></span>                                                                     |
| -------------------------- | ------------------------------------------------------------------------------ |
| `DateTimeKind.Local`       | <span data-ttu-id="c1ae1-118">Converte l'ora locale in ora UTC.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-118">Converts local time to UTC.</span></span>                                                    |
| `DateTimeKind.Unspecified` | <span data-ttu-id="c1ae1-119">Presuppone che il parametro `dateTime` sia l'ora locale e converte l'ora locale in ora UTC.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-119">Assumes the `dateTime` parameter is local time and converts local time to UTC.</span></span> |
| `DateTimeKind.Utc`         | <span data-ttu-id="c1ae1-120">Restituisce il parametro `dateTime` invariato.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-120">Returns the `dateTime` parameter unchanged.</span></span>                                    |

<span data-ttu-id="c1ae1-121">Il codice seguente converte l'ora locale corrente in ora UTC e visualizza il risultato nella console.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-121">The following code converts the current local time to UTC and displays the result to the console.</span></span>

[!code-csharp[System.TimeZone2.Concepts#6](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.Concepts/CS/TimeZone2Concepts.cs#6)]
[!code-vb[System.TimeZone2.Concepts#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.Concepts/VB/TimeZone2Concepts.vb#6)]

> [!NOTE]
> <span data-ttu-id="c1ae1-122">Il <xref:System.TimeZoneInfo.ConvertTimeToUtc%28System.DateTime%29?displayProperty=nameWithType> metodo non comporta necessariamente risultati identici per il <xref:System.TimeZone.ToUniversalTime%2A?displayProperty=nameWithType> e <xref:System.DateTime.ToUniversalTime%2A?displayProperty=nameWithType> metodi.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-122">The <xref:System.TimeZoneInfo.ConvertTimeToUtc%28System.DateTime%29?displayProperty=nameWithType> method does not necessarily produce results that are identical to the <xref:System.TimeZone.ToUniversalTime%2A?displayProperty=nameWithType> and <xref:System.DateTime.ToUniversalTime%2A?displayProperty=nameWithType> methods.</span></span> <span data-ttu-id="c1ae1-123">Se il sistema host locale del fuso orario include più regole di regolazione, <xref:System.TimeZoneInfo.ConvertTimeToUtc%28System.DateTime%29?displayProperty=nameWithType> applica la regola appropriata in una determinata data e ora.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-123">If the host system's local time zone includes multiple adjustment rules, <xref:System.TimeZoneInfo.ConvertTimeToUtc%28System.DateTime%29?displayProperty=nameWithType> applies the appropriate rule to a particular date and time.</span></span> <span data-ttu-id="c1ae1-124">Gli altri due metodi vengono sempre applicati alla regola di modifica più recente.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-124">The other two methods always apply the latest adjustment rule.</span></span>

<span data-ttu-id="c1ae1-125">Se il valore di data e ora non rappresenta l'ora locale o UTC, il <xref:System.DateTime.ToUniversalTime%2A> metodo restituirà probabilmente un risultato errato.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-125">If the date and time value does not represent either the local time or UTC, the <xref:System.DateTime.ToUniversalTime%2A> method will likely return an erroneous result.</span></span> <span data-ttu-id="c1ae1-126">Tuttavia, è possibile usare il <xref:System.TimeZoneInfo.ConvertTimeToUtc%2A?displayProperty=nameWithType> metodo per convertire la data e ora da un fuso orario specificato.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-126">However, you can use the <xref:System.TimeZoneInfo.ConvertTimeToUtc%2A?displayProperty=nameWithType> method to convert the date and time from a specified time zone.</span></span> <span data-ttu-id="c1ae1-127">(Per informazioni dettagliate sul recupero di un <xref:System.TimeZoneInfo> oggetto che rappresenta il fuso orario di destinazione, vedere [ricerca dei fusi orari definiti in un sistema locale](../../../docs/standard/datetime/finding-the-time-zones-on-local-system.md).) Il codice seguente usa il <xref:System.TimeZoneInfo.ConvertTimeToUtc%2A?displayProperty=nameWithType> metodo per convertire l'ora solare fuso orientale in ora UTC.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-127">(For details on retrieving a <xref:System.TimeZoneInfo> object that represents the destination time zone, see [Finding the time zones defined on a local system](../../../docs/standard/datetime/finding-the-time-zones-on-local-system.md).) The following code uses the <xref:System.TimeZoneInfo.ConvertTimeToUtc%2A?displayProperty=nameWithType> method to convert Eastern Standard Time to UTC.</span></span>

[!code-csharp[System.TimeZone2.Concepts#7](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.Concepts/CS/TimeZone2Concepts.cs#7)]
[!code-vb[System.TimeZone2.Concepts#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.Concepts/VB/TimeZone2Concepts.vb#7)]

<span data-ttu-id="c1ae1-128">Si noti che questo metodo genera un' <xref:System.ArgumentException> se il <xref:System.DateTime> dell'oggetto <xref:System.DateTime.Kind%2A> proprietà e il fuso orario non corrispondono.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-128">Note that this method throws an <xref:System.ArgumentException> if the <xref:System.DateTime> object's <xref:System.DateTime.Kind%2A> property and the time zone are mismatched.</span></span> <span data-ttu-id="c1ae1-129">Una mancata corrispondenza si verifica se il <xref:System.DateTime.Kind%2A> proprietà è <xref:System.DateTimeKind.Local?displayProperty=nameWithType> ma il <xref:System.TimeZoneInfo> oggetto non rappresenta il fuso orario locale, o se il <xref:System.DateTime.Kind%2A> proprietà è <xref:System.DateTimeKind.Utc?displayProperty=nameWithType> ma la <xref:System.TimeZoneInfo> oggetto non è uguale <xref:System.TimeZoneInfo.Utc?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-129">A mismatch occurs if the <xref:System.DateTime.Kind%2A> property is <xref:System.DateTimeKind.Local?displayProperty=nameWithType> but the <xref:System.TimeZoneInfo> object does not represent the local time zone, or if the <xref:System.DateTime.Kind%2A> property is <xref:System.DateTimeKind.Utc?displayProperty=nameWithType> but the <xref:System.TimeZoneInfo> object does not equal <xref:System.TimeZoneInfo.Utc?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="c1ae1-130">Tutti questi metodi accettano <xref:System.DateTime> i valori come parametri e restituiscono un <xref:System.DateTime> valore.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-130">All of these methods take <xref:System.DateTime> values as parameters and return a <xref:System.DateTime> value.</span></span> <span data-ttu-id="c1ae1-131">Per la <xref:System.DateTimeOffset> valori, il <xref:System.DateTimeOffset> struttura ha un <xref:System.DateTimeOffset.ToUniversalTime%2A> al metodo che converte data e ora dell'istanza corrente in ora UTC dell'istanza.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-131">For <xref:System.DateTimeOffset> values, the <xref:System.DateTimeOffset> structure has a <xref:System.DateTimeOffset.ToUniversalTime%2A> instance method that converts the date and time of the current instance to UTC.</span></span> <span data-ttu-id="c1ae1-132">L'esempio seguente chiama il <xref:System.DateTimeOffset.ToUniversalTime%2A> metodo per convertire un'ora locale e diversi altri orari a Coordinated Universal Time (UTC).</span><span class="sxs-lookup"><span data-stu-id="c1ae1-132">The following example calls the <xref:System.DateTimeOffset.ToUniversalTime%2A> method to convert a local time and several other times to Coordinated Universal Time (UTC).</span></span>

[!code-csharp[System.DateTimeOffset.Methods#16](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Methods/cs/Methods.cs#16)]
[!code-vb[System.DateTimeOffset.Methods#16](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Methods/vb/Methods.vb#16)]

## <a name="converting-utc-to-a-designated-time-zone"></a><span data-ttu-id="c1ae1-133">Conversione dell'ora UTC in un determinato fuso orario</span><span class="sxs-lookup"><span data-stu-id="c1ae1-133">Converting UTC to a designated time zone</span></span>

<span data-ttu-id="c1ae1-134">Per convertire l'ora UTC nell'ora locale, vedere la sezione "conversione UTC nell'ora locale" di seguito.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-134">To convert UTC to local time, see the "Converting UTC to Local Time" section that follows.</span></span> <span data-ttu-id="c1ae1-135">Per convertire l'ora UTC nell'ora di qualsiasi fuso orario designato, chiamare il <xref:System.TimeZoneInfo.ConvertTimeFromUtc%2A> (metodo).</span><span class="sxs-lookup"><span data-stu-id="c1ae1-135">To convert UTC to the time in any time zone that you designate, call the <xref:System.TimeZoneInfo.ConvertTimeFromUtc%2A> method.</span></span> <span data-ttu-id="c1ae1-136">Questo metodo accetta due parametri:</span><span class="sxs-lookup"><span data-stu-id="c1ae1-136">The method takes two parameters:</span></span>

* <span data-ttu-id="c1ae1-137">L'ora UTC da convertire.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-137">The UTC to convert.</span></span> <span data-ttu-id="c1ae1-138">Questo valore deve essere un <xref:System.DateTime> valore la cui proprietà <xref:System.DateTime.Kind%2A> è impostata su `Unspecified` o `Utc`.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-138">This must be a <xref:System.DateTime> value whose <xref:System.DateTime.Kind%2A> property is set to `Unspecified` or `Utc`.</span></span>

* <span data-ttu-id="c1ae1-139">Il fuso orario nel quale convertire l'ora UTC.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-139">The time zone to convert the UTC to.</span></span>

<span data-ttu-id="c1ae1-140">Nel codice seguente l'ora UTC viene convertita nell'ora solare fuso centrale.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-140">The following code converts UTC to Central Standard Time.</span></span>

[!code-csharp[System.TimeZone2.Concepts#8](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.Concepts/CS/TimeZone2Concepts.cs#8)]
[!code-vb[System.TimeZone2.Concepts#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.Concepts/VB/TimeZone2Concepts.vb#8)]

## <a name="converting-utc-to-local-time"></a><span data-ttu-id="c1ae1-141">Conversione dell'ora UTC nell'ora locale</span><span class="sxs-lookup"><span data-stu-id="c1ae1-141">Converting UTC to local time</span></span>

<span data-ttu-id="c1ae1-142">Per convertire l'ora UTC nell'ora locale, chiamare il <xref:System.DateTime.ToLocalTime%2A> metodo del <xref:System.DateTime> oggetto la cui ora da convertire.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-142">To convert UTC to local time, call the <xref:System.DateTime.ToLocalTime%2A> method of the <xref:System.DateTime> object whose time you want to convert.</span></span> <span data-ttu-id="c1ae1-143">Il comportamento esatto del metodo dipende dal valore dell'oggetto <xref:System.DateTime.Kind%2A> proprietà, come illustrato nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-143">The exact behavior of the method depends on the value of the object’s <xref:System.DateTime.Kind%2A> property, as the following table shows.</span></span>

| `DateTime.Kind`            | <span data-ttu-id="c1ae1-144">Conversione</span><span class="sxs-lookup"><span data-stu-id="c1ae1-144">Conversion</span></span>                                                                               |
| -------------------------- | ---------------------------------------------------------------------------------------- |
| `DateTimeKind.Local`       | <span data-ttu-id="c1ae1-145">Restituisce il <xref:System.DateTime> valore non modificato.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-145">Returns the <xref:System.DateTime> value unchanged.</span></span>                                      |
| `DateTimeKind.Unspecified` | <span data-ttu-id="c1ae1-146">Si presuppone che il <xref:System.DateTime> valore sia UTC e converte l'ora UTC nell'ora locale.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-146">Assumes that the <xref:System.DateTime> value is UTC and converts the UTC to local time.</span></span> |
| `DateTimeKind.Utc`         | <span data-ttu-id="c1ae1-147">Converte il <xref:System.DateTime> valore nell'ora locale.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-147">Converts the <xref:System.DateTime> value to local time.</span></span>                                 |

> [!NOTE]
> <span data-ttu-id="c1ae1-148">Il <xref:System.TimeZone.ToLocalTime%2A?displayProperty=nameWithType> metodo si comporta in modo identico al `DateTime.ToLocalTime` (metodo).</span><span class="sxs-lookup"><span data-stu-id="c1ae1-148">The <xref:System.TimeZone.ToLocalTime%2A?displayProperty=nameWithType> method behaves identically to the `DateTime.ToLocalTime` method.</span></span> <span data-ttu-id="c1ae1-149">Bastano un singolo parametro, ovvero il valore di data e ora da convertire.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-149">It takes a single parameter, which is the date and time value to convert.</span></span>

<span data-ttu-id="c1ae1-150">È anche possibile convertire l'ora in un determinato fuso orario all'ora locale usando il `static` (`Shared` in Visual Basic) <xref:System.TimeZoneInfo.ConvertTime%2A?displayProperty=nameWithType> (metodo).</span><span class="sxs-lookup"><span data-stu-id="c1ae1-150">You can also convert the time in any designated time zone to local time by using the `static` (`Shared` in Visual Basic) <xref:System.TimeZoneInfo.ConvertTime%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="c1ae1-151">Questa tecnica viene illustrata nella sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-151">This technique is discussed in the next section.</span></span>

## <a name="converting-between-any-two-time-zones"></a><span data-ttu-id="c1ae1-152">Conversione tra due fusi orari</span><span class="sxs-lookup"><span data-stu-id="c1ae1-152">Converting between any two time zones</span></span>

<span data-ttu-id="c1ae1-153">È possibile convertire tra due fusi orari usando uno dei due seguenti `static` (`Shared` in Visual Basic) i metodi del <xref:System.TimeZoneInfo> classe:</span><span class="sxs-lookup"><span data-stu-id="c1ae1-153">You can convert between any two time zones by using either of the following two `static` (`Shared` in Visual Basic) methods of the <xref:System.TimeZoneInfo> class:</span></span>

* <xref:System.TimeZoneInfo.ConvertTime%2A>

  <span data-ttu-id="c1ae1-154">Parametri di questo metodo sono il valore di data e ora da convertire, un `TimeZoneInfo` oggetto che rappresenta il fuso orario del valore data e ora, e un `TimeZoneInfo` oggetto che rappresenta il fuso orario per convertire il valore data e ora.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-154">This method's parameters are the date and time value to convert, a `TimeZoneInfo` object that represents the time zone of the date and time value, and a `TimeZoneInfo` object that represents the time zone to convert the date and time value to.</span></span>

* <xref:System.TimeZoneInfo.ConvertTimeBySystemTimeZoneId%2A>

  <span data-ttu-id="c1ae1-155">Parametri di questo metodo sono la data e il valore di ora da convertire, l'identificatore del fuso orario del valore di ora e la data e l'identificatore del fuso orario per convertire il valore data e ora.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-155">This method's parameters are the date and time value to convert, the identifier of the date and time value's time zone, and the identifier of the time zone to convert the date and time value to.</span></span>

<span data-ttu-id="c1ae1-156">Entrambi i metodi richiedono che il <xref:System.DateTime.Kind%2A> proprietà del valore di data e ora da convertire e <xref:System.TimeZoneInfo> identificatore del fuso orario o di oggetto che rappresenta il fuso orario corrispondano tra loro.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-156">Both methods require that the <xref:System.DateTime.Kind%2A> property of the date and time value to convert and the <xref:System.TimeZoneInfo> object or time zone identifier that represents its time zone correspond to one another.</span></span> <span data-ttu-id="c1ae1-157">In caso contrario, verrà generata un'eccezione <xref:System.ArgumentException>.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-157">Otherwise, an <xref:System.ArgumentException> is thrown.</span></span> <span data-ttu-id="c1ae1-158">Ad esempio, se il `Kind` è di proprietà del valore di data e ora `DateTimeKind.Local`, viene generata un'eccezione se il `TimeZoneInfo` non è uguale all'oggetto passato come parametro al metodo `TimeZoneInfo.Local`.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-158">For example, if the `Kind` property of the date and time value is `DateTimeKind.Local`, an exception is thrown if the `TimeZoneInfo` object passed as a parameter to the method is not equal to `TimeZoneInfo.Local`.</span></span> <span data-ttu-id="c1ae1-159">Viene inoltre generata un'eccezione se l'identificatore passato come parametro al metodo non è uguale a `TimeZoneInfo.Local.Id`.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-159">An exception is also thrown if the identifier passed as a parameter to the method is not equal to `TimeZoneInfo.Local.Id`.</span></span>

<span data-ttu-id="c1ae1-160">L'esempio seguente usa il <xref:System.TimeZoneInfo.ConvertTime%2A> metodo la conversione dall'ora solare Hawaii all'ora locale.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-160">The following example uses the <xref:System.TimeZoneInfo.ConvertTime%2A> method to convert from Hawaiian Standard Time to local time.</span></span>

[!code-csharp[System.TimeZone2.Concepts#9](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.Concepts/CS/TimeZone2Concepts.cs#9)]
[!code-vb[System.TimeZone2.Concepts#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.Concepts/VB/TimeZone2Concepts.vb#9)]

## <a name="converting-datetimeoffset-values"></a><span data-ttu-id="c1ae1-161">Conversione dei valori DateTimeOffset</span><span class="sxs-lookup"><span data-stu-id="c1ae1-161">Converting DateTimeOffset values</span></span>

<span data-ttu-id="c1ae1-162">I valori di data e l'ora rappresentati da <xref:System.DateTimeOffset> oggetti non sono completamente dal fuso orario poiché l'oggetto viene dissociato dal proprio fuso orario al momento, viene creata un'istanza.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-162">Date and time values represented by <xref:System.DateTimeOffset> objects are not fully time-zone aware because the object is disassociated from its time zone at the time it is instantiated.</span></span> <span data-ttu-id="c1ae1-163">In molti casi è tuttavia necessario convertire semplicemente una data e un'ora in base a due offset dall'ora UTC diversi anziché in base all'ora di determinati fusi orari.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-163">However, in many cases an application simply needs to convert a date and time based on two different offsets from UTC rather than on the time in particular time zones.</span></span> <span data-ttu-id="c1ae1-164">Per eseguire questa conversione, è possibile chiamare l'istanza corrente <xref:System.DateTimeOffset.ToOffset%2A> (metodo).</span><span class="sxs-lookup"><span data-stu-id="c1ae1-164">To perform this conversion, you can call the current instance's <xref:System.DateTimeOffset.ToOffset%2A> method.</span></span> <span data-ttu-id="c1ae1-165">L'unico parametro del metodo è l'offset del nuovo valore data e ora che il metodo deve restituire.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-165">The method's single parameter is the offset of the new date and time value that the method is to return.</span></span>

<span data-ttu-id="c1ae1-166">Se, ad esempio, la data e l'ora della richiesta di una pagina Web da parte di un utente sono note e serializzate sotto forma di stringa nel formato MM/gg/aaaa hh:mm:ss zzzz, il metodo `ReturnTimeOnServer` seguente converte questo valore di data e ora nella data e nell'ora del server Web.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-166">For example, if the date and time of a user request for a Web page is known and is serialized as a string in the format MM/dd/yyyy hh:mm:ss zzzz, the following `ReturnTimeOnServer` method converts this date and time value to the date and time on the Web server.</span></span>

[!code-csharp[System.DateTimeOffset.Conceptual.OffsetConversions#1](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.OffsetConversions/cs/TimeConversions.cs#1)]
[!code-vb[System.DateTimeOffset.Conceptual.OffsetConversions#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.OffsetConversions/vb/TimeConversions.vb#1)] 

<span data-ttu-id="c1ae1-167">Se al metodo viene passata la stringa "9/1/2007 5:32:07 -05:00" che rappresenta la data e l'ora in un fuso orario indietro di cinque ore rispetto all'ora UTC, viene restituito 9/1/2007 3:32:07 AM -07:00 per un server situato nel fuso orario Ora solare del Pacifico (Stati Uniti).</span><span class="sxs-lookup"><span data-stu-id="c1ae1-167">If the method is passed the string "9/1/2007 5:32:07 -05:00", which represents the date and time in a time zone five hours earlier than UTC, it returns 9/1/2007 3:32:07 AM -07:00 for a server located in the U.S. Pacific Standard Time zone.</span></span>

<span data-ttu-id="c1ae1-168">Il <xref:System.TimeZoneInfo> classe include anche un overload del <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29?displayProperty=nameWithType> metodo che esegue le conversioni di fusi orari con <xref:System.DateTimeOffset.ToOffset(System.TimeSpan)> valori.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-168">The <xref:System.TimeZoneInfo> class also includes an overload of the <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29?displayProperty=nameWithType> method that performs time zone conversions with <xref:System.DateTimeOffset.ToOffset(System.TimeSpan)> values.</span></span> <span data-ttu-id="c1ae1-169">I parametri del metodo sono un <xref:System.DateTimeOffset> un riferimento al fuso orario in cui è necessario convertire l'ora e valore.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-169">The method's parameters are a <xref:System.DateTimeOffset> value and a reference to the time zone to which the time is to be converted.</span></span> <span data-ttu-id="c1ae1-170">La chiamata al metodo restituisce un <xref:System.DateTimeOffset> valore.</span><span class="sxs-lookup"><span data-stu-id="c1ae1-170">The method call returns a <xref:System.DateTimeOffset> value.</span></span> <span data-ttu-id="c1ae1-171">Ad esempio, il `ReturnTimeOnServer` metodo nell'esempio precedente potrebbe essere riscritto come indicato di seguito per chiamare il <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29> (metodo).</span><span class="sxs-lookup"><span data-stu-id="c1ae1-171">For example, the `ReturnTimeOnServer` method in the previous example could be rewritten as follows to call the <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29> method.</span></span>

[!code-csharp[System.DateTimeOffset.Conceptual.OffsetConversions#2](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.OffsetConversions/cs/timeconversions2.cs#2)]
[!code-vb[System.DateTimeOffset.Conceptual.OffsetConversions#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.OffsetConversions/vb/TimeConversions2.vb#2)]

## <a name="see-also"></a><span data-ttu-id="c1ae1-172">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="c1ae1-172">See also</span></span>

<span data-ttu-id="c1ae1-173"><xref:System.TimeZoneInfo>
[Date, ore e fusi orari](../../../docs/standard/datetime/index.md)
[ricerca dei fusi orari definiti in un sistema locale](../../../docs/standard/datetime/finding-the-time-zones-on-local-system.md)</span><span class="sxs-lookup"><span data-stu-id="c1ae1-173"><xref:System.TimeZoneInfo>
[Dates, times, and time zones](../../../docs/standard/datetime/index.md)
[Finding the time zones defined on a local system](../../../docs/standard/datetime/finding-the-time-zones-on-local-system.md)</span></span>
