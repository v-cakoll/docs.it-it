---
title: Utilizzo di calendari
ms.date: 04/01/2019
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- globalization [.NET], calendars
- calendars, global applications
- global applications, calendars
- world-ready applications, calendars
- international applications [.NET], calendars
- culture, calendars
ms.assetid: 0c1534e5-979b-4c8a-a588-1c24301aefb3
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: b683784489cd68b66b4f9660f0df5e63b676a91c
ms.sourcegitcommit: a3db1a9eafca89f95ccf361bc1833b47fbb2bb30
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/04/2019
ms.locfileid: "58921351"
---
# <a name="working-with-calendars"></a><span data-ttu-id="3b83c-102">Utilizzo di calendari</span><span class="sxs-lookup"><span data-stu-id="3b83c-102">Working with calendars</span></span>

<span data-ttu-id="3b83c-103">Sebbene un valore di data e ora rappresenti un momento, la relativa rappresentazione di stringa è dipendente dalle impostazioni cultura e dipende sia dalle convenzioni utilizzate per visualizzare i valori di data e ora da impostazioni cultura specifiche che dal calendario utilizzato dalle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="3b83c-103">Although a date and time value represents a moment in time, its string representation is culture-sensitive and depends both on the conventions used for displaying date and time values by a specific culture and on the calendar used by that culture.</span></span> <span data-ttu-id="3b83c-104">In questo argomento vengono illustrati il supporto dei calendari in .NET e viene illustrato l'utilizzo delle classi di calendario quando si lavora con i valori delle date.</span><span class="sxs-lookup"><span data-stu-id="3b83c-104">This topic explores the support for calendars in .NET and discusses the use of the calendar classes when working with date values.</span></span>

## <a name="calendars-in-net"></a><span data-ttu-id="3b83c-105">Calendari in .NET</span><span class="sxs-lookup"><span data-stu-id="3b83c-105">Calendars in .NET</span></span>

<span data-ttu-id="3b83c-106">Tutti i calendari in .NET derivano dal <xref:System.Globalization.Calendar?displayProperty=nameWithType> (classe), che fornisce l'implementazione di calendario di base.</span><span class="sxs-lookup"><span data-stu-id="3b83c-106">All calendars in .NET derive from the <xref:System.Globalization.Calendar?displayProperty=nameWithType> class, which provides the base calendar implementation.</span></span> <span data-ttu-id="3b83c-107">Una delle classi che eredita dalla classe <xref:System.Globalization.Calendar> è la classe <xref:System.Globalization.EastAsianLunisolarCalendar>, che è la classe di base per tutti i calendari lunisolari.</span><span class="sxs-lookup"><span data-stu-id="3b83c-107">One of the classes that inherits from the <xref:System.Globalization.Calendar> class is the <xref:System.Globalization.EastAsianLunisolarCalendar> class, which is the base class for all lunisolar calendars.</span></span> <span data-ttu-id="3b83c-108">.NET include le implementazioni dei calendari seguenti:</span><span class="sxs-lookup"><span data-stu-id="3b83c-108">.NET includes the following calendar implementations:</span></span>

* <xref:System.Globalization.ChineseLunisolarCalendar><span data-ttu-id="3b83c-109">, che rappresenta il calendario lunisolare cinese.</span><span class="sxs-lookup"><span data-stu-id="3b83c-109">, which represents the Chinese lunisolar calendar.</span></span>

* <xref:System.Globalization.GregorianCalendar><span data-ttu-id="3b83c-110">, che rappresenta il calendario gregoriano.</span><span class="sxs-lookup"><span data-stu-id="3b83c-110">, which represents the Gregorian calendar.</span></span> <span data-ttu-id="3b83c-111">Questo calendario viene ulteriormente suddiviso in sottotipi, ad esempio la versione araba e francese mediorientale, definiti dall'enumerazione <xref:System.Globalization.GregorianCalendarTypes?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-111">This calendar is further divided into subtypes (such as Arabic and Middle East French) that are defined by the <xref:System.Globalization.GregorianCalendarTypes?displayProperty=nameWithType> enumeration.</span></span> <span data-ttu-id="3b83c-112">La proprietà <xref:System.Globalization.GregorianCalendar.CalendarType%2A?displayProperty=nameWithType> specifica il sottotipo del calendario gregoriano.</span><span class="sxs-lookup"><span data-stu-id="3b83c-112">The <xref:System.Globalization.GregorianCalendar.CalendarType%2A?displayProperty=nameWithType> property specifies the subtype of the Gregorian calendar.</span></span>

* <xref:System.Globalization.HebrewCalendar><span data-ttu-id="3b83c-113">, che rappresenta il calendario ebraico.</span><span class="sxs-lookup"><span data-stu-id="3b83c-113">, which represents the Hebrew calendar.</span></span>

* <xref:System.Globalization.HijriCalendar><span data-ttu-id="3b83c-114">, che rappresenta il calendario Hijri.</span><span class="sxs-lookup"><span data-stu-id="3b83c-114">, which represents the Hijri calendar.</span></span>

* <xref:System.Globalization.JapaneseCalendar><span data-ttu-id="3b83c-115">, che rappresenta il calendario giapponese.</span><span class="sxs-lookup"><span data-stu-id="3b83c-115">, which represents the Japanese calendar.</span></span>

* <xref:System.Globalization.JapaneseLunisolarCalendar><span data-ttu-id="3b83c-116">, che rappresenta il calendario lunisolare giapponese.</span><span class="sxs-lookup"><span data-stu-id="3b83c-116">, which represents the Japanese lunisolar calendar.</span></span>

* <xref:System.Globalization.JulianCalendar><span data-ttu-id="3b83c-117">, che rappresenta il calendario giuliano.</span><span class="sxs-lookup"><span data-stu-id="3b83c-117">, which represents the Julian calendar.</span></span>

* <xref:System.Globalization.KoreanCalendar><span data-ttu-id="3b83c-118">, che rappresenta il calendario coreano.</span><span class="sxs-lookup"><span data-stu-id="3b83c-118">, which represents the Korean calendar.</span></span>

* <xref:System.Globalization.KoreanLunisolarCalendar><span data-ttu-id="3b83c-119">, che rappresenta il calendario lunisolare coreano.</span><span class="sxs-lookup"><span data-stu-id="3b83c-119">, which represents the Korean lunisolar calendar.</span></span>

* <xref:System.Globalization.PersianCalendar><span data-ttu-id="3b83c-120">, che rappresenta il calendario persiano.</span><span class="sxs-lookup"><span data-stu-id="3b83c-120">, which represents the Persian calendar.</span></span>

* <xref:System.Globalization.TaiwanCalendar><span data-ttu-id="3b83c-121">, che rappresenta il calendario taiwanese.</span><span class="sxs-lookup"><span data-stu-id="3b83c-121">, which represents the Taiwan calendar.</span></span>

* <xref:System.Globalization.TaiwanLunisolarCalendar><span data-ttu-id="3b83c-122">, che rappresenta il calendario lunisolare taiwanese.</span><span class="sxs-lookup"><span data-stu-id="3b83c-122">, which represents the Taiwan lunisolar calendar.</span></span>

* <xref:System.Globalization.ThaiBuddhistCalendar><span data-ttu-id="3b83c-123">, che rappresenta il calendario buddista Thai.</span><span class="sxs-lookup"><span data-stu-id="3b83c-123">, which represents the Thai Buddhist calendar.</span></span>

* <xref:System.Globalization.UmAlQuraCalendar><span data-ttu-id="3b83c-124">, che rappresenta il calendario Um Al Qura.</span><span class="sxs-lookup"><span data-stu-id="3b83c-124">, which represents the Um Al Qura calendar.</span></span>

<span data-ttu-id="3b83c-125">Un calendario può essere utilizzato in uno dei due modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="3b83c-125">A calendar can be used in one of two ways:</span></span>

* <span data-ttu-id="3b83c-126">Come calendario utilizzato da impostazioni cultura specifiche.</span><span class="sxs-lookup"><span data-stu-id="3b83c-126">As the calendar used by a specific culture.</span></span> <span data-ttu-id="3b83c-127">Ogni oggetto <xref:System.Globalization.CultureInfo> dispone di un calendario corrente, che rappresenta il calendario utilizzato attualmente dall'oggetto.</span><span class="sxs-lookup"><span data-stu-id="3b83c-127">Each <xref:System.Globalization.CultureInfo> object has a current calendar, which is the calendar that the object is currently using.</span></span> <span data-ttu-id="3b83c-128">Le rappresentazioni di stringa di tutti i valori di data e ora riflettono automaticamente le impostazioni cultura correnti e il relativo calendario corrente.</span><span class="sxs-lookup"><span data-stu-id="3b83c-128">The string representations of all date and time values automatically reflect the current culture and its current calendar.</span></span> <span data-ttu-id="3b83c-129">In genere, il calendario corrente è il calendario predefinito delle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="3b83c-129">Typically, the current calendar is the culture's default calendar.</span></span> <xref:System.Globalization.CultureInfo> <span data-ttu-id="3b83c-130">oggetti dispongono inoltre di calendari facoltativi, che includono i calendari aggiuntivi che è possibile usare le impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="3b83c-130">objects also have optional calendars, which include additional calendars that the culture can use.</span></span>

* <span data-ttu-id="3b83c-131">Come calendario autonomo indipendente da impostazioni cultura specifiche.</span><span class="sxs-lookup"><span data-stu-id="3b83c-131">As a standalone calendar independent of a specific culture.</span></span> <span data-ttu-id="3b83c-132">In questo caso, vengono utilizzati i metodi <xref:System.Globalization.Calendar> per esprimere le date come valori che riflettono il calendario.</span><span class="sxs-lookup"><span data-stu-id="3b83c-132">In this case, <xref:System.Globalization.Calendar> methods are used to express dates as values that reflect the calendar.</span></span>

<span data-ttu-id="3b83c-133">Si noti che come calendari autonomi è possibile utilizzare solo sei classi di calendario, ovvero <xref:System.Globalization.ChineseLunisolarCalendar>, <xref:System.Globalization.JapaneseLunisolarCalendar>, <xref:System.Globalization.JulianCalendar>, <xref:System.Globalization.KoreanLunisolarCalendar>, <xref:System.Globalization.PersianCalendar> e <xref:System.Globalization.TaiwanLunisolarCalendar>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-133">Note that six calendar classes – <xref:System.Globalization.ChineseLunisolarCalendar>, <xref:System.Globalization.JapaneseLunisolarCalendar>, <xref:System.Globalization.JulianCalendar>, <xref:System.Globalization.KoreanLunisolarCalendar>, <xref:System.Globalization.PersianCalendar>, and <xref:System.Globalization.TaiwanLunisolarCalendar> – can be used only as standalone calendars.</span></span> <span data-ttu-id="3b83c-134">Esse non vengono utilizzate dalle impostazioni cultura né come calendari predefiniti né come calendari facoltativi.</span><span class="sxs-lookup"><span data-stu-id="3b83c-134">They are not used by any culture as either the default calendar or as an optional calendar.</span></span>

## <a name="calendars-and-cultures"></a><span data-ttu-id="3b83c-135">Calendari e impostazioni cultura</span><span class="sxs-lookup"><span data-stu-id="3b83c-135">Calendars and cultures</span></span>

<span data-ttu-id="3b83c-136">Le impostazioni cultura hanno un calendario predefinito, che viene definito dalla proprietà <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-136">Each culture has a default calendar, which is defined by the <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="3b83c-137">La proprietà <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> restituisce una matrice di oggetti <xref:System.Globalization.Calendar> che specifica tutti i calendari supportati dalle specifiche impostazioni cultura, incluso il calendario predefinito di tali impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="3b83c-137">The <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> property returns an array of <xref:System.Globalization.Calendar> objects that specifies all the calendars supported by a particular culture, including that culture's default calendar.</span></span>

<span data-ttu-id="3b83c-138">Nell'esempio seguente vengono illustrate le proprietà <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType> e <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-138">The following example illustrates the <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType> and <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> properties.</span></span> <span data-ttu-id="3b83c-139">Vengono creati gli oggetti `CultureInfo` per le impostazioni cultura thailandesi (Thailandia) e giapponesi (Giappone) e vengono visualizzati i relativi calendari predefiniti e facoltativi.</span><span class="sxs-lookup"><span data-stu-id="3b83c-139">It creates `CultureInfo` objects for the Thai (Thailand) and Japanese (Japan) cultures and displays their default and optional calendars.</span></span> <span data-ttu-id="3b83c-140">Si noti che in entrambi i casi il calendario predefinito delle impostazioni cultura è incluso anche nella raccolta <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-140">Note that in both cases, the culture's default calendar is also included in the <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> collection.</span></span>

[!code-csharp[Conceptual.Calendars#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/calendarinfo1.cs#1)]
[!code-vb[Conceptual.Calendars#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/calendarinfo1.vb#1)]

<span data-ttu-id="3b83c-141">Il calendario attualmente in uso da un oggetto <xref:System.Globalization.CultureInfo> specifico viene definito dalla proprietà <xref:System.Globalization.DateTimeFormatInfo.Calendar%2A?displayProperty=nameWithType> delle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="3b83c-141">The calendar currently in use by a particular <xref:System.Globalization.CultureInfo> object is defined by the culture's <xref:System.Globalization.DateTimeFormatInfo.Calendar%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="3b83c-142">L'oggetto <xref:System.Globalization.DateTimeFormatInfo> delle impostazioni cultura viene restituito dalla proprietà <xref:System.Globalization.CultureInfo.DateTimeFormat%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-142">A culture's <xref:System.Globalization.DateTimeFormatInfo> object is returned by the <xref:System.Globalization.CultureInfo.DateTimeFormat%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="3b83c-143">Quando vengono create le impostazioni cultura, il relativo valore predefinito è uguale al valore della proprietà <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-143">When a culture is created, its default value is the same as the value of the <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="3b83c-144">È tuttavia possibile sostituire il calendario corrente delle impostazioni cultura con qualsiasi calendario contenuto nella matrice restituita dalla proprietà <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-144">However, you can change the culture's current calendar to any calendar contained in the array returned by the <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="3b83c-145">Se si tenta di impostare il calendario corrente su un calendario che non è incluso nel valore della proprietà <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType>, viene generato un oggetto <xref:System.ArgumentException>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-145">If you try to set the current calendar to a calendar that is not included in the <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> property value, an <xref:System.ArgumentException> is thrown.</span></span>

<span data-ttu-id="3b83c-146">Nell'esempio seguente viene modificato il calendario utilizzato dalle impostazioni cultura arabe (Arabia Saudita).</span><span class="sxs-lookup"><span data-stu-id="3b83c-146">The following example changes the calendar used by the Arabic (Saudi Arabia) culture.</span></span> <span data-ttu-id="3b83c-147">Viene innanzitutto creata un'istanza di un valore <xref:System.DateTime>, il quale viene quindi visualizzato utilizzando le impostazioni cultura correnti che, in questo caso, sono quelle inglesi (Stati Uniti) e il calendario corrente delle impostazioni cultura che, in questo caso, è il calendario gregoriano.</span><span class="sxs-lookup"><span data-stu-id="3b83c-147">It first instantiates a <xref:System.DateTime> value and displays it using the current culture - which, in this case, is English (United States) - and the current culture's calendar (which, in this case, is the Gregorian calendar).</span></span> <span data-ttu-id="3b83c-148">A questo punto vengono impostate le impostazioni cultura arabe (Arabia Saudita) e la data viene visualizzata utilizzando il calendario Um Al-Qura predefinito.</span><span class="sxs-lookup"><span data-stu-id="3b83c-148">Next, it changes the current culture to Arabic (Saudi Arabia) and displays the date using its default Um Al-Qura calendar.</span></span> <span data-ttu-id="3b83c-149">Viene quindi chiamato il metodo `CalendarExists` per determinare se il calendario Hijri è supportato dalle impostazioni cultura arabe (Arabia Saudita).</span><span class="sxs-lookup"><span data-stu-id="3b83c-149">It then calls the `CalendarExists` method to determine whether the Hijri calendar is supported by the Arabic (Saudi Arabia) culture.</span></span> <span data-ttu-id="3b83c-150">Poiché il calendario è supportato, il calendario corrente viene sostituito con il calendario Hijri e viene visualizzata nuovamente la data.</span><span class="sxs-lookup"><span data-stu-id="3b83c-150">Because the calendar is supported, it changes the current calendar to Hijri and again displays the date.</span></span> <span data-ttu-id="3b83c-151">Si noti che in ogni caso la data viene visualizzata utilizzando il calendario corrente delle impostazioni cultura correnti.</span><span class="sxs-lookup"><span data-stu-id="3b83c-151">Note that in each case, the date is displayed using the current culture's current calendar.</span></span>

[!code-csharp[Conceptual.Calendars#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/changecalendar2.cs#2)]
[!code-vb[Conceptual.Calendars#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/changecalendar2.vb#2)]

## <a name="dates-and-calendars"></a><span data-ttu-id="3b83c-152">Date e calendari</span><span class="sxs-lookup"><span data-stu-id="3b83c-152">Dates and calendars</span></span>

<span data-ttu-id="3b83c-153">Ad eccezione dei costruttori che includono un parametro di tipo <xref:System.Globalization.Calendar> e consentono agli elementi di una data, ad esempio mese, giorno e anno, di riflettere i valori in un calendario designato, entrambi i valori <xref:System.DateTime> e <xref:System.DateTimeOffset> si basano sempre sul calendario gregoriano.</span><span class="sxs-lookup"><span data-stu-id="3b83c-153">With the exception of the constructors that include a parameter of type <xref:System.Globalization.Calendar> and allow the elements of a date (that is, the month, the day, and the year) to reflect values in a designated calendar, both <xref:System.DateTime> and <xref:System.DateTimeOffset> values are always based on the Gregorian calendar.</span></span> <span data-ttu-id="3b83c-154">Ciò significa, ad esempio, che la proprietà <xref:System.DateTime.Year%2A?displayProperty=nameWithType> restituisce l'anno nel calendario gregoriano e la proprietà <xref:System.DateTime.Day%2A?displayProperty=nameWithType> restituisce il giorno del mese nel calendario gregoriano.</span><span class="sxs-lookup"><span data-stu-id="3b83c-154">This means, for example, that the <xref:System.DateTime.Year%2A?displayProperty=nameWithType> property returns the year in the Gregorian calendar, and the <xref:System.DateTime.Day%2A?displayProperty=nameWithType> property returns the day of the month in the Gregorian calendar.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3b83c-155">È importante tenere presente che esiste una differenza tra un valore di data e la relativa rappresentazione di stringa.</span><span class="sxs-lookup"><span data-stu-id="3b83c-155">It is important to remember that there is a difference between a date value and its string representation.</span></span> <span data-ttu-id="3b83c-156">Il primo si basa sul calendario gregoriano, mentre il secondo si basa sul calendario corrente delle impostazioni cultura specifiche.</span><span class="sxs-lookup"><span data-stu-id="3b83c-156">The former is based on the Gregorian calendar; the latter is based on the current calendar of a specific culture.</span></span>

<span data-ttu-id="3b83c-157">Nell'esempio seguente viene illustrata la differenza tra le proprietà <xref:System.DateTime> e i relativi metodi <xref:System.Globalization.Calendar> corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="3b83c-157">The following example illustrates this difference between <xref:System.DateTime> properties and their corresponding <xref:System.Globalization.Calendar> methods.</span></span> <span data-ttu-id="3b83c-158">Nell'esempio le impostazioni cultura correnti sono quelle arabe (Egitto) e il calendario corrente è Um Al Qura.</span><span class="sxs-lookup"><span data-stu-id="3b83c-158">In the example, the current culture is Arabic (Egypt), and the current calendar is Um Al Qura.</span></span> <span data-ttu-id="3b83c-159">Il valore <xref:System.DateTime> viene impostato sul quindicesimo giorno del settimo mese del 2011.</span><span class="sxs-lookup"><span data-stu-id="3b83c-159">A <xref:System.DateTime> value is set to the fifteenth day of the seventh month of 2011.</span></span> <span data-ttu-id="3b83c-160">Risulta chiaro che tale valore viene interpretato come data del calendario gregoriano, poiché questi stessi valori vengono restituiti dal metodo <xref:System.DateTime.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> quando vengono utilizzate le convenzioni delle impostazioni cultura inglesi.</span><span class="sxs-lookup"><span data-stu-id="3b83c-160">It is clear that this is interpreted as a Gregorian date, because these same values are returned by the <xref:System.DateTime.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> method when it uses the conventions of the invariant culture.</span></span> <span data-ttu-id="3b83c-161">La rappresentazione di stringa della data formattata utilizzando le convenzioni delle impostazioni cultura correnti è 14/08/32, che è la data equivalente nel calendario Um Al Qura.</span><span class="sxs-lookup"><span data-stu-id="3b83c-161">The string representation of the date that is formatted using the conventions of the current culture is 14/08/32, which is the equivalent date in the Um Al Qura calendar.</span></span> <span data-ttu-id="3b83c-162">Successivamente, vengono utilizzati i membri di `DateTime` e `Calendar` per restituire il giorno, il mese e l'anno del valore <xref:System.DateTime>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-162">Next, members of `DateTime` and `Calendar` are used to return the day, the month, and the year of the <xref:System.DateTime> value.</span></span> <span data-ttu-id="3b83c-163">In ogni caso, i valori restituiti dai membri di <xref:System.DateTime> riflettono i valori del calendario gregoriano, mentre i valori restituiti dai membri di <xref:System.Globalization.UmAlQuraCalendar> riflettono i valori del calendario Um Al Qura.</span><span class="sxs-lookup"><span data-stu-id="3b83c-163">In each case, the values returned by <xref:System.DateTime> members reflect values in the Gregorian calendar, whereas values returned by <xref:System.Globalization.UmAlQuraCalendar> members reflect values in the Uum al-Qura calendar.</span></span>

[!code-csharp[Conceptual.Calendars#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/datesandcalendars2.cs#3)]
[!code-vb[Conceptual.Calendars#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/datesandcalendars2.vb#3)]

### <a name="instantiating-dates-based-on-a-calendar"></a><span data-ttu-id="3b83c-164">Creare un'istanza di date in un calendario di base</span><span class="sxs-lookup"><span data-stu-id="3b83c-164">Instantiating dates based on a calendar</span></span>

<span data-ttu-id="3b83c-165">Poiché i valori <xref:System.DateTime> e <xref:System.DateTimeOffset> si basano sul calendario gregoriano, è necessario chiamare un costruttore di overload che include un parametro di tipo <xref:System.Globalization.Calendar> per creare un'istanza di un valore di data se si desidera utilizzare i valori di giorno, mese o anno da un calendario diverso.</span><span class="sxs-lookup"><span data-stu-id="3b83c-165">Because <xref:System.DateTime> and <xref:System.DateTimeOffset> values are based on the Gregorian calendar, you must call an overloaded constructor that includes a parameter of type <xref:System.Globalization.Calendar> to instantiate a date value if you want to use the day, month, or year values from a different calendar.</span></span> <span data-ttu-id="3b83c-166">È inoltre possibile chiamare uno degli overload del metodo <xref:System.Globalization.Calendar.ToDateTime%2A?displayProperty=nameWithType> del calendario specifico per creare un'istanza di un oggetto <xref:System.DateTime> basato sui valori di un determinato calendario.</span><span class="sxs-lookup"><span data-stu-id="3b83c-166">You can also call one of the overloads of a specific calendar's <xref:System.Globalization.Calendar.ToDateTime%2A?displayProperty=nameWithType> method to instantiate a <xref:System.DateTime> object based on the values of a particular calendar.</span></span>

<span data-ttu-id="3b83c-167">Nell'esempio seguente viene creata un'istanza di un valore <xref:System.DateTime> passando un oggetto <xref:System.Globalization.HebrewCalendar> a un costruttore <xref:System.DateTime> e viene creata un'istanza di un secondo valore <xref:System.DateTime> chiamando il metodo <xref:System.Globalization.HebrewCalendar.ToDateTime%28System.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-167">The following example instantiates one <xref:System.DateTime> value by passing a <xref:System.Globalization.HebrewCalendar> object to a <xref:System.DateTime> constructor, and instantiates a second <xref:System.DateTime> value by calling the <xref:System.Globalization.HebrewCalendar.ToDateTime%28System.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="3b83c-168">Poiché i due valori vengono creati con valori identici dal calendario ebraico, la chiamata al metodo <xref:System.DateTime.Equals%2A?displayProperty=nameWithType> mostra che i due valori <xref:System.DateTime> sono uguali.</span><span class="sxs-lookup"><span data-stu-id="3b83c-168">Because the two values are created with identical values from the Hebrew calendar, the call to the <xref:System.DateTime.Equals%2A?displayProperty=nameWithType> method shows that the two <xref:System.DateTime> values are equal.</span></span>

[!code-csharp[Conceptual.Calendars#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/instantiatehcdate1.cs#4)]
[!code-vb[Conceptual.Calendars#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/instantiatehcdate1.vb#4)]

### <a name="representing-dates-in-the-current-calendar"></a><span data-ttu-id="3b83c-169">Che rappresentano date nel calendario corrente</span><span class="sxs-lookup"><span data-stu-id="3b83c-169">Representing dates in the current calendar</span></span>

<span data-ttu-id="3b83c-170">I metodi di formattazione di data e ora utilizzano sempre il calendario corrente quando si convertono le date in stringhe.</span><span class="sxs-lookup"><span data-stu-id="3b83c-170">Date and time formatting methods always use the current calendar when converting dates to strings.</span></span> <span data-ttu-id="3b83c-171">Ciò significa che le rappresentazioni di stringa dell'anno, del mese e del giorno del mese riflettono il calendario corrente e non necessariamente il calendario gregoriano.</span><span class="sxs-lookup"><span data-stu-id="3b83c-171">This means that the string representation of the year, the month, and the day of the month reflect the current calendar, and do not necessarily reflect the Gregorian calendar.</span></span>

<span data-ttu-id="3b83c-172">Nell'esempio seguente viene illustrato come il calendario corrente influisce sulla rappresentazione di stringa di una data.</span><span class="sxs-lookup"><span data-stu-id="3b83c-172">The following example shows how the current calendar affects the string representation of a date.</span></span> <span data-ttu-id="3b83c-173">Vengono sostituite le impostazioni cultura correnti con quelle cinesi (tradizionale, Taiwan) e viene creata un'istanza di un valore di data.</span><span class="sxs-lookup"><span data-stu-id="3b83c-173">It changes the current culture to Chinese (Traditional, Taiwan), and instantiates a date value.</span></span> <span data-ttu-id="3b83c-174">Viene quindi visualizzato il calendario corrente e la data, viene sostituito il calendario corrente con <xref:System.Globalization.TaiwanCalendar> e viene visualizzato il calendario corrente e di nuovo la data.</span><span class="sxs-lookup"><span data-stu-id="3b83c-174">It then displays the current calendar and the date, changes the current calendar to <xref:System.Globalization.TaiwanCalendar>, and displays the current calendar and date once again.</span></span> <span data-ttu-id="3b83c-175">La prima volta che viene visualizzata la data, essa viene rappresentata come data del calendario gregoriano.</span><span class="sxs-lookup"><span data-stu-id="3b83c-175">The first time the date is displayed, it is represented as a date in the Gregorian calendar.</span></span> <span data-ttu-id="3b83c-176">La seconda volta che viene visualizzata, essa viene rappresentata come data del calendario taiwanese.</span><span class="sxs-lookup"><span data-stu-id="3b83c-176">The second time it is displayed, it is represented as a date in the Taiwan calendar.</span></span>

[!code-csharp[Conceptual.Calendars#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/currentcalendar1.cs#5)]
[!code-vb[Conceptual.Calendars#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/currentcalendar1.vb#5)]

### <a name="representing-dates-in-a-non-current-calendar"></a><span data-ttu-id="3b83c-177">Rappresentazione delle date in un calendario non corrente</span><span class="sxs-lookup"><span data-stu-id="3b83c-177">Representing dates in a non-current calendar</span></span>

<span data-ttu-id="3b83c-178">Per rappresentare una data utilizzando un calendario che non è il calendario corrente delle impostazioni cultura specifiche, è necessario chiamare i metodi dell'oggetto <xref:System.Globalization.Calendar>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-178">To represent a date using a calendar that is not the current calendar of a particular culture, you must call methods of that <xref:System.Globalization.Calendar> object.</span></span> <span data-ttu-id="3b83c-179">Ad esempio, i metodi <xref:System.Globalization.Calendar.GetYear%2A?displayProperty=nameWithType>, <xref:System.Globalization.Calendar.GetMonth%2A?displayProperty=nameWithType> e <xref:System.Globalization.Calendar.GetDayOfMonth%2A?displayProperty=nameWithType> convertono l'anno, il mese e il giorno in valori che riflettono un determinato calendario.</span><span class="sxs-lookup"><span data-stu-id="3b83c-179">For example, the <xref:System.Globalization.Calendar.GetYear%2A?displayProperty=nameWithType>, <xref:System.Globalization.Calendar.GetMonth%2A?displayProperty=nameWithType>, and <xref:System.Globalization.Calendar.GetDayOfMonth%2A?displayProperty=nameWithType> methods convert the year, month, and day to values that reflect a particular calendar.</span></span>

> [!WARNING]
> <span data-ttu-id="3b83c-180">Poiché alcuni calendari non sono calendari facoltativi delle impostazioni cultura, per rappresentare le date in tali calendari è necessario chiamare sempre i metodi del calendario.</span><span class="sxs-lookup"><span data-stu-id="3b83c-180">Because some calendars are not optional calendars of any culture, representing dates in these calendars always requires that you call calendar methods.</span></span> <span data-ttu-id="3b83c-181">Ciò vale per tutti i calendari che derivano dalle classi <xref:System.Globalization.EastAsianLunisolarCalendar>, <xref:System.Globalization.JulianCalendar> e <xref:System.Globalization.PersianCalendar>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-181">This is true of all calendars that derive from the <xref:System.Globalization.EastAsianLunisolarCalendar>, <xref:System.Globalization.JulianCalendar>, and <xref:System.Globalization.PersianCalendar> classes.</span></span>

<span data-ttu-id="3b83c-182">Nell'esempio seguente viene utilizzato un oggetto <xref:System.Globalization.JulianCalendar> per creare un'istanza di una data, il 9 gennaio 1905, nel calendario giuliano.</span><span class="sxs-lookup"><span data-stu-id="3b83c-182">The following example uses a <xref:System.Globalization.JulianCalendar> object to instantiate a date, January 9, 1905, in the Julian calendar.</span></span> <span data-ttu-id="3b83c-183">Quando tale data viene visualizzata utilizzando il calendario predefinito (gregoriano), essa viene rappresentata come il 22 gennaio 1905.</span><span class="sxs-lookup"><span data-stu-id="3b83c-183">When this date is displayed using the default (Gregorian) calendar, it is represented as January 22, 1905.</span></span> <span data-ttu-id="3b83c-184">Le chiamate ai singoli metodi <xref:System.Globalization.JulianCalendar> consentono di rappresentare la data nel calendario giuliano.</span><span class="sxs-lookup"><span data-stu-id="3b83c-184">Calls to individual <xref:System.Globalization.JulianCalendar> methods enable the date to be represented in the Julian calendar.</span></span>

[!code-csharp[Conceptual.Calendars#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/noncurrentcalendar1.cs#6)]
[!code-vb[Conceptual.Calendars#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/noncurrentcalendar1.vb#6)]

### <a name="calendars-and-date-ranges"></a><span data-ttu-id="3b83c-185">I calendari e intervalli di date</span><span class="sxs-lookup"><span data-stu-id="3b83c-185">Calendars and date ranges</span></span>

<span data-ttu-id="3b83c-186">La data più vicina supportata da un calendario è indicata dalla proprietà <xref:System.Globalization.Calendar.MinSupportedDateTime%2A?displayProperty=nameWithType> del calendario.</span><span class="sxs-lookup"><span data-stu-id="3b83c-186">The earliest date supported by a calendar is indicated by that calendar's <xref:System.Globalization.Calendar.MinSupportedDateTime%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="3b83c-187">Per la classe <xref:System.Globalization.GregorianCalendar>, tale data è il 1° gennaio, 0001. d.C.</span><span class="sxs-lookup"><span data-stu-id="3b83c-187">For the <xref:System.Globalization.GregorianCalendar> class, that date is January 1, 0001 C.E.</span></span> <span data-ttu-id="3b83c-188">La maggior parte degli altri calendari in .NET supportano un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="3b83c-188">Most of the other calendars in .NET support a later date.</span></span> <span data-ttu-id="3b83c-189">Il tentativo di utilizzare un valore di data e ora che precede la data più vicina supportata da un calendario genera un'eccezione <xref:System.ArgumentOutOfRangeException>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-189">Trying to work with a date and time value that precedes a calendar's earliest supported date throws an <xref:System.ArgumentOutOfRangeException> exception.</span></span>

<span data-ttu-id="3b83c-190">Tuttavia, esiste un'eccezione importante.</span><span class="sxs-lookup"><span data-stu-id="3b83c-190">However, there is one important exception.</span></span> <span data-ttu-id="3b83c-191">Il valore (non inizializzato) predefinito di un oggetto <xref:System.DateTime> e un oggetto <xref:System.DateTimeOffset> è uguale al valore <xref:System.Globalization.GregorianCalendar.MinSupportedDateTime%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-191">The default (uninitialized) value of a <xref:System.DateTime> object and a <xref:System.DateTimeOffset> object is equal to the <xref:System.Globalization.GregorianCalendar.MinSupportedDateTime%2A?displayProperty=nameWithType> value.</span></span> <span data-ttu-id="3b83c-192">Se si tenta di formattare la data in un calendario che non supporta il 1 ° gennaio 0001 E.V.</span><span class="sxs-lookup"><span data-stu-id="3b83c-192">If you try to format this date in a calendar that does not support January 1, 0001 C.E.</span></span> <span data-ttu-id="3b83c-193">e non si specifica un identificatore di formato, il metodo di formattazione utilizza l'identificatore di formato "s" (modello di data/ora ordinabile) anziché l'identificatore di formato "G" (modello di data/ora generale).</span><span class="sxs-lookup"><span data-stu-id="3b83c-193">and you do not provide a format specifier, the formatting method uses the "s" (sortable date/time pattern) format specifier instead of the "G" (general date/time pattern) format specifier.</span></span> <span data-ttu-id="3b83c-194">Di conseguenza, l'operazione di formattazione non genera un'eccezione <xref:System.ArgumentOutOfRangeException>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-194">As a result, the formatting operation does not throw an <xref:System.ArgumentOutOfRangeException> exception.</span></span> <span data-ttu-id="3b83c-195">Al contrario, restituisce la data non supportata.</span><span class="sxs-lookup"><span data-stu-id="3b83c-195">Instead, it returns the unsupported date.</span></span> <span data-ttu-id="3b83c-196">Come illustrato nell'esempio, viene mostrato il valore <xref:System.DateTime.MinValue?displayProperty=nameWithType> quando le impostazioni cultura correnti sono impostate su giapponese (Giappone) con il calendario giapponese e su arabo (Egitto) con il calendario Um al Qura.</span><span class="sxs-lookup"><span data-stu-id="3b83c-196">This is illustrated in the following example, which displays the value of <xref:System.DateTime.MinValue?displayProperty=nameWithType> when the current culture is set to Japanese (Japan) with the Japanese calendar, and to Arabic (Egypt) with the Um Al Qura calendar.</span></span> <span data-ttu-id="3b83c-197">Vengono inoltre impostate le impostazioni cultura correnti su inglese (Stati Uniti) e viene chiamato il metodo <xref:System.DateTime.ToString%28System.IFormatProvider%29?displayProperty=nameWithType> con ognuno di questi oggetti <xref:System.Globalization.CultureInfo>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-197">It also sets the current culture to English (United States) and calls the <xref:System.DateTime.ToString%28System.IFormatProvider%29?displayProperty=nameWithType> method with each of these <xref:System.Globalization.CultureInfo> objects.</span></span> <span data-ttu-id="3b83c-198">In ogni caso, la data viene visualizzata usando lo schema di data/ora ordinabile.</span><span class="sxs-lookup"><span data-stu-id="3b83c-198">In each case, the date is displayed by using the sortable date/time pattern.</span></span>

[!code-csharp[Conceptual.Calendars#11](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/minsupporteddatetime1.cs#11)]
[!code-vb[Conceptual.Calendars#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/minsupporteddatetime1.vb#11)]

## <a name="working-with-eras"></a><span data-ttu-id="3b83c-199">Utilizzo delle ere</span><span class="sxs-lookup"><span data-stu-id="3b83c-199">Working with eras</span></span>

<span data-ttu-id="3b83c-200">I calendari dividono in genere le date in ere.</span><span class="sxs-lookup"><span data-stu-id="3b83c-200">Calendars typically divide dates into eras.</span></span> <span data-ttu-id="3b83c-201">Tuttavia, il <xref:System.Globalization.Calendar> non supportano tutte le ere definite da un calendario e la maggior parte delle classi in .NET i <xref:System.Globalization.Calendar> classi supportano una sola era.</span><span class="sxs-lookup"><span data-stu-id="3b83c-201">However, the <xref:System.Globalization.Calendar> classes in .NET do not support every era defined by a calendar, and most of the <xref:System.Globalization.Calendar> classes support only a single era.</span></span> <span data-ttu-id="3b83c-202">Solo le classi <xref:System.Globalization.JapaneseCalendar> e <xref:System.Globalization.JapaneseLunisolarCalendar> supportano più ere.</span><span class="sxs-lookup"><span data-stu-id="3b83c-202">Only the <xref:System.Globalization.JapaneseCalendar> and <xref:System.Globalization.JapaneseLunisolarCalendar> classes support multiple eras.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="3b83c-203">L'era Reiwa, una nuova era per il <xref:System.Globalization.JapaneseCalendar> e <xref:System.Globalization.JapaneseLunisolarCalendar>, inizia il 1 maggio 2019.</span><span class="sxs-lookup"><span data-stu-id="3b83c-203">The Reiwa era, a new era in the <xref:System.Globalization.JapaneseCalendar> and <xref:System.Globalization.JapaneseLunisolarCalendar>, begins on May 1, 2019.</span></span> <span data-ttu-id="3b83c-204">Questo cambio interessa tutte le applicazioni che usano questi calendari.</span><span class="sxs-lookup"><span data-stu-id="3b83c-204">This change affects all applications that use these calendars.</span></span> <span data-ttu-id="3b83c-205">Vedere gli articoli seguenti per altre informazioni:</span><span class="sxs-lookup"><span data-stu-id="3b83c-205">See the following articles for more information:</span></span>
> - <span data-ttu-id="3b83c-206">[La gestione di una nuova era del calendario giapponese in .NET](https://devblogs.microsoft.com/dotnet/handling-a-new-era-in-the-japanese-calendar-in-net/), che documenta le funzionalità aggiunte a .NET per supportare calendari con più ere e illustra le procedure consigliate da usare quando si gestiscono era più calendari.</span><span class="sxs-lookup"><span data-stu-id="3b83c-206">[Handling a new era in the Japanese calendar in .NET](https://devblogs.microsoft.com/dotnet/handling-a-new-era-in-the-japanese-calendar-in-net/), which documents features added to .NET to support calendars with multiple eras and discusses best practices to use when handling multi-era calendars.</span></span>
> - <span data-ttu-id="3b83c-207">[Preparare l'applicazione per la modifica giapponese](/windows/uwp/design/globalizing/japanese-era-change), che forniscono informazioni sui test delle applicazioni in Windows per garantire la conformità per la modifica di era.</span><span class="sxs-lookup"><span data-stu-id="3b83c-207">[Prepare your application for the Japanese era change](/windows/uwp/design/globalizing/japanese-era-change), which provides information on testing your applications on Windows to ensure their readiness for the era change.</span></span>
> - <span data-ttu-id="3b83c-208">[Riepilogo dell'Era giapponese nuovi aggiornamenti per .NET Framework](https://support.microsoft.com/en-us/help/4477957/new-japanese-era-updates-for-net-framework), che elenca gli aggiornamenti di .NET Framework per le singole versioni di Windows che riguardano la nuova era del calendario giapponese, note sulla nuova funzionalità di .NET Framework per il supporto multi-era e include elementi da cercare nel test delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="3b83c-208">[Summary of new Japanese Era updates for .NET Framework](https://support.microsoft.com/en-us/help/4477957/new-japanese-era-updates-for-net-framework), which lists .NET Framework updates for individual Windows versions that are related to the new Japanese calendar era, notes new .NET Framework features for multi-era support, and includes things to look for in testing your applications.</span></span>

<span data-ttu-id="3b83c-209">Un'era nella maggior parte dei calendari indica un periodo di tempo molto lungo.</span><span class="sxs-lookup"><span data-stu-id="3b83c-209">An era in most calendars denotes an extremely long time period.</span></span> <span data-ttu-id="3b83c-210">Nel calendario gregoriano, ad esempio, l'era corrente si estende su più di due millenni.</span><span class="sxs-lookup"><span data-stu-id="3b83c-210">In the Gregorian calendar, for example, the current era spans more than two millennia.</span></span> <span data-ttu-id="3b83c-211">Per il <xref:System.Globalization.JapaneseCalendar> e il <xref:System.Globalization.JapaneseLunisolarCalendar>, i due calendari che supportano più ere, ciò non avviene.</span><span class="sxs-lookup"><span data-stu-id="3b83c-211">For the <xref:System.Globalization.JapaneseCalendar> and the <xref:System.Globalization.JapaneseLunisolarCalendar>, the two calendars that support multiple eras, this is not the case.</span></span> <span data-ttu-id="3b83c-212">Un'era corrisponde al periodo di Imperatore un Regno di un.</span><span class="sxs-lookup"><span data-stu-id="3b83c-212">An era corresponds to the period of an emperor's reign.</span></span> <span data-ttu-id="3b83c-213">Supporto per più ere, in particolare quando il limite superiore dell'era corrente è sconosciuto, comporta particolari difficoltà.</span><span class="sxs-lookup"><span data-stu-id="3b83c-213">Support for multiple eras, particularly when the upper limit of the current era is unknown, poses special challenges.</span></span> 

### <a name="eras-and-era-names"></a><span data-ttu-id="3b83c-214">Ere e nomi di ere</span><span class="sxs-lookup"><span data-stu-id="3b83c-214">Eras and era names</span></span>

<span data-ttu-id="3b83c-215">In .NET, numeri interi che rappresentano le ere supportate dall'implementazione di un calendario specifico vengono archiviati in ordine inverso nel <xref:System.Globalization.Calendar.Eras%2A?displayProperty=nameWithType> matrice.</span><span class="sxs-lookup"><span data-stu-id="3b83c-215">In .NET, integers that represent the eras supported by a particular calendar implementation are stored in reverse order in the <xref:System.Globalization.Calendar.Eras%2A?displayProperty=nameWithType> array.</span></span> <span data-ttu-id="3b83c-216">L'era corrente, ovvero l'era con l'intervallo di tempo più recente, si trova in corrispondenza dell'indice zero e per <xref:System.Globalization.Calendar> classi che supportano più ere ciascun indice successivo riflette l'era precedente.</span><span class="sxs-lookup"><span data-stu-id="3b83c-216">The current era (which is the era with the latest time range) is at index zero, and for <xref:System.Globalization.Calendar> classes that support multiple eras, each successive index reflects the previous era.</span></span> <span data-ttu-id="3b83c-217">La proprietà <xref:System.Globalization.Calendar.CurrentEra?displayProperty=nameWithType> statica definisce l'indice dell'era corrente nella matrice <xref:System.Globalization.Calendar.Eras%2A?displayProperty=nameWithType>. Si tratta di una costante il cui valore è sempre zero.</span><span class="sxs-lookup"><span data-stu-id="3b83c-217">The static <xref:System.Globalization.Calendar.CurrentEra?displayProperty=nameWithType> property defines the index of the current era in the <xref:System.Globalization.Calendar.Eras%2A?displayProperty=nameWithType> array; it is a constant whose value is always zero.</span></span> <span data-ttu-id="3b83c-218">Le singole classi <xref:System.Globalization.Calendar> includono anche i campi statici che restituiscono il valore dell'era corrente.</span><span class="sxs-lookup"><span data-stu-id="3b83c-218">Individual <xref:System.Globalization.Calendar> classes also include static fields that return the value of the current era.</span></span> <span data-ttu-id="3b83c-219">Tali valori vengono elencati nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="3b83c-219">They are listed in the following table.</span></span>

| <span data-ttu-id="3b83c-220">Classe di calendario</span><span class="sxs-lookup"><span data-stu-id="3b83c-220">Calendar class</span></span>                                        | <span data-ttu-id="3b83c-221">Campo era corrente</span><span class="sxs-lookup"><span data-stu-id="3b83c-221">Current era field</span></span>                                                 |
| ----------------------------------------------------- | ----------------------------------------------------------------- |
| <xref:System.Globalization.ChineseLunisolarCalendar>  | <xref:System.Globalization.ChineseLunisolarCalendar.ChineseEra>   |
| <xref:System.Globalization.GregorianCalendar>         | <xref:System.Globalization.GregorianCalendar.ADEra>               |
| <xref:System.Globalization.HebrewCalendar>            | <xref:System.Globalization.HebrewCalendar.HebrewEra>              |
| <xref:System.Globalization.HijriCalendar>             | <xref:System.Globalization.HijriCalendar.HijriEra>                |
| <xref:System.Globalization.JapaneseLunisolarCalendar> | <xref:System.Globalization.JapaneseLunisolarCalendar.JapaneseEra> |
| <xref:System.Globalization.JulianCalendar>            | <xref:System.Globalization.JulianCalendar.JulianEra>              |
| <xref:System.Globalization.KoreanCalendar>            | <xref:System.Globalization.KoreanCalendar.KoreanEra>              |
| <xref:System.Globalization.KoreanLunisolarCalendar>   | <xref:System.Globalization.KoreanLunisolarCalendar.GregorianEra>  |
| <xref:System.Globalization.PersianCalendar>           | <xref:System.Globalization.PersianCalendar.PersianEra>            |
| <xref:System.Globalization.ThaiBuddhistCalendar>      | <xref:System.Globalization.ThaiBuddhistCalendar.ThaiBuddhistEra>  |
| <xref:System.Globalization.UmAlQuraCalendar>          | <xref:System.Globalization.UmAlQuraCalendar.UmAlQuraEra>          |

<span data-ttu-id="3b83c-222">Il nome corrispondente al numero dell'era specifico può essere recuperato passando il numero dell'era al metodo <xref:System.Globalization.DateTimeFormatInfo.GetEraName%2A?displayProperty=nameWithType> o <xref:System.Globalization.DateTimeFormatInfo.GetAbbreviatedEraName%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-222">The name that corresponds to a particular era number can be retrieved by passing the era number to the <xref:System.Globalization.DateTimeFormatInfo.GetEraName%2A?displayProperty=nameWithType> or <xref:System.Globalization.DateTimeFormatInfo.GetAbbreviatedEraName%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="3b83c-223">Nell'esempio seguente vengono chiamati questi metodi per recuperare le informazioni sul supporto dell'era nella classe <xref:System.Globalization.GregorianCalendar>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-223">The following example calls these methods to retrieve information about era support in the <xref:System.Globalization.GregorianCalendar> class.</span></span>

[!code-csharp[Conceptual.Calendars#7](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/instantiatewithera1.cs)]
[!code-vb[Conceptual.Calendars#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/instantiatewithera1.vb)]

<span data-ttu-id="3b83c-224">Inoltre, la stringa di formato di data e ora personalizzata "g" include il nome dell'era di un calendario nella rappresentazione di stringa di una data e ora.</span><span class="sxs-lookup"><span data-stu-id="3b83c-224">In addition, the "g" custom date and time format string includes a calendar's era name in the string representation of a date and time.</span></span> <span data-ttu-id="3b83c-225">Per altre informazioni, vedere [stringhe di formato di data e ora personalizzato](../../../docs/standard/base-types/custom-date-and-time-format-strings.md).</span><span class="sxs-lookup"><span data-stu-id="3b83c-225">For more information, see [Custom date and time format strings](../../../docs/standard/base-types/custom-date-and-time-format-strings.md).</span></span>

### <a name="instantiating-a-date-with-an-era"></a><span data-ttu-id="3b83c-226">Creare un'istanza di una data con un'era</span><span class="sxs-lookup"><span data-stu-id="3b83c-226">Instantiating a date with an era</span></span>

<span data-ttu-id="3b83c-227">Per le due <xref:System.Globalization.Calendar> le classi che supportano più ere, una data costituita da un determinato anno, mese e giorno del valore del mese può essere ambigua.</span><span class="sxs-lookup"><span data-stu-id="3b83c-227">For the two <xref:System.Globalization.Calendar> classes that support multiple eras, a date that consists of a particular year, month, and day of the month value can be ambiguous.</span></span> <span data-ttu-id="3b83c-228">Ad esempio, tutte le ere supportate dalla <xref:System.Globalization.JapaneseCalendar> hanno gli anni il cui numero è 1.</span><span class="sxs-lookup"><span data-stu-id="3b83c-228">For example, all eras supported by the <xref:System.Globalization.JapaneseCalendar> have years whose number is 1.</span></span> <span data-ttu-id="3b83c-229">In genere, se non viene specificata un'era, entrambi i metodi del calendario e di data e ora presuppongono che i valori appartengano all'era corrente.</span><span class="sxs-lookup"><span data-stu-id="3b83c-229">Ordinarily, if an era is not specified, both date and time and calendar methods assume that values belong to the current era.</span></span> <span data-ttu-id="3b83c-230">Questo vale per il <xref:System.DateTime.%23ctor%2A> e <xref:System.DateTimeOffset.%23ctor%2A> costruttori che includono parametri di tipo <xref:System.Globalization.Calendar>, nonché il [JapaneseCalendar.ToDateTime](xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)) e [JapaneseLunisolarCalendar.ToDateTime ](xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)) metodi.</span><span class="sxs-lookup"><span data-stu-id="3b83c-230">This is true of the <xref:System.DateTime.%23ctor%2A> and <xref:System.DateTimeOffset.%23ctor%2A> constructors that include parameters of type <xref:System.Globalization.Calendar>, as well as the [JapaneseCalendar.ToDateTime](xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)) and [JapaneseLunisolarCalendar.ToDateTime](xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)) methods.</span></span> <span data-ttu-id="3b83c-231">Nell'esempio seguente crea un'istanza di una data che rappresenta il 1 ° gennaio dell'anno secondo di un'epoca non specificata.</span><span class="sxs-lookup"><span data-stu-id="3b83c-231">The following example instantiates a date that represents January 1 of the second year of an unspecified era.</span></span> <span data-ttu-id="3b83c-232">Come output illustrato nell'esempio, la data viene interpretata come il secondo anno dell'era Heisei, era corrente al momento che questo esempio è stato eseguito.</span><span class="sxs-lookup"><span data-stu-id="3b83c-232">As the output from the example shows, the date is interpreted as the second year of the Heisei era, the current era at the time this example was executed.</span></span> <span data-ttu-id="3b83c-233">L'era, 平成, preceda l'anno nella stringa restituita dal <xref:System.DateTime.ToString(System.String,System.IFormatProvider)?displayProperty=nameWithType> (metodo) e corrisponde al 1 gennaio 1990, del calendario gregoriano.</span><span class="sxs-lookup"><span data-stu-id="3b83c-233">The era, 平成, precedes the year in the string returned by the <xref:System.DateTime.ToString(System.String,System.IFormatProvider)?displayProperty=nameWithType> method and corresponds to January 1, 1990, in the Gregorian calendar.</span></span> <span data-ttu-id="3b83c-234">(L'intervallo dell'era Heisei è dal 1989 a 2019 del calendario gregoriano).</span><span class="sxs-lookup"><span data-stu-id="3b83c-234">(The range of the Heisei era is from 1989 to 2019 in the Gregorian calendar.)</span></span>

[!code-csharp[A date in the current era](~/samples/snippets/standard/datetime/calendars/current-era/cs/program.cs)]
[!code-vb[A date in the current era](~/samples/snippets/standard/datetime/calendars/current-era/vb/program.vb)]

<span data-ttu-id="3b83c-235">Tuttavia, se viene modificato l'era, lo scopo di questo codice diventa ambiguo.</span><span class="sxs-lookup"><span data-stu-id="3b83c-235">However, if the era changes, the intent of this code becomes ambiguous.</span></span> <span data-ttu-id="3b83c-236">La data deve rappresentare il secondo anno dell'era corrente o deve rappresentare il secondo anno dell'era Heisei?</span><span class="sxs-lookup"><span data-stu-id="3b83c-236">Is the date intended to represent the second year of the current era, or is it intended to represent the second year of the Heisei era?</span></span> <span data-ttu-id="3b83c-237">Esistono due modi per evitare questa ambiguità:</span><span class="sxs-lookup"><span data-stu-id="3b83c-237">There are two ways to avoid this ambiguity:</span></span>

- <span data-ttu-id="3b83c-238">Creare un'istanza del valore di data e ora usando il valore predefinito <xref:System.Globalization.GregorianCalendar> classe.</span><span class="sxs-lookup"><span data-stu-id="3b83c-238">Instantiate the date and time value using the default <xref:System.Globalization.GregorianCalendar> class.</span></span> <span data-ttu-id="3b83c-239">È quindi possibile utilizzare il calendario giapponese o al calendario lunisolare giapponese per la rappresentazione di stringa di date, come illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="3b83c-239">You can then use the Japanese calendar or the Japanese Lunisolar calendar for the string representation of dates, as the following example shows.</span></span>

   [!code-csharp[Insantiating a Gregorian date](~/samples/snippets/standard/datetime/calendars/gregorian/cs/program.cs)]
   [!code-vb[Instantiating a Gregorian date](~/samples/snippets/standard/datetime/calendars/gregorian/vb/program.vb)]

- <span data-ttu-id="3b83c-240">Chiamare un metodo di data e ora che specifica in modo esplicito un'era.</span><span class="sxs-lookup"><span data-stu-id="3b83c-240">Call a date and time method that explicitly specifies an era.</span></span> <span data-ttu-id="3b83c-241">Questo include i metodi seguenti:</span><span class="sxs-lookup"><span data-stu-id="3b83c-241">This includes the following methods:</span></span>

   - <span data-ttu-id="3b83c-242">Il <xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)> metodo per il <xref:System.Globalization.JapaneseCalendar> o <xref:System.Globalization.JapaneseLunisolarCalendar> classe.</span><span class="sxs-lookup"><span data-stu-id="3b83c-242">The <xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)> method of the <xref:System.Globalization.JapaneseCalendar> or <xref:System.Globalization.JapaneseLunisolarCalendar> class.</span></span>

   - <span data-ttu-id="3b83c-243">Oggetto <xref:System.DateTime> oppure <xref:System.DateTimeOffset> analisi del metodo, ad esempio <xref:System.DateTime.Parse%2A>, <xref:System.DateTime.TryParse%2A>, <xref:System.DateTime.ParseExact%2A>, o <xref:System.DateTime.TryParseExact%2A>, che include la stringa da analizzare e, facoltativamente, un <xref:System.Globalization.DateTimeStyles> argomento se le impostazioni cultura correnti sono giapponese-Giappone (" ja-JP") e il calendario di tali impostazioni cultura di <xref:System.Globalization.JapaneseCalendar>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-243">A <xref:System.DateTime> or <xref:System.DateTimeOffset> parsing method, such as <xref:System.DateTime.Parse%2A>, <xref:System.DateTime.TryParse%2A>, <xref:System.DateTime.ParseExact%2A>, or <xref:System.DateTime.TryParseExact%2A>, that includes the string to be parsed and optionally a <xref:System.Globalization.DateTimeStyles> argument if the current culture is Japanese-Japan ("ja-JP") and that culture's calendar is the <xref:System.Globalization.JapaneseCalendar>.</span></span> <span data-ttu-id="3b83c-244">La stringa da analizzare deve includere l'era.</span><span class="sxs-lookup"><span data-stu-id="3b83c-244">The string to be parsed must include the era.</span></span>

   - <span data-ttu-id="3b83c-245">Oggetto <xref:System.DateTime> oppure <xref:System.DateTimeOffset> analisi del metodo che include un `provider` parametru typu <xref:System.IFormatProvider>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-245">A <xref:System.DateTime> or <xref:System.DateTimeOffset> parsing method that includes a `provider` parameter of type <xref:System.IFormatProvider>.</span></span> `provider` <span data-ttu-id="3b83c-246">deve essere un <xref:System.Globalization.CultureInfo> oggetto che rappresenta la lingua giapponese-Giappone ("ja-JP") il cui calendario corrente è <xref:System.Globalization.JapaneseCalendar> o una <xref:System.Globalization.DateTimeFormatInfo> cui <xref:System.Globalization.DateTimeFormatInfo.Calendar> è di proprietà <xref:System.Globalization.JapaneseCalendar>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-246">must be either a <xref:System.Globalization.CultureInfo> object that represents the Japanese-Japan ("ja-JP") culture whose current calendar is <xref:System.Globalization.JapaneseCalendar> or a <xref:System.Globalization.DateTimeFormatInfo> object whose <xref:System.Globalization.DateTimeFormatInfo.Calendar> property is <xref:System.Globalization.JapaneseCalendar>.</span></span> <span data-ttu-id="3b83c-247">La stringa da analizzare deve includere l'era.</span><span class="sxs-lookup"><span data-stu-id="3b83c-247">The string to be parsed must include the era.</span></span>

   <span data-ttu-id="3b83c-248">Nell'esempio seguente usa tre di questi metodi per creare un'istanza di una data e ora dell'era Meiji, cui è iniziata il 8 settembre 1868 ed è terminato il 29 luglio 1912.</span><span class="sxs-lookup"><span data-stu-id="3b83c-248">The following example uses three of these methods to instantiate a date and time in the Meiji era, which began on September 8, 1868, and ended on July 29, 1912.</span></span> 

   [!code-csharp[A date in a specified era](~/samples/snippets/standard/datetime/calendars/specify-era/cs/program.cs)]
   [!code-vb[A date in a specified era](~/samples/snippets/standard/datetime/calendars/specify-era/vb/program.vb)]

> [!TIP]
> <span data-ttu-id="3b83c-249">Quando si lavora con i calendari che supportano più ere, *sempre* usare la data del calendario gregoriano per creare un'istanza di una data o specificare l'era quando si crea un'istanza di una data e ora basato su tale calendario.</span><span class="sxs-lookup"><span data-stu-id="3b83c-249">When working with calendars that support multiple eras, *always* use the Gregorian date to instantiate a date, or specify the era when you instantiate a date and time based on that calendar.</span></span>

<span data-ttu-id="3b83c-250">Nello specificare un'era per il <xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)> metodo, si fornisce l'indice dell'era del calendario <xref:System.Globalization.Calendar.Eras> proprietà.</span><span class="sxs-lookup"><span data-stu-id="3b83c-250">In specifying an era to the <xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)> method, you provide the index of the era in the calendar's <xref:System.Globalization.Calendar.Eras> property.</span></span> <span data-ttu-id="3b83c-251">Per i calendari cui ere sono soggetti a modifiche, tuttavia, tali indici non sono valori costanti; l'era corrente è in corrispondenza dell'indice 0 e dell'era meno recente è in corrispondenza dell'indice `Eras.Length - 1`.</span><span class="sxs-lookup"><span data-stu-id="3b83c-251">For calendars whose eras are subject to change, however, these indexes are not constant values; the current era is at index 0, and the oldest era is at index `Eras.Length - 1`.</span></span> <span data-ttu-id="3b83c-252">Quando una nuova era viene aggiunto a un calendario, gli indici delle ere precedente aumenta di uno.</span><span class="sxs-lookup"><span data-stu-id="3b83c-252">When a new era is added to a calendar, the indexes of the previous eras increase by one.</span></span> <span data-ttu-id="3b83c-253">È possibile specificare l'indice era appropriato, come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="3b83c-253">You can supply the appropriate era index as follows:</span></span>

- <span data-ttu-id="3b83c-254">Per le date nell'era corrente, usare sempre il calendario <xref:System.Globalization.Calendar.CurrentEra> proprietà.</span><span class="sxs-lookup"><span data-stu-id="3b83c-254">For dates in the current era, always use the calendar's <xref:System.Globalization.Calendar.CurrentEra> property.</span></span>

- <span data-ttu-id="3b83c-255">Per le date in un'era specificata, usare il <xref:System.Globalization.DateTimeFormatInfo.GetEraName%2A?displayProperty=nameWithType> metodo per recuperare l'indice che corrisponde a un nome dell'era specificata.</span><span class="sxs-lookup"><span data-stu-id="3b83c-255">For dates in a specified era, use the <xref:System.Globalization.DateTimeFormatInfo.GetEraName%2A?displayProperty=nameWithType> method to retrieve the index that corresponds to a specified era name.</span></span> <span data-ttu-id="3b83c-256">Ciò richiede che il <xref:System.Globalization.JapaneseCalendar> essere il calendario corrente del <xref:System.Globalization.CultureInfo> oggetto che rappresenta le impostazioni cultura ja-JP.</span><span class="sxs-lookup"><span data-stu-id="3b83c-256">This requires that the <xref:System.Globalization.JapaneseCalendar> be the current calendar of the <xref:System.Globalization.CultureInfo> object that represents the ja-JP culture.</span></span>  <span data-ttu-id="3b83c-257">(Questa tecnica funziona per le <xref:System.Globalization.JapaneseLunisolarCalendar> , perché supporta le stesse ere come il <xref:System.Globalization.JapaneseCalendar>.) Nell'esempio precedente illustra questo approccio.</span><span class="sxs-lookup"><span data-stu-id="3b83c-257">(This technique works for the <xref:System.Globalization.JapaneseLunisolarCalendar> as well, since it supports the same eras as the <xref:System.Globalization.JapaneseCalendar>.) The previous example illustrates this approach.</span></span>

### <a name="calendars-eras-and-date-ranges-relaxed-range-checks"></a><span data-ttu-id="3b83c-258">Calendari ere e intervalli di date: Controlli del tipo "relaxed"</span><span class="sxs-lookup"><span data-stu-id="3b83c-258">Calendars, eras, and date ranges: Relaxed range checks</span></span>

<span data-ttu-id="3b83c-259">Molto probabilmente allo stesso modo calendari singoli sono supportati gli intervalli di date, ere nel <xref:System.Globalization.JapaneseCalendar> e <xref:System.Globalization.JapaneseLunisolarCalendar> classi sono supportati anche gli intervalli.</span><span class="sxs-lookup"><span data-stu-id="3b83c-259">Very much like individual calendars have supported date ranges, eras in the <xref:System.Globalization.JapaneseCalendar> and <xref:System.Globalization.JapaneseLunisolarCalendar> classes also have supported ranges.</span></span> <span data-ttu-id="3b83c-260">.NET usato in precedenza, era strict range controlla per garantire che una data specifica era stato compreso nell'intervallo di quell'epoca.</span><span class="sxs-lookup"><span data-stu-id="3b83c-260">Previously, .NET used strict era range checks to ensure that an era-specific date was within the range of that era.</span></span> <span data-ttu-id="3b83c-261">Vale a dire, se una data è compreso nell'intervallo dell'era specificata, il metodo genera un <xref:System.ArgumentOutOfRangeException>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-261">That is, if a date is outside of the range of the specified era, the method throws an <xref:System.ArgumentOutOfRangeException>.</span></span> <span data-ttu-id="3b83c-262">.NET Usa attualmente, il controllo tipo "relaxed" splicing per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="3b83c-262">Currently, .NET uses relaxed ranged checking by default.</span></span> <span data-ttu-id="3b83c-263">Gli aggiornamenti a tutte le versioni di .NET introdotta era di tipo "relaxed" variare il controllo. il tentativo di creare un'istanza di una data era specifiche che è compreso nell'intervallo dell'era specificata "overflow" in seguito era e viene generata alcuna eccezione.</span><span class="sxs-lookup"><span data-stu-id="3b83c-263">Updates to all versions of .NET introduced relaxed era range checks; the attempt to instantiate an era-specific date that is outside the range of the specified era "overflows" into the following era, and no exception is thrown.</span></span>

<span data-ttu-id="3b83c-264">Nell'esempio seguente tenta di creare un'istanza di una data dell'anno dell'era Showa, cui è iniziata il 25 dicembre 1926 ed è terminato il 7 gennaio 1989 65 °.</span><span class="sxs-lookup"><span data-stu-id="3b83c-264">The following example attempts to instantiate a date in the 65th year of the Showa era, which began on December 25, 1926 and ended on January 7, 1989.</span></span> <span data-ttu-id="3b83c-265">La data corrispondente al 9 gennaio 1990, che è compreso nell'intervallo dell'era Showa nel <xref:System.Globalization.JapaneseCalendar>.</span><span class="sxs-lookup"><span data-stu-id="3b83c-265">This date corresponds to January 9, 1990, which is outside the range of the Showa era in the <xref:System.Globalization.JapaneseCalendar>.</span></span> <span data-ttu-id="3b83c-266">Come illustrato nell'output di esempio, la data visualizzata nell'esempio è il 9 gennaio 1990, nel secondo anno dell'era Heisei.</span><span class="sxs-lookup"><span data-stu-id="3b83c-266">As the output from the example illustrates, the date displayed by the example is January 9, 1990, in the second year of the Heisei era.</span></span>

   [!code-csharp[Relaxed range checks](~/samples/snippets/standard/datetime/calendars/relaxed-range/cs/program.cs)]
   [!code-vb[Relaxed range checks](~/samples/snippets/standard/datetime/calendars/relaxed-range/vb/program.vb)]

<span data-ttu-id="3b83c-267">Se i controlli di tipo "relaxed" intervallo sono indesiderati, è possibile ripristinare i controlli del tipo strict in diversi modi, a seconda della versione di .NET in cui viene eseguita l'applicazione:</span><span class="sxs-lookup"><span data-stu-id="3b83c-267">If relaxed range checks are undesirable, you can restore strict range checks in a number of ways, depending on the version of .NET on which your application is running:</span></span>

- <span data-ttu-id="3b83c-268">**.NET core:** È possibile aggiungere il codice seguente il *. netcore.runtime.json* file di configurazione:</span><span class="sxs-lookup"><span data-stu-id="3b83c-268">**.NET Core:** You can add the following to the *.netcore.runtime.json* config file:</span></span>

   ```json
   "runtimeOptions": {
      "configProperties": {
         "Switch.System.Globalization.EnforceJapaneseEraYearRanges": true
      } 
   }
   ```

- <span data-ttu-id="3b83c-269">**.NET framework 4.6 o versione successiva:** È possibile impostare l'opzione di AppContext seguente:</span><span class="sxs-lookup"><span data-stu-id="3b83c-269">**.NET Framework 4.6 or later:** You can set the following AppContext switch:</span></span>

   ```xml
   <?xml version="1.0" encoding="utf-8"?>
   <configuration>
     <runtime>
       <AppContextSwitchOverrides value="Switch.System.Globalization.EnforceJapaneseEraYearRanges=true" />
     </runtime>
   </configuration>
   ```

- <span data-ttu-id="3b83c-270">**.NET framework 4.5.2 o versioni precedenti:** È possibile impostare il valore del Registro di sistema seguente:</span><span class="sxs-lookup"><span data-stu-id="3b83c-270">**.NET Framework 4.5.2 or earlier:** You can set the following registry value:</span></span>

   |  |  |
   |--|--|
   |<span data-ttu-id="3b83c-271">Chiave</span><span class="sxs-lookup"><span data-stu-id="3b83c-271">Key</span></span> | <span data-ttu-id="3b83c-272">HKEY_LOCAL_MACHINE\Software\Microsoft.NETFramework\AppContext</span><span class="sxs-lookup"><span data-stu-id="3b83c-272">HKEY_LOCAL_MACHINE\Software\Microsoft.NETFramework\AppContext</span></span> |
   |<span data-ttu-id="3b83c-273">Nome</span><span class="sxs-lookup"><span data-stu-id="3b83c-273">Name</span></span> | <span data-ttu-id="3b83c-274">Switch.System.Globalization.EnforceJapaneseEraYearRanges</span><span class="sxs-lookup"><span data-stu-id="3b83c-274">Switch.System.Globalization.EnforceJapaneseEraYearRanges</span></span> |
   |<span data-ttu-id="3b83c-275">Tipo</span><span class="sxs-lookup"><span data-stu-id="3b83c-275">Type</span></span> | <span data-ttu-id="3b83c-276">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="3b83c-276">REG_SZ</span></span> |
   |<span data-ttu-id="3b83c-277">Value</span><span class="sxs-lookup"><span data-stu-id="3b83c-277">Value</span></span> | <span data-ttu-id="3b83c-278">1</span><span class="sxs-lookup"><span data-stu-id="3b83c-278">1</span></span> |

<span data-ttu-id="3b83c-279">Con i controlli strict intervallo abilitati, nell'esempio precedente genera un <xref:System.ArgumentOutOfRangeException> e visualizza l'output seguente:</span><span class="sxs-lookup"><span data-stu-id="3b83c-279">With strict range checks enabled, the previous example throws an <xref:System.ArgumentOutOfRangeException> and displays the following output:</span></span>

```console
Unhandled Exception: System.ArgumentOutOfRangeException: Valid values are between 1 and 64, inclusive.
Parameter name: year
   at System.Globalization.GregorianCalendarHelper.GetYearOffset(Int32 year, Int32 era, Boolean throwOnError)
   at System.Globalization.GregorianCalendarHelper.ToDateTime(Int32 year, Int32 month, Int32 day, Int32 hour, Int32 minute, Int32 second, Int32 millisecond, Int32 era)
   at Example.Main()
```

### <a name="representing-dates-in-calendars-with-multiple-eras"></a><span data-ttu-id="3b83c-280">Rappresentazione delle date in calendari con più ere</span><span class="sxs-lookup"><span data-stu-id="3b83c-280">Representing dates in calendars with multiple eras</span></span>

<span data-ttu-id="3b83c-281">Se un oggetto <xref:System.Globalization.Calendar> supporta le ere ed è il calendario corrente di un oggetto <xref:System.Globalization.CultureInfo>, l'era viene inclusa nella rappresentazione di stringa di un valore di data e ora per i modelli di data e ora completa, di data estesa e di data breve.</span><span class="sxs-lookup"><span data-stu-id="3b83c-281">If a <xref:System.Globalization.Calendar> object supports eras and is the current calendar of a <xref:System.Globalization.CultureInfo> object, the era is included in the string representation of a date and time value for the full date and time, long date, and short date patterns.</span></span> <span data-ttu-id="3b83c-282">Nell'esempio seguente vengono visualizzati questi modelli di data quando le impostazioni cultura correnti sono quelle giapponesi (Giappone) e il calendario corrente è il calendario giapponese.</span><span class="sxs-lookup"><span data-stu-id="3b83c-282">The following example displays these date patterns when the current culture is Japan (Japanese) and the current calendar is the Japanese calendar.</span></span>

[!code-csharp[Conceptual.Calendars#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/formatstrings1.cs#8)]
[!code-vb[Conceptual.Calendars#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/formatstrings1.vb#8)]

> [!WARNING]
> <span data-ttu-id="3b83c-283">Il <xref:System.Globalization.JapaneseCalendar> classe è l'unica classe di calendario in .NET che supporta le date in più ere e che può essere il calendario corrente di un <xref:System.Globalization.CultureInfo> object - in particolare, di un <xref:System.Globalization.CultureInfo> oggetto che rappresenta le impostazioni cultura giapponesi (Giappone).</span><span class="sxs-lookup"><span data-stu-id="3b83c-283">The <xref:System.Globalization.JapaneseCalendar> class is the only calendar class in .NET that both supports dates in more than one era and that can be the current calendar of a <xref:System.Globalization.CultureInfo> object - specifically, of a <xref:System.Globalization.CultureInfo> object that represents the Japanese (Japan) culture.</span></span>

<span data-ttu-id="3b83c-284">Per tutti i calendari l'identificatore di formato personalizzato "g" include l'era nella stringa di risultato.</span><span class="sxs-lookup"><span data-stu-id="3b83c-284">For all calendars, the "g" custom format specifier includes the era in the result string.</span></span> <span data-ttu-id="3b83c-285">Nell'esempio seguente viene utilizzata la stringa di formato personalizzata "MM-dd-yyyy g" per includere l'era nella stringa di risultato quando il calendario corrente è il calendario gregoriano.</span><span class="sxs-lookup"><span data-stu-id="3b83c-285">The following example uses the "MM-dd-yyyy g" custom format string to include the era in the result string when the current calendar is the Gregorian calendar.</span></span>

[!code-csharp[Conceptual.Calendars#9](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/formatstrings2.cs#9)]
[!code-vb[Conceptual.Calendars#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/formatstrings2.vb#9)]

<span data-ttu-id="3b83c-286">Nei casi in cui la rappresentazione di stringa di una data viene espressa in un calendario che non è il calendario corrente, la classe <xref:System.Globalization.Calendar> include un metodo <xref:System.Globalization.Calendar.GetEra%2A?displayProperty=nameWithType> che può essere utilizzato con i metodi <xref:System.Globalization.Calendar.GetYear%2A?displayProperty=nameWithType>, <xref:System.Globalization.Calendar.GetMonth%2A?displayProperty=nameWithType> e <xref:System.Globalization.Calendar.GetDayOfMonth%2A?displayProperty=nameWithType> per indicare in modo non ambiguo una data, nonché l'era a cui appartiene.</span><span class="sxs-lookup"><span data-stu-id="3b83c-286">In cases where the string representation of a date is expressed in a calendar that is not the current calendar, the <xref:System.Globalization.Calendar> class includes a <xref:System.Globalization.Calendar.GetEra%2A?displayProperty=nameWithType> method that can be used along with the <xref:System.Globalization.Calendar.GetYear%2A?displayProperty=nameWithType>, <xref:System.Globalization.Calendar.GetMonth%2A?displayProperty=nameWithType>, and <xref:System.Globalization.Calendar.GetDayOfMonth%2A?displayProperty=nameWithType> methods to unambiguously indicate a date as well as the era to which it belongs.</span></span> <span data-ttu-id="3b83c-287">Nell'esempio seguente viene utilizzata la classe <xref:System.Globalization.JapaneseLunisolarCalendar> per fornire un'illustrazione.</span><span class="sxs-lookup"><span data-stu-id="3b83c-287">The following example uses the <xref:System.Globalization.JapaneseLunisolarCalendar> class to provide an illustration.</span></span> <span data-ttu-id="3b83c-288">Si noti, tuttavia, che se si include un nome significativo o un'abbreviazione anziché un intero per l'era nella stringa di risultato, è necessario creare un'istanza di un oggetto <xref:System.Globalization.DateTimeFormatInfo> e rendere <xref:System.Globalization.JapaneseCalendar> il calendario corrente.</span><span class="sxs-lookup"><span data-stu-id="3b83c-288">However, note that including a meaningful name or abbreviation instead of an integer for the era in the result string requires that you instantiate a <xref:System.Globalization.DateTimeFormatInfo> object and make <xref:System.Globalization.JapaneseCalendar> its current calendar.</span></span> <span data-ttu-id="3b83c-289">Il calendario <xref:System.Globalization.JapaneseLunisolarCalendar> non può essere il calendario corrente delle impostazioni cultura, ma in questo caso i due calendari condividono le stesse ere.</span><span class="sxs-lookup"><span data-stu-id="3b83c-289">(The <xref:System.Globalization.JapaneseLunisolarCalendar> calendar cannot be the current calendar of any culture, but in this case the two calendars share the same eras.)</span></span>

[!code-csharp[Conceptual.Calendars#10](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/formatstrings3.cs#10)]
[!code-vb[Conceptual.Calendars#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/formatstrings3.vb#10)]

<span data-ttu-id="3b83c-290">Nel calendario giapponese, il primo anno di un'epoca viene chiamato Gannen (元年).</span><span class="sxs-lookup"><span data-stu-id="3b83c-290">In the Japanese calendars, the first year of an era is called Gannen (元年).</span></span> <span data-ttu-id="3b83c-291">Ad esempio, anziché Heisei 1, il primo anno dell'era Heisei può essere descritta come Heisei Gannen.</span><span class="sxs-lookup"><span data-stu-id="3b83c-291">For example, instead of Heisei 1, the first year of the Heisei era can be described as Heisei Gannen.</span></span> <span data-ttu-id="3b83c-292">.NET adotta questa convenzione nelle operazioni per le date di formattazione e tempi di formattato con il seguente standard o personalizzata formato data e ora le stringhe quando vengono usati con un <xref:System.Globalization.CultureInfo> oggetto che rappresenta la lingua giapponese-Giappone ("ja-JP") con i <xref:System.Globalization.JapaneseCalendar> classe:</span><span class="sxs-lookup"><span data-stu-id="3b83c-292">.NET adopts this convention in formatting operations for dates and times formatted with the following standard or custom date and time format strings when they are used with a <xref:System.Globalization.CultureInfo> object that represents the Japanese-Japan ("ja-JP") culture with the <xref:System.Globalization.JapaneseCalendar> class:</span></span>

- <span data-ttu-id="3b83c-293">[Il modello di data estesa](../base-types/standard-date-and-time-format-strings.md#LongDate), indicato da "D" Data e ora di stringa di formato standard.</span><span class="sxs-lookup"><span data-stu-id="3b83c-293">[The long date pattern](../base-types/standard-date-and-time-format-strings.md#LongDate), indicated by the "D" standard date and time format string.</span></span>
- <span data-ttu-id="3b83c-294">[La data completa ora estesa pattern](../base-types/standard-date-and-time-format-strings.md#FullDateLongTime), indicato da "F" Data e ora di stringa di formato standard.</span><span class="sxs-lookup"><span data-stu-id="3b83c-294">[The full date long time pattern](../base-types/standard-date-and-time-format-strings.md#FullDateLongTime), indicated by the "F" standard date and time format string.</span></span>
- <span data-ttu-id="3b83c-295">[Il formato di ora breve data completa](../base-types/standard-date-and-time-format-strings.md#FullDateShortTime), indicato da "f" Data e ora di stringa di formato standard.</span><span class="sxs-lookup"><span data-stu-id="3b83c-295">[The full date short time pattern](../base-types/standard-date-and-time-format-strings.md#FullDateShortTime), indicated by the "f" standard date and time format string.</span></span>
- <span data-ttu-id="3b83c-296">[Il modello di anno/mese](../base-types/standard-date-and-time-format-strings.md#YearMonth), indicato dalla Y "o"y"Data e ora standard stringa di formato.</span><span class="sxs-lookup"><span data-stu-id="3b83c-296">[The year/month pattern](../base-types/standard-date-and-time-format-strings.md#YearMonth), indicated by the Y" or "y" standard date and time format string.</span></span>
- <span data-ttu-id="3b83c-297">[La "ggy '年'" o "ggy年" [stringa di formato data e ora personalizzato](../base-types/custom-date-and-time-format-strings.md).</span><span class="sxs-lookup"><span data-stu-id="3b83c-297">[The "ggy'年'" or "ggy年" [custom date and time format string](../base-types/custom-date-and-time-format-strings.md).</span></span>

<span data-ttu-id="3b83c-298">Ad esempio, nell'esempio seguente viene visualizzata una data nel primo anno dell'era Heisei nel <xref:System.Globalization.JapaneseCalendar> .</span><span class="sxs-lookup"><span data-stu-id="3b83c-298">For example, the following example displays a date in the first year of the Heisei era in the <xref:System.Globalization.JapaneseCalendar> .</span></span>

   [!code-csharp[gannen](~/samples/snippets/standard/datetime/calendars/gannen/cs/program.cs)]
   [!code-vb[gannen](~/samples/snippets/standard/datetime/calendars/gannen/vb/gannen-fmt.vb)]

<span data-ttu-id="3b83c-299">Se questo comportamento è indesiderato nelle operazioni di formattazione, è possibile ripristinare il comportamento precedente, che rappresenta sempre il primo anno di un'epoca come "1" anziché "Gannen", eseguendo le operazioni seguenti, a seconda della versione di .NET:</span><span class="sxs-lookup"><span data-stu-id="3b83c-299">If this behavior is undesirable in formatting operations, you can restore the previous behavior, which always represents the first year of an era as “1” rather than “Gannen”, by doing the following, depending on the version of .NET:</span></span>

- <span data-ttu-id="3b83c-300">**.NET core:** È possibile aggiungere il codice seguente il *. netcore.runtime.json* file di configurazione:</span><span class="sxs-lookup"><span data-stu-id="3b83c-300">**.NET Core:** You can add the following to the *.netcore.runtime.json* config file:</span></span>

   ```json
   "runtimeOptions": {
      "configProperties": {
         "Switch.System.Globalization.FormatJapaneseFirstYearAsANumber": true
      } 
   }
   ```

- <span data-ttu-id="3b83c-301">**.NET framework 4.6 o versione successiva:** È possibile impostare l'opzione di AppContext seguente:</span><span class="sxs-lookup"><span data-stu-id="3b83c-301">**.NET Framework 4.6 or later:** You can set the following AppContext switch:</span></span>

   ```xml
   <?xml version="1.0" encoding="utf-8"?>
   <configuration>
     <runtime>
       <AppContextSwitchOverrides value="Switch.System.Globalization.FormatJapaneseFirstYearAsANumber=true" />
     </runtime>
   </configuration>
   ```

- <span data-ttu-id="3b83c-302">**.NET framework 4.5.2 o versioni precedenti:** È possibile impostare il valore del Registro di sistema seguente:</span><span class="sxs-lookup"><span data-stu-id="3b83c-302">**.NET Framework 4.5.2 or earlier:** You can set the following registry value:</span></span>

   |  |  |
   |--|--|
   |<span data-ttu-id="3b83c-303">Chiave</span><span class="sxs-lookup"><span data-stu-id="3b83c-303">Key</span></span> | <span data-ttu-id="3b83c-304">HKEY_LOCAL_MACHINE\Software\Microsoft.NETFramework\AppContext</span><span class="sxs-lookup"><span data-stu-id="3b83c-304">HKEY_LOCAL_MACHINE\Software\Microsoft.NETFramework\AppContext</span></span> |
   |<span data-ttu-id="3b83c-305">Nome</span><span class="sxs-lookup"><span data-stu-id="3b83c-305">Name</span></span> | <span data-ttu-id="3b83c-306">Switch.System.Globalization.FormatJapaneseFirstYearAsANumber</span><span class="sxs-lookup"><span data-stu-id="3b83c-306">Switch.System.Globalization.FormatJapaneseFirstYearAsANumber</span></span> |
   |<span data-ttu-id="3b83c-307">Tipo</span><span class="sxs-lookup"><span data-stu-id="3b83c-307">Type</span></span> | <span data-ttu-id="3b83c-308">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="3b83c-308">REG_SZ</span></span> |
   |<span data-ttu-id="3b83c-309">Value</span><span class="sxs-lookup"><span data-stu-id="3b83c-309">Value</span></span> | <span data-ttu-id="3b83c-310">1</span><span class="sxs-lookup"><span data-stu-id="3b83c-310">1</span></span> |

<span data-ttu-id="3b83c-311">Grazie al supporto gannen nelle operazioni disabilitate di formattazione, nell'esempio precedente consente di visualizzare l'output seguente:</span><span class="sxs-lookup"><span data-stu-id="3b83c-311">With gannen support in formatting operations disabled, the previous example displays the following output:</span></span>

```console
Japanese calendar date: 平成1年8月18日 (Gregorian: Friday, August 18, 1989)
```

<span data-ttu-id="3b83c-312">.NET è stata aggiornata anche in modo che data e ora le operazioni di analisi supporta le stringhe che contengono l'anno rappresentata come "1" o Gannen.</span><span class="sxs-lookup"><span data-stu-id="3b83c-312">.NET has also been updated so that date and time parsing operations support strings that contain the year represented as either "1" or Gannen.</span></span> <span data-ttu-id="3b83c-313">Anche se non è necessario eseguire questa operazione, è possibile ripristinare il comportamento precedente a riconosce solo "1" come il primo anno di un'epoca.</span><span class="sxs-lookup"><span data-stu-id="3b83c-313">Although you should not need to do this, you can restore the previous behavior to recognizes only “1” as the first year of an era.</span></span> <span data-ttu-id="3b83c-314">È possibile farlo come indicato di seguito, a seconda della versione di .NET:</span><span class="sxs-lookup"><span data-stu-id="3b83c-314">You can do this as follows, depending on the version of .NET:</span></span>

- <span data-ttu-id="3b83c-315">**.NET core:** È possibile aggiungere il codice seguente il *. netcore.runtime.json* file di configurazione:</span><span class="sxs-lookup"><span data-stu-id="3b83c-315">**.NET Core:** You can add the following to the *.netcore.runtime.json* config file:</span></span>

   ```json
   "runtimeOptions": {
      "configProperties": {
         "Switch.System.Globalization.EnforceLegacyJapaneseDateParsing": true
      } 
   }
   ```

- <span data-ttu-id="3b83c-316">**.NET framework 4.6 o versione successiva:** È possibile impostare l'opzione di AppContext seguente:</span><span class="sxs-lookup"><span data-stu-id="3b83c-316">**.NET Framework 4.6 or later:** You can set the following AppContext switch:</span></span>

   ```xml
   <?xml version="1.0" encoding="utf-8"?>
   <configuration>
     <runtime>
       <AppContextSwitchOverrides value="Switch.System.Globalization.EnforceLegacyJapaneseDateParsing=true" />
     </runtime>
   </configuration>
   ```

- <span data-ttu-id="3b83c-317">**.NET framework 4.5.2 o versioni precedenti:** È possibile impostare il valore del Registro di sistema seguente:</span><span class="sxs-lookup"><span data-stu-id="3b83c-317">**.NET Framework 4.5.2 or earlier:** You can set the following registry value:</span></span>

   |  |  |
   |--|--|  
   |<span data-ttu-id="3b83c-318">Chiave</span><span class="sxs-lookup"><span data-stu-id="3b83c-318">Key</span></span> | <span data-ttu-id="3b83c-319">HKEY_LOCAL_MACHINE\Software\Microsoft.NETFramework\AppContext</span><span class="sxs-lookup"><span data-stu-id="3b83c-319">HKEY_LOCAL_MACHINE\Software\Microsoft.NETFramework\AppContext</span></span> |
   |<span data-ttu-id="3b83c-320">Nome</span><span class="sxs-lookup"><span data-stu-id="3b83c-320">Name</span></span> | <span data-ttu-id="3b83c-321">Switch.System.Globalization.EnforceLegacyJapaneseDateParsing</span><span class="sxs-lookup"><span data-stu-id="3b83c-321">Switch.System.Globalization.EnforceLegacyJapaneseDateParsing</span></span> |
   |<span data-ttu-id="3b83c-322">Tipo</span><span class="sxs-lookup"><span data-stu-id="3b83c-322">Type</span></span> | <span data-ttu-id="3b83c-323">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="3b83c-323">REG_SZ</span></span> |
   |<span data-ttu-id="3b83c-324">Value</span><span class="sxs-lookup"><span data-stu-id="3b83c-324">Value</span></span> | <span data-ttu-id="3b83c-325">1</span><span class="sxs-lookup"><span data-stu-id="3b83c-325">1</span></span> | 

## <a name="see-also"></a><span data-ttu-id="3b83c-326">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="3b83c-326">See also</span></span>

- [<span data-ttu-id="3b83c-327">Procedura: Visualizzare le date in calendari non gregoriani</span><span class="sxs-lookup"><span data-stu-id="3b83c-327">How to: Display dates in non-Gregorian calendars</span></span>](../../../docs/standard/base-types/how-to-display-dates-in-non-gregorian-calendars.md)
- [<span data-ttu-id="3b83c-328">Esempio: Utilità di intervallo settimana di calendario</span><span class="sxs-lookup"><span data-stu-id="3b83c-328">Sample: Calendar week range utility</span></span>](https://code.msdn.microsoft.com/NET-Framework-4-Calendar-3360a84a)
- [<span data-ttu-id="3b83c-329">Classe di calendario</span><span class="sxs-lookup"><span data-stu-id="3b83c-329">Calendar class</span></span>](xref:System.Globalization.Calendar)
