---
title: 'Procedura: creare fusi orari con regole di regolazione'
ms.date: 04/10/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- time zones [.NET Framework], creating
- time zones [.NET Framework], and adjustment rules
- adjustment rule [.NET Framework]
ms.assetid: c52ef192-13a9-435f-8015-3b12eae8c47c
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 80a5c04f7807638a4a8b114828083835f348ac08
ms.sourcegitcommit: 6eac9a01ff5d70c6d18460324c016a3612c5e268
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/17/2018
ms.locfileid: "45696094"
---
# <a name="how-to-create-time-zones-with-adjustment-rules"></a><span data-ttu-id="a01d0-102">Procedura: creare fusi orari con regole di regolazione</span><span class="sxs-lookup"><span data-stu-id="a01d0-102">How to: Create time zones with adjustment rules</span></span>

<span data-ttu-id="a01d0-103">Le informazioni del fuso orario preciso richiesto da un'applicazione potrebbero non essere presente in un sistema specifico per diversi motivi:</span><span class="sxs-lookup"><span data-stu-id="a01d0-103">The precise time zone information that is required by an application may not be present on a particular system for several reasons:</span></span>

* <span data-ttu-id="a01d0-104">Il fuso orario non è mai stato definito nel Registro di sistema locale.</span><span class="sxs-lookup"><span data-stu-id="a01d0-104">The time zone has never been defined in the local system's registry.</span></span>

* <span data-ttu-id="a01d0-105">I dati sul fuso orario sono stati modificati o rimossi dal Registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="a01d0-105">Data about the time zone has been modified or removed from the registry.</span></span>

* <span data-ttu-id="a01d0-106">Il fuso orario non dispone di informazioni accurate sulle regolazioni del fuso orario per un determinato periodo storico.</span><span class="sxs-lookup"><span data-stu-id="a01d0-106">The time zone does not have accurate information about time zone adjustments for a particular historic period.</span></span>

<span data-ttu-id="a01d0-107">In questi casi, è possibile chiamare il <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> metodo per definire il fuso orario richiesto dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a01d0-107">In these cases, you can call the <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> method to define the time zone required by your application.</span></span> <span data-ttu-id="a01d0-108">È possibile usare gli overload di questo metodo per creare un fuso orario con o senza regole di regolazione.</span><span class="sxs-lookup"><span data-stu-id="a01d0-108">You can use the overloads of this method to create a time zone with or without adjustment rules.</span></span> <span data-ttu-id="a01d0-109">Se il fuso orario supporta l'ora legale, è possibile definire le regolazioni con entrambe le regole di rettifica fissa o mobile.</span><span class="sxs-lookup"><span data-stu-id="a01d0-109">If the time zone supports daylight saving time, you can define adjustments with either fixed or floating adjustment rules.</span></span> <span data-ttu-id="a01d0-110">(Per le definizioni di questi termini, vedere la sezione "Terminologia fuso orario" nella [Panoramica sul fuso orario](../../../docs/standard/datetime/time-zone-overview.md).)</span><span class="sxs-lookup"><span data-stu-id="a01d0-110">(For definitions of these terms, see the "Time Zone Terminology" section in [Time zone overview](../../../docs/standard/datetime/time-zone-overview.md).)</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a01d0-111">Fusi orari personalizzati creati tramite la chiamata di <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> (metodo) non vengono aggiunti al Registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="a01d0-111">Custom time zones created by calling the <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> method are not added to the registry.</span></span> <span data-ttu-id="a01d0-112">Al contrario, è possibile accedervi solo tramite il riferimento all'oggetto restituito dal <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> chiamata al metodo.</span><span class="sxs-lookup"><span data-stu-id="a01d0-112">Instead, they can be accessed only through the object reference returned by the <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> method call.</span></span>

<span data-ttu-id="a01d0-113">In questo argomento viene illustrato come creare un fuso orario con regole di regolazione.</span><span class="sxs-lookup"><span data-stu-id="a01d0-113">This topic shows how to create a time zone with adjustment rules.</span></span> <span data-ttu-id="a01d0-114">Per creare un fuso orario che non supporta regole di regolazione dell'ora legale, vedere [procedura: creare fusi orari senza regole di regolazione](../../../docs/standard/datetime/create-time-zones-without-adjustment-rules.md).</span><span class="sxs-lookup"><span data-stu-id="a01d0-114">To create a time zone that does not support daylight saving time adjustment rules, see [How to: Create Time Zones Without Adjustment Rules](../../../docs/standard/datetime/create-time-zones-without-adjustment-rules.md).</span></span>

### <a name="to-create-a-time-zone-with-floating-adjustment-rules"></a><span data-ttu-id="a01d0-115">Per creare un fuso orario con regole di rettifica mobili</span><span class="sxs-lookup"><span data-stu-id="a01d0-115">To create a time zone with floating adjustment rules</span></span>

1. <span data-ttu-id="a01d0-116">Per ogni transizione (che è, per ogni transizione da e verso l'ora solare in un intervallo di tempo specifico), eseguire le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="a01d0-116">For each adjustment (that is, for each transition away from and back to standard time over a particular time interval), do the following:</span></span>

    1. <span data-ttu-id="a01d0-117">Definire il tempo di transizione iniziale per la regolazione del fuso orario.</span><span class="sxs-lookup"><span data-stu-id="a01d0-117">Define the starting transition time for the time zone adjustment.</span></span>

       <span data-ttu-id="a01d0-118">È necessario chiamare il <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> metodo e passare un <xref:System.DateTime> valore che definisce il tempo di transizione, valore integer che definisce il mese della transizione, valore integer che definisce la settimana in cui si verifica la transizione, e un <xref:System.DayOfWeek> valore che definisce il giorno della settimana in cui si verifica la transizione.</span><span class="sxs-lookup"><span data-stu-id="a01d0-118">You must call the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> method and pass it a <xref:System.DateTime> value that defines the time of the transition, an integer value that defines the month of the transition, an integer value that defines the week on which the transition occurs, and a <xref:System.DayOfWeek> value that defines the day of the week on which the transition occurs.</span></span> <span data-ttu-id="a01d0-119">Crea un'istanza di questa chiamata al metodo un <xref:System.TimeZoneInfo.TransitionTime> oggetto.</span><span class="sxs-lookup"><span data-stu-id="a01d0-119">This method call instantiates a <xref:System.TimeZoneInfo.TransitionTime> object.</span></span>

    2. <span data-ttu-id="a01d0-120">Definire il tempo di transizione finale per la regolazione del fuso orario.</span><span class="sxs-lookup"><span data-stu-id="a01d0-120">Define the ending transition time for the time zone adjustment.</span></span> <span data-ttu-id="a01d0-121">Questa operazione richiede un'altra chiamata al <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> (metodo).</span><span class="sxs-lookup"><span data-stu-id="a01d0-121">This requires another call to the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="a01d0-122">Questa chiamata al metodo crea un'istanza di un secondo <xref:System.TimeZoneInfo.TransitionTime> oggetto.</span><span class="sxs-lookup"><span data-stu-id="a01d0-122">This method call instantiates a second <xref:System.TimeZoneInfo.TransitionTime> object.</span></span>

    3. <span data-ttu-id="a01d0-123">Chiamare il <xref:System.TimeZoneInfo.AdjustmentRule.CreateAdjustmentRule%2A> (metodo) e passarlo efficace date di inizio e fine di regolazione, un' <xref:System.TimeSpan> che definisce la quantità di tempo di transizione e le due <xref:System.TimeZoneInfo.TransitionTime> oggetti che definiscono quando le transizioni da e verso legale ora si verificano.</span><span class="sxs-lookup"><span data-stu-id="a01d0-123">Call the <xref:System.TimeZoneInfo.AdjustmentRule.CreateAdjustmentRule%2A> method and pass it the effective start and end dates of the adjustment, a <xref:System.TimeSpan> object that defines the amount of time in the transition, and the two <xref:System.TimeZoneInfo.TransitionTime> objects that define when the transitions to and from daylight saving time occur.</span></span> <span data-ttu-id="a01d0-124">Crea un'istanza di questa chiamata al metodo un <xref:System.TimeZoneInfo.AdjustmentRule> oggetto.</span><span class="sxs-lookup"><span data-stu-id="a01d0-124">This method call instantiates a <xref:System.TimeZoneInfo.AdjustmentRule> object.</span></span>

    4. <span data-ttu-id="a01d0-125">Assegnare il <xref:System.TimeZoneInfo.AdjustmentRule> a una matrice di oggetti <xref:System.TimeZoneInfo.AdjustmentRule> oggetti.</span><span class="sxs-lookup"><span data-stu-id="a01d0-125">Assign the <xref:System.TimeZoneInfo.AdjustmentRule> object to an array of <xref:System.TimeZoneInfo.AdjustmentRule> objects.</span></span>

2. <span data-ttu-id="a01d0-126">Definire nome visualizzato del fuso orario.</span><span class="sxs-lookup"><span data-stu-id="a01d0-126">Define the time zone's display name.</span></span> <span data-ttu-id="a01d0-127">Il nome visualizzato segue un formato piuttosto standard in cui è racchiuso tra parentesi offset del fuso orario dall'ora Coordinated Universal Time (UTC) ed è seguito da una stringa che identifica il fuso orario, una o più delle città nel fuso orario o uno più il cou Mo o aree geografiche nel fuso orario.</span><span class="sxs-lookup"><span data-stu-id="a01d0-127">The display name follows a fairly standard format in which the time zone's offset from Coordinated Universal Time (UTC) is enclosed in parentheses and is followed by a string that identifies the time zone, one or more of the cities in the time zone, or one or more of the countries or regions in the time zone.</span></span>

3. <span data-ttu-id="a01d0-128">Definire il nome dell'ora solare del fuso orario.</span><span class="sxs-lookup"><span data-stu-id="a01d0-128">Define the name of the time zone's standard time.</span></span> <span data-ttu-id="a01d0-129">In genere, questa stringa viene utilizzata anche come identificatore del fuso orario.</span><span class="sxs-lookup"><span data-stu-id="a01d0-129">Typically, this string is also used as the time zone's identifier.</span></span>

4. <span data-ttu-id="a01d0-130">Definire il nome dell'ora legale del fuso orario.</span><span class="sxs-lookup"><span data-stu-id="a01d0-130">Define the name of the time zone's daylight time.</span></span>

5. <span data-ttu-id="a01d0-131">Se si desidera usare un identificatore differente rispetto al nome del fuso orario standard, definire l'identificatore del fuso orario.</span><span class="sxs-lookup"><span data-stu-id="a01d0-131">If you want to use a different identifier than the time zone's standard name, define the time zone identifier.</span></span>

6. <span data-ttu-id="a01d0-132">Creare un'istanza di un <xref:System.TimeSpan> oggetto che definisce l'offset del fuso orario rispetto all'ora UTC.</span><span class="sxs-lookup"><span data-stu-id="a01d0-132">Instantiate a <xref:System.TimeSpan> object that defines the time zone's offset from UTC.</span></span> <span data-ttu-id="a01d0-133">Fusi orari con volte in cui siano successivi rispetto all'ora UTC avere un offset positivi.</span><span class="sxs-lookup"><span data-stu-id="a01d0-133">Time zones with times that are later than UTC have a positive offset.</span></span> <span data-ttu-id="a01d0-134">Fusi orari con ore indietro rispetto all'ora UTC hanno una differenza negativa.</span><span class="sxs-lookup"><span data-stu-id="a01d0-134">Time zones with times that are earlier than UTC have a negative offset.</span></span>

7. <span data-ttu-id="a01d0-135">Chiamare il <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> metodo per creare un'istanza del nuovo fuso orario.</span><span class="sxs-lookup"><span data-stu-id="a01d0-135">Call the <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> method to instantiate the new time zone.</span></span>

## <a name="example"></a><span data-ttu-id="a01d0-136">Esempio</span><span class="sxs-lookup"><span data-stu-id="a01d0-136">Example</span></span>

<span data-ttu-id="a01d0-137">L'esempio seguente definisce un fuso orario Standard centrale degli Stati Uniti che include le regole di regolazione per un'ampia gamma di intervalli di tempo da 1918 a quella attuale.</span><span class="sxs-lookup"><span data-stu-id="a01d0-137">The following example defines a Central Standard Time zone for the United States that includes adjustment rules for a variety of time intervals from 1918 to the present.</span></span>

[!code-csharp[System.TimeZone2.CreateTimeZone#5](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/cs/System.TimeZone2.CreateTimeZone.cs#5)]
[!code-vb[System.TimeZone2.CreateTimeZone#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/vb/System.TimeZone2.CreateTimeZone.vb#5)]

<span data-ttu-id="a01d0-138">Il fuso orario creato in questo esempio include più regole di regolazione.</span><span class="sxs-lookup"><span data-stu-id="a01d0-138">The time zone created in this example has multiple adjustment rules.</span></span> <span data-ttu-id="a01d0-139">Prestare attenzione per assicurarsi che l'efficace date di inizio e fine di qualsiasi regola di rettifica non si sovrappongono con le date di un'altra regola di rettifica.</span><span class="sxs-lookup"><span data-stu-id="a01d0-139">Care must be taken to ensure that the effective start and end dates of any adjustment rule do not overlap with the dates of another adjustment rule.</span></span> <span data-ttu-id="a01d0-140">Se è presente una sovrapposizione, un <xref:System.InvalidTimeZoneException> viene generata un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="a01d0-140">If there is an overlap, an <xref:System.InvalidTimeZoneException> is thrown.</span></span>

<span data-ttu-id="a01d0-141">Per le regole di rettifica mobili, il valore 5 viene passato per il `week` parametro del <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> metodo per indicare che la transizione si verifica nell'ultima settimana di un determinato mese.</span><span class="sxs-lookup"><span data-stu-id="a01d0-141">For floating adjustment rules, the value 5 is passed to the `week` parameter of the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> method to indicate that the transition occurs on the last week of a particular month.</span></span>

<span data-ttu-id="a01d0-142">Nella creazione della matrice di <xref:System.TimeZoneInfo.AdjustmentRule> degli oggetti da utilizzare nel <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> chiamata al metodo, il codice è stato possibile inizializzare la matrice per le dimensioni richieste per il numero di modifiche deve essere creato per il fuso orario.</span><span class="sxs-lookup"><span data-stu-id="a01d0-142">In creating the array of <xref:System.TimeZoneInfo.AdjustmentRule> objects to use in the <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> method call, the code could initialize the array to the size required by the number of adjustments to be created for the time zone.</span></span> <span data-ttu-id="a01d0-143">Questo esempio di codice, chiama il <xref:System.Collections.Generic.List%601.Add%2A> metodo per aggiungere ogni regola di rettifica generico <xref:System.Collections.Generic.List%601> insieme di <xref:System.TimeZoneInfo.AdjustmentRule> oggetti.</span><span class="sxs-lookup"><span data-stu-id="a01d0-143">Instead, this code example calls the <xref:System.Collections.Generic.List%601.Add%2A> method to add each adjustment rule to a generic <xref:System.Collections.Generic.List%601> collection of <xref:System.TimeZoneInfo.AdjustmentRule> objects.</span></span> <span data-ttu-id="a01d0-144">Il codice chiama quindi il <xref:System.Collections.Generic.List%601.CopyTo%2A> metodo per copiare i membri di questa raccolta nella matrice.</span><span class="sxs-lookup"><span data-stu-id="a01d0-144">The code then calls the <xref:System.Collections.Generic.List%601.CopyTo%2A> method to copy the members of this collection to the array.</span></span>

<span data-ttu-id="a01d0-145">L'esempio Usa anche il <xref:System.TimeZoneInfo.TransitionTime.CreateFixedDateRule%2A> metodo per definire le regolazioni data fissa.</span><span class="sxs-lookup"><span data-stu-id="a01d0-145">The example also uses the <xref:System.TimeZoneInfo.TransitionTime.CreateFixedDateRule%2A> method to define fixed-date adjustments.</span></span> <span data-ttu-id="a01d0-146">Ciò è simile alla chiamata di <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> metodo, ad eccezione del fatto che richiede solo l'ora, mese e giorno dei parametri di transizione.</span><span class="sxs-lookup"><span data-stu-id="a01d0-146">This is similar to calling the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> method, except that it requires only the time, month, and day of the transition parameters.</span></span>

<span data-ttu-id="a01d0-147">L'esempio può essere testato usando codice simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="a01d0-147">The example can be tested using code such as the following:</span></span>

[!code-csharp[System.TimeZone2.CreateTimeZone#7](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/cs/System.TimeZone2.CreateTimeZone.cs#7)]
[!code-vb[System.TimeZone2.CreateTimeZone#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/vb/System.TimeZone2.CreateTimeZone.vb#7)]

## <a name="compiling-the-code"></a><span data-ttu-id="a01d0-148">Compilazione del codice</span><span class="sxs-lookup"><span data-stu-id="a01d0-148">Compiling the code</span></span>

<span data-ttu-id="a01d0-149">L'esempio presenta i requisiti seguenti:</span><span class="sxs-lookup"><span data-stu-id="a01d0-149">This example requires:</span></span>

* <span data-ttu-id="a01d0-150">Aggiungere un riferimento a DLL al progetto.</span><span class="sxs-lookup"><span data-stu-id="a01d0-150">That a reference to System.Core.dll be added to the project.</span></span>

* <span data-ttu-id="a01d0-151">Che siano importati spazi dei nomi seguenti:</span><span class="sxs-lookup"><span data-stu-id="a01d0-151">That the following namespaces be imported:</span></span>

  [!code-csharp[System.TimeZone2.CreateTimeZone#6](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/cs/System.TimeZone2.CreateTimeZone.cs#6)]
  [!code-vb[System.TimeZone2.CreateTimeZone#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/vb/System.TimeZone2.CreateTimeZone.vb#6)]

## <a name="see-also"></a><span data-ttu-id="a01d0-152">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="a01d0-152">See also</span></span>

* [<span data-ttu-id="a01d0-153">Date, ore e fusi orari</span><span class="sxs-lookup"><span data-stu-id="a01d0-153">Dates, times, and time zones</span></span>](../../../docs/standard/datetime/index.md)
* [<span data-ttu-id="a01d0-154">Panoramica sui fusi orari</span><span class="sxs-lookup"><span data-stu-id="a01d0-154">Time zone overview</span></span>](../../../docs/standard/datetime/time-zone-overview.md)
* [<span data-ttu-id="a01d0-155">Procedura: Creare fusi orari senza regole di regolazione</span><span class="sxs-lookup"><span data-stu-id="a01d0-155">How to: Create time zones without adjustment rules</span></span>](../../../docs/standard/datetime/create-time-zones-without-adjustment-rules.md)
