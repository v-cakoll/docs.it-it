---
title: 'Gestione di risorse: parola chiave use (F#)'
description: "Informazioni su di F # parola chiave 'use' e la funzione 'using', che è possibile controllare l'inizializzazione e il rilascio delle risorse."
ms.date: 05/16/2016
ms.openlocfilehash: ffa1cb515139a3705920d9d9f79be1a69602f7d8
ms.sourcegitcommit: c7f3e2e9d6ead6cc3acd0d66b10a251d0c66e59d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/08/2018
ms.locfileid: "44188449"
---
# <a name="resource-management-the-use-keyword"></a><span data-ttu-id="ec6b8-103">Gestione di risorse: parola chiave use</span><span class="sxs-lookup"><span data-stu-id="ec6b8-103">Resource Management: The use Keyword</span></span>

<span data-ttu-id="ec6b8-104">In questo argomento descrive la parola chiave `use` e il `using` (funzione), che consentono di controllare l'inizializzazione e il rilascio delle risorse.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-104">This topic describes the keyword `use` and the `using` function, which can control the initialization and release of resources.</span></span>

## <a name="resources"></a><span data-ttu-id="ec6b8-105">Risorse</span><span class="sxs-lookup"><span data-stu-id="ec6b8-105">Resources</span></span>

<span data-ttu-id="ec6b8-106">Il termine *risorsa* viene usato in diversi modi.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-106">The term *resource* is used in more than one way.</span></span> <span data-ttu-id="ec6b8-107">Sì, è possibile i dati utilizzati da un'applicazione, ad esempio stringhe, grafica e simili, ma in questo contesto, le risorse *risorse* fa riferimento alle risorse di sistema operativo o software, ad esempio i contesti di dispositivo di grafica, gli handle di file, rete e oggetti di concorrenza, ad esempio gli handle di attesa e così via, le connessioni di database.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-107">Yes, resources can be data that an application uses, such as strings, graphics, and the like, but in this context, *resources* refers to software or operating system resources, such as graphics device contexts, file handles, network and database connections, concurrency objects such as wait handles, and so on.</span></span> <span data-ttu-id="ec6b8-108">L'uso di queste risorse dalle applicazioni comporta l'acquisizione della risorsa di sistema operativo o altri provider di risorse, seguita da nella versione più recente della risorsa per il pool in modo che può essere fornito a un'altra applicazione.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-108">The use of these resources by applications involves the acquisition of the resource from the operating system or other resource provider, followed by the later release of the resource to the pool so that it can be provided to another application.</span></span> <span data-ttu-id="ec6b8-109">Si verificano problemi quando le applicazioni non rilasciano le risorse al pool comuni.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-109">Problems occur when applications do not release resources back to the common pool.</span></span>

## <a name="managing-resources"></a><span data-ttu-id="ec6b8-110">Gestione di risorse</span><span class="sxs-lookup"><span data-stu-id="ec6b8-110">Managing Resources</span></span>

<span data-ttu-id="ec6b8-111">Per Gestione risorse di un'applicazione efficiente e responsabilmente la risorsa, è necessario rilasciare le risorse in modo rapido e prevedibile.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-111">To efficiently and responsibly manage resources in an application, you must release resources promptly and in a predictable manner.</span></span> <span data-ttu-id="ec6b8-112">.NET Framework consente di eseguire questa operazione fornendo il `System.IDisposable` interfaccia.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-112">The .NET Framework helps you do this by providing the `System.IDisposable` interface.</span></span> <span data-ttu-id="ec6b8-113">Un tipo che implementa `System.IDisposable` ha il `System.IDisposable.Dispose` metodo, che libera correttamente le risorse.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-113">A type that implements `System.IDisposable` has the `System.IDisposable.Dispose` method, which correctly frees resources.</span></span> <span data-ttu-id="ec6b8-114">Garantiscono che per le applicazioni ben scritte `System.IDisposable.Dispose` viene chiamato immediatamente quando qualsiasi oggetto che contiene una risorsa limitata non è più necessario.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-114">Well-written applications guarantee that `System.IDisposable.Dispose` is called promptly when any object that holds a limited resource is no longer needed.</span></span> <span data-ttu-id="ec6b8-115">Fortunatamente, la maggior parte dei linguaggi .NET specificano il supporto per semplificare questa operazione, e F # non fa eccezione.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-115">Fortunately, most .NET languages provide support to make this easier, and F# is no exception.</span></span> <span data-ttu-id="ec6b8-116">Esistono due utili costrutti di linguaggio che supportano il modello dispose: il `use` binding e il `using` (funzione).</span><span class="sxs-lookup"><span data-stu-id="ec6b8-116">There are two useful language constructs that support the dispose pattern: the `use` binding and the `using` function.</span></span>

## <a name="use-binding"></a><span data-ttu-id="ec6b8-117">Usare l'associazione</span><span class="sxs-lookup"><span data-stu-id="ec6b8-117">use Binding</span></span>

<span data-ttu-id="ec6b8-118">Il `use` parola chiave ha un formato simile a quella del `let` associazione:</span><span class="sxs-lookup"><span data-stu-id="ec6b8-118">The `use` keyword has a form that resembles that of the `let` binding:</span></span>

<span data-ttu-id="ec6b8-119">usare *valore* = *espressione*</span><span class="sxs-lookup"><span data-stu-id="ec6b8-119">use *value* = *expression*</span></span>

<span data-ttu-id="ec6b8-120">Fornisce la stessa funzionalità di un `let` associazione ma aggiunge una chiamata a `Dispose` sul valore quando il valore esce dall'ambito.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-120">It provides the same functionality as a `let` binding but adds a call to `Dispose` on the value when the value goes out of scope.</span></span> <span data-ttu-id="ec6b8-121">Si noti che il compilatore inserisce un controllo null per il valore in modo che, se il valore è `null`, la chiamata a `Dispose` non viene effettuato un tentativo.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-121">Note that the compiler inserts a null check on the value, so that if the value is `null`, the call to `Dispose` is not attempted.</span></span>

<span data-ttu-id="ec6b8-122">Nell'esempio seguente viene illustrato come chiudere un file automaticamente tramite la `use` (parola chiave).</span><span class="sxs-lookup"><span data-stu-id="ec6b8-122">The following example shows how to close a file automatically by using the `use` keyword.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6301.fs)]

>[!NOTE]
<span data-ttu-id="ec6b8-123">È possibile usare `use` nelle espressioni di calcolo, nel qual caso una versione personalizzata del `use` espressione viene usata.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-123">You can use `use` in computation expressions, in which case a customized version of the `use` expression is used.</span></span> <span data-ttu-id="ec6b8-124">Per altre informazioni, vedere [sequenze](sequences.md), [flussi di lavoro asincroni](asynchronous-workflows.md), e [espressioni di calcolo](computation-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="ec6b8-124">For more information, see [Sequences](sequences.md), [Asynchronous Workflows](asynchronous-workflows.md), and [Computation Expressions](computation-expressions.md).</span></span>

## <a name="using-function"></a><span data-ttu-id="ec6b8-125">utilizzo (funzione)</span><span class="sxs-lookup"><span data-stu-id="ec6b8-125">using Function</span></span>

<span data-ttu-id="ec6b8-126">Il `using` funzione ha il formato seguente:</span><span class="sxs-lookup"><span data-stu-id="ec6b8-126">The `using` function has the following form:</span></span>

<span data-ttu-id="ec6b8-127">`using` (*expression1*) *funzione o espressione lambda*</span><span class="sxs-lookup"><span data-stu-id="ec6b8-127">`using` (*expression1*) *function-or-lambda*</span></span>

<span data-ttu-id="ec6b8-128">In un `using` espressione *expression1* crea l'oggetto che deve essere eliminato.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-128">In a `using` expression, *expression1* creates the object that must be disposed.</span></span> <span data-ttu-id="ec6b8-129">Il risultato del *expression1* (l'oggetto che deve essere eliminato) diventa un argomento *valore*, alla *funzione o espressione lambda*, che è una funzione che prevede un singolo argomento di un tipo che corrisponde al valore restante prodotta da *expression1*, o un'espressione lambda che prevede un argomento di quel tipo.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-129">The result of *expression1* (the object that must be disposed) becomes an argument, *value*, to *function-or-lambda*, which is either a function that expects a single remaining argument of a type that matches the value produced by *expression1*, or a lambda expression that expects an argument of that type.</span></span> <span data-ttu-id="ec6b8-130">Al termine dell'esecuzione della funzione, il runtime chiama `Dispose` e libera le risorse (a meno che il valore è `null`, nel qual caso non viene effettuata la chiamata a Dispose).</span><span class="sxs-lookup"><span data-stu-id="ec6b8-130">At the end of the execution of the function, the runtime calls `Dispose` and frees the resources (unless the value is `null`, in which case the call to Dispose is not attempted).</span></span>

<span data-ttu-id="ec6b8-131">Nell'esempio seguente viene illustrato il `using` espressione con un'espressione lambda.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-131">The following example demonstrates the `using` expression with a lambda expression.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6302.fs)]

<span data-ttu-id="ec6b8-132">L'esempio seguente mostra il `using` espressione con una funzione.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-132">The next example shows the `using` expression with a function.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6303.fs)]

<span data-ttu-id="ec6b8-133">Si noti che la funzione potrebbe essere una funzione che presenta alcuni argomenti già applicati.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-133">Note that the function could be a function that has some arguments applied already.</span></span> <span data-ttu-id="ec6b8-134">Nell'esempio di codice seguente viene illustrata questa possibilità.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-134">The following code example demonstrates this.</span></span> <span data-ttu-id="ec6b8-135">Viene creato un file che contiene la stringa `XYZ`.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-135">It creates a file that contains the string `XYZ`.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6304.fs)]

<span data-ttu-id="ec6b8-136">Il `using` funzione e `use` associazione sono quasi equivalenti modi per ottenere lo stesso risultato.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-136">The `using` function and the `use` binding are nearly equivalent ways to accomplish the same thing.</span></span> <span data-ttu-id="ec6b8-137">Il `using` parola chiave offre un maggiore controllo sul momento `Dispose` viene chiamato.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-137">The `using` keyword provides more control over when `Dispose` is called.</span></span> <span data-ttu-id="ec6b8-138">Quando si usa `using`, `Dispose` viene chiamato alla fine dell'espressione lambda o funzione; quando usano le `use` parola chiave, `Dispose` viene chiamato alla fine del blocco di codice che lo contiene.</span><span class="sxs-lookup"><span data-stu-id="ec6b8-138">When you use `using`, `Dispose` is called at the end of the function or lambda expression; when you use the `use` keyword, `Dispose` is called at the end of the containing code block.</span></span> <span data-ttu-id="ec6b8-139">In generale, è preferibile usare `use` anziché il `using` (funzione).</span><span class="sxs-lookup"><span data-stu-id="ec6b8-139">In general, you should prefer to use `use` instead of the `using` function.</span></span>

## <a name="see-also"></a><span data-ttu-id="ec6b8-140">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="ec6b8-140">See also</span></span>

- [<span data-ttu-id="ec6b8-141">Riferimenti per il linguaggio F#</span><span class="sxs-lookup"><span data-stu-id="ec6b8-141">F# Language Reference</span></span>](index.md)
